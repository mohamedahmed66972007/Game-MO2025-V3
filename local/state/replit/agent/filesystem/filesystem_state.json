{"file_contents":{"client/src/components/ui/Menu.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Button } from \"./button\";\nimport { Input } from \"./input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"./card\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"./alert-dialog\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { connectWebSocket, getLastPlayerName } from \"@/lib/websocket\";\nimport { Gamepad2, Users, User, Key, DoorOpen, ArrowLeft, BookOpen } from \"lucide-react\";\nimport { GameSettings } from \"./GameSettings\";\n\nexport function Menu() {\n  const { setMode, startSingleplayer, setPlayerName, setIsConnecting, setConnectionError } = useNumberGame();\n  const [showMultiplayer, setShowMultiplayer] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n  const [playerName, setPlayerNameInput] = useState(\"\");\n  const [roomId, setRoomId] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [previousRoom, setPreviousRoom] = useState<{roomId: string; playerName: string} | null>(null);\n  const [showRoomWarningDialog, setShowRoomWarningDialog] = useState(false);\n\n  useEffect(() => {\n    const savedPlayerName = getLastPlayerName();\n    if (savedPlayerName) {\n      setPlayerNameInput(savedPlayerName);\n    }\n    \n    // Check for previous room session\n    const session = sessionStorage.getItem(\"multiplayerSession\");\n    if (session) {\n      try {\n        const parsed = JSON.parse(session);\n        if (parsed.roomId && parsed.playerName && Date.now() - parsed.timestamp < 30 * 60 * 1000) {\n          setPreviousRoom({ roomId: parsed.roomId, playerName: parsed.playerName });\n        }\n      } catch (e) {\n        // Ignore parse errors\n      }\n    }\n  }, []);\n\n  const handleSingleplayer = () => {\n    setShowSettings(true);\n  };\n\n  const handleMultiplayerMenu = () => {\n    setConnectionError(null); // Clear any previous connection errors\n    setShowMultiplayer(true);\n  };\n\n  const handleSettingsConfirm = (settings: { numDigits: number; maxAttempts: number }) => {\n    startSingleplayer(settings);\n    setShowSettings(false);\n  };\n\n  if (showSettings) {\n    return <GameSettings onConfirm={handleSettingsConfirm} isMultiplayer={false} />;\n  }\n\n  const handleCreateRoom = () => {\n    if (!playerName.trim()) {\n      alert(\"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ\");\n      return;\n    }\n    \n    // Check if there's a previous room and show warning\n    if (previousRoom) {\n      setShowRoomWarningDialog(true);\n      return;\n    }\n    \n    proceedCreateRoom();\n  };\n\n  const proceedCreateRoom = () => {\n    setConnectionError(null); // Clear any previous errors\n    sessionStorage.removeItem(\"multiplayerSession\"); // Clear old session before creating new room\n    setIsLoading(true);\n    setPlayerName(playerName);\n    setMode(\"multiplayer\");\n    setIsConnecting(true);\n    connectWebSocket(playerName);\n    setShowRoomWarningDialog(false);\n  };\n\n  const handleExitPreviousRoom = () => {\n    // Delete previous room session and proceed with creating new room\n    sessionStorage.removeItem(\"multiplayerSession\");\n    localStorage.removeItem(\"challengeStorage\");\n    setPreviousRoom(null);\n    setShowRoomWarningDialog(false);\n    proceedCreateRoom();\n  };\n\n  const handleJoinRoom = () => {\n    if (!playerName.trim()) {\n      alert(\"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ\");\n      return;\n    }\n    if (!roomId.trim()) {\n      alert(\"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ©\");\n      return;\n    }\n    setConnectionError(null); // Clear any previous errors\n    setIsLoading(true);\n    setPlayerName(playerName);\n    setMode(\"multiplayer\");\n    setIsConnecting(true);\n    connectWebSocket(playerName, roomId.toUpperCase());\n  };\n\n  const handleRejoinPreviousRoom = () => {\n    if (!previousRoom) return;\n    setConnectionError(null); // Clear any previous errors\n    setIsLoading(true);\n    setPlayerName(previousRoom.playerName);\n    setMode(\"multiplayer\");\n    setIsConnecting(true);\n    connectWebSocket(previousRoom.playerName, previousRoom.roomId);\n  };\n\n  const handleDeletePreviousRoom = () => {\n    sessionStorage.removeItem(\"multiplayerSession\");\n    setPreviousRoom(null);\n  };\n\n  if (showRoomWarningDialog && previousRoom) {\n    return (\n      <AlertDialog open={showRoomWarningDialog} onOpenChange={setShowRoomWarningDialog}>\n        <AlertDialogContent className=\"bg-white border border-gray-200 rounded-2xl shadow-xl\">\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"text-gray-800 text-2xl font-bold\">\n              ØºØ±ÙØ© Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„\n            </AlertDialogTitle>\n            <AlertDialogDescription className=\"text-gray-600 text-base mt-2\">\n              Ù„Ù‚Ø¯ ÙƒÙ†Øª ÙÙŠ ØºØ±ÙØ© Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ø¨Ø±Ù‚Ù… <span className=\"font-mono bg-gray-100 px-2 py-1 rounded mx-1 font-bold text-gray-800\">{previousRoom.roomId}</span>\n              <br />\n              Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„ÙŠÙ‡Ø§ Ø£Ù… Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù†Ù‡Ø§ ÙˆØ§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©ØŸ\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <div className=\"flex gap-3 justify-end mt-6\">\n            <AlertDialogCancel className=\"bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg\">\n              Ø¥ØºÙ„Ø§Ù‚\n            </AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleRejoinPreviousRoom}\n              className=\"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg\"\n            >\n              Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØºØ±ÙØ©\n            </AlertDialogAction>\n            <AlertDialogAction\n              onClick={handleExitPreviousRoom}\n              className=\"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-6 rounded-lg\"\n            >\n              Ø®Ø±ÙˆØ¬ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙŠØ¯Ø©\n            </AlertDialogAction>\n          </div>\n        </AlertDialogContent>\n      </AlertDialog>\n    );\n  }\n\n  if (showMultiplayer) {\n    if (isLoading) {\n      return (\n        <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50\">\n          <div className=\"text-center relative\">\n            <div className=\"inline-flex items-center justify-center mb-4\">\n              <div className=\"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-500\"></div>\n            </div>\n            <p className=\"text-gray-800 text-xl font-semibold\">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</p>\n            <p className=\"text-gray-600 text-sm mt-2\">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50 p-4 overflow-y-auto\">\n        <Card className=\"w-full max-w-4xl bg-white shadow-xl border border-gray-200 rounded-2xl relative overflow-hidden my-8\">\n          <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500\"></div>\n          \n          <CardHeader className=\"text-center pb-4 pt-8 border-b border-gray-200\">\n            <div className=\"mb-4 flex justify-center\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg\">\n                <Users className=\"w-8 h-8 text-white\" />\n              </div>\n            </div>\n            <CardTitle className=\"text-center text-gray-800 text-3xl font-bold mb-2\">\n              Ù„Ø¹Ø¨ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†\n            </CardTitle>\n            <p className=\"text-center text-gray-600 text-base\">\n              ØªØ­Ø¯Ù Ø¨ÙŠÙ†Ùƒ ÙˆØ¨ÙŠÙ† Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ\n            </p>\n          </CardHeader>\n          \n          <CardContent className=\"p-8 space-y-6\">\n            {previousRoom && (\n              <div className=\"bg-gradient-to-r from-orange-50 to-yellow-50 border-2 border-orange-300 p-5 rounded-xl\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <p className=\"text-lg font-bold text-orange-800\">ğŸ”„ ØºØ±ÙØ© Ø³Ø§Ø¨Ù‚Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©!</p>\n                  <button\n                    onClick={handleDeletePreviousRoom}\n                    className=\"text-orange-600 hover:text-red-600 text-xl font-bold transition-colors\"\n                  >\n                    âœ•\n                  </button>\n                </div>\n                <p className=\"text-sm text-orange-700 mb-3\">\n                  Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ©: <span className=\"font-mono font-bold\">{previousRoom.roomId}</span> | Ø§Ù„Ù„Ø§Ø¹Ø¨: <span className=\"font-bold\">{previousRoom.playerName}</span>\n                </p>\n                <Button\n                  onClick={handleRejoinPreviousRoom}\n                  disabled={isLoading}\n                  className=\"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white font-semibold py-3 rounded-lg shadow-md hover:shadow-lg transition-all\"\n                >\n                  ğŸšª Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØºØ±ÙØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©\n                </Button>\n              </div>\n            )}\n\n            <div className=\"bg-gray-50 p-4 rounded-xl border border-gray-200\">\n              <label className=\"text-gray-700 text-sm mb-2 block font-semibold flex items-center\">\n                <User className=\"w-4 h-4 ml-2\" />\n                Ø§Ø³Ù…Ùƒ\n              </label>\n              <Input\n                type=\"text\"\n                placeholder=\"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ\"\n                value={playerName}\n                onChange={(e) => setPlayerNameInput(e.target.value)}\n                className=\"bg-white text-gray-800 border-gray-300 placeholder:text-gray-400 h-12 rounded-lg focus:border-blue-500 focus:ring-blue-500 text-base\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-8\">\n              {/* Left - Create Room */}\n              <div className=\"space-y-5\">\n                <div>\n                  <h3 className=\"text-gray-800 font-bold text-lg mb-4 flex items-center\">\n                    <span className=\"text-blue-600 font-bold ml-2\">â‘ </span>\n                    Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©\n                  </h3>\n                </div>\n\n                <Button\n                  onClick={handleCreateRoom}\n                  disabled={isLoading}\n                  className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold text-base py-6 rounded-xl shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center gap-2\"\n                >\n                  <Users className=\"w-5 h-5\" />\n                  Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ©\n                </Button>\n              </div>\n\n              {/* Right - Join Room */}\n              <div className=\"space-y-5\">\n                <div>\n                  <h3 className=\"text-gray-800 font-bold text-lg mb-4 flex items-center\">\n                    <span className=\"text-purple-600 font-bold ml-2\">â‘¡</span>\n                    Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„ØºØ±ÙØ© Ù…ÙˆØ¬ÙˆØ¯Ø©\n                  </h3>\n                </div>\n\n                <div className=\"bg-gray-50 p-4 rounded-xl border border-gray-200\">\n                  <label className=\"text-gray-700 text-sm mb-2 block font-semibold flex items-center\">\n                    <Key className=\"w-4 h-4 ml-2\" />\n                    Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ©\n                  </label>\n                  <Input\n                    type=\"text\"\n                    placeholder=\"Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ©\"\n                    value={roomId}\n                    onChange={(e) => setRoomId(e.target.value.toUpperCase())}\n                    className=\"bg-white text-gray-800 border-gray-300 placeholder:text-gray-400 h-12 rounded-lg font-mono text-center text-lg focus:border-blue-500 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <Button\n                  onClick={handleJoinRoom}\n                  disabled={isLoading}\n                  className=\"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-semibold text-base py-6 rounded-xl shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center gap-2\"\n                >\n                  <DoorOpen className=\"w-5 h-5\" />\n                  Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…\n                </Button>\n              </div>\n            </div>\n\n            <Button\n              onClick={() => {\n                setShowMultiplayer(false);\n                setIsLoading(false);\n              }}\n              className=\"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold text-base py-5 rounded-xl shadow-sm hover:shadow-md transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center gap-2\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n              Ø±Ø¬ÙˆØ¹\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50 p-4\">\n      <Card className=\"w-full max-w-6xl bg-white shadow-xl border border-gray-200 rounded-2xl relative overflow-hidden\">\n        <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500\"></div>\n        \n        <div className=\"grid grid-cols-2 gap-8 p-8\">\n          {/* Right Side - Title and Buttons */}\n          <div className=\"flex flex-col justify-start\">\n            <div className=\"mb-6 flex justify-center\">\n              <div className=\"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg\">\n                <Gamepad2 className=\"w-12 h-12 text-white\" />\n              </div>\n            </div>\n            <h1 className=\"text-center text-gray-800 text-4xl font-bold mb-2\">\n              Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ®Ù…ÙŠÙ†\n            </h1>\n            <p className=\"text-center text-gray-700 text-base mb-2\">\n              Ø®Ù…Ù† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† <span className=\"text-blue-600 font-bold\">4 Ø£Ø±Ù‚Ø§Ù…</span>\n            </p>\n            <p className=\"text-center text-gray-600 text-sm mb-8\">\n\n            </p>\n\n            <div className=\"space-y-4\">\n              <Button\n                onClick={handleSingleplayer}\n                className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold text-lg py-6 rounded-xl shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center gap-3\"\n                size=\"lg\"\n              >\n                <Gamepad2 className=\"w-6 h-6\" />\n                Ù„Ø¹Ø¨ ÙØ±Ø¯ÙŠ\n              </Button>\n\n              <Button\n                onClick={handleMultiplayerMenu}\n                className=\"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-semibold text-lg py-6 rounded-xl shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center gap-3\"\n                size=\"lg\"\n              >\n                <Users className=\"w-6 h-6\" />\n                Ù„Ø¹Ø¨ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†\n              </Button>\n            </div>\n          </div>\n\n          {/* Left Side - Instructions */}\n          <div className=\"bg-blue-50 p-6 rounded-xl border border-blue-200 h-fit\">\n            <h3 className=\"text-gray-800 font-bold mb-4 text-lg flex items-center\">\n              <BookOpen className=\"w-5 h-5 ml-2\" />\n              ğŸ“– Ø´Ø±Ø­ Ø§Ù„Ù„Ø¹Ø¨Ø©:\n            </h3>\n            <ul className=\"text-gray-800 text-sm space-y-3\">\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-600 font-bold ml-3 mt-0.5\">â‘ </span>\n                <span><strong className=\"text-blue-700\">Ø§Ø®ØªØ± Ø±Ù‚Ù…Ùƒ Ø§Ù„Ø³Ø±ÙŠ:</strong> Ø³ÙŠØ·Ù„Ø¨ Ù…Ù†Ùƒ ÙƒØªØ§Ø¨Ø© 4 Ø£Ø±Ù‚Ø§Ù… Ø³Ø±ÙŠØ© ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„Ø®ØµÙ… ØªØ®Ù…ÙŠÙ†Ù‡Ø§</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-600 font-bold ml-3 mt-0.5\">â‘¡</span>\n                <span><strong className=\"text-blue-700\">Ø§Ø¯Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©:</strong> Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ù‚ÙÙ„ Ø§Ù„Ù…Ø¤Ø´Ø± ÙˆØ¯Ø®ÙˆÙ„ Ø§Ù„ØºØ±ÙØ© </span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-600 font-bold ml-3 mt-0.5\">â‘¢</span>\n                <span><strong className=\"text-blue-700\">Ø§Ù„ØªØ­ÙƒÙ…:</strong> Ø§Ø³ØªØ®Ø¯Ù… <span className=\"text-purple-700 font-mono bg-white px-1 rounded\">W/A/S/D</span> Ù„Ù„ØªØ­Ø±Ùƒ ÙˆØ§Ù„Ù…Ø§ÙˆØ³ Ù„Ù„Ù†Ø¸Ø±</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-600 font-bold ml-3 mt-0.5\">â‘£</span>\n                <span><strong className=\"text-blue-700\">Ø§Ù„ØªØ®Ù…ÙŠÙ†:</strong> Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ø§Ù„ØºØ±ÙØ© Ù„Ø¨Ù†Ø§Ø¡ ØªØ®Ù…ÙŠÙ†ÙƒØŒ Ø«Ù… Ø§Ø¶ØºØ· âœ“ Ù„Ù„ØªØ£ÙƒÙŠØ¯</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-600 font-bold ml-3 mt-0.5\">â‘¤</span>\n                <span><strong className=\"text-blue-700\">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ğŸ”µ Ø£Ø²Ø±Ù‚ = Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ø¨Ø£ÙŠ Ù…ÙˆØ¶Ø¹ | ğŸŸ¢ Ø£Ø®Ø¶Ø± = Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ø¨Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„ØµØ­ÙŠØ­</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-600 font-bold ml-3 mt-0.5\">â‘¥</span>\n                <span><strong className=\"text-blue-700\">Ø§Ù„ÙØ§Ø¦Ø²:</strong> Ù…Ù† ÙŠØ®Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø³Ø±ÙŠ Ø£ÙˆÙ„Ø§Ù‹ ÙŠÙÙˆØ² Ø¨Ø§Ù„Ù…Ø¨Ø§Ø±Ø©! ğŸ†</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":18044},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path, { dirname } from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\nimport { fileURLToPath } from \"url\";\nimport glsl from \"vite-plugin-glsl\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    glsl(), // Add GLSL shader support\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(__dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(__dirname, \"shared\"),\n    },\n  },\n  root: path.resolve(__dirname, \"client\"),\n  build: {\n    outDir: path.resolve(__dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    port: 5000,\n    strictPort: true,\n    hmr: {\n      clientPort: 443,\n    },\n    allowedHosts: true,\n  },\n  preview: {\n    host: \"0.0.0.0\",\n    port: 5000,\n  },\n  // Add support for large models and audio files\n  assetsInclude: [\"**/*.gltf\", \"**/*.glb\", \"**/*.mp3\", \"**/*.ogg\", \"**/*.wav\"],\n});\n","size_bytes":1092},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/lib/websocket.ts":{"content":"import { useNumberGame } from \"./stores/useNumberGame\";\nimport { toast } from \"sonner\";\n\nlet socket: WebSocket | null = null;\n\nconst saveSessionToStorage = (playerName: string, playerId: string, roomId: string) => {\n  const store = useNumberGame.getState();\n  const isInGame = store.multiplayer.gameStatus === \"playing\";\n  sessionStorage.setItem(\"multiplayerSession\", JSON.stringify({\n    playerName,\n    playerId,\n    roomId,\n    timestamp: Date.now(),\n    gameState: isInGame ? {\n      gameStatus: store.multiplayer.gameStatus,\n      sharedSecret: store.multiplayer.sharedSecret,\n      attempts: store.multiplayer.attempts,\n      startTime: store.multiplayer.startTime,\n      settings: store.multiplayer.settings,\n    } : null,\n  }));\n  localStorage.setItem(\"lastPlayerName\", playerName);\n};\n\nexport const getLastPlayerName = () => {\n  return localStorage.getItem(\"lastPlayerName\") || \"\";\n};\n\nconst getSessionFromStorage = () => {\n  const session = sessionStorage.getItem(\"multiplayerSession\");\n  if (session) {\n    try {\n      const parsed = JSON.parse(session);\n      // Only consider sessions less than 30 seconds old as valid for reconnection\n      if (Date.now() - parsed.timestamp < 30 * 1000) {\n        return parsed;\n      } else {\n        sessionStorage.removeItem(\"multiplayerSession\");\n        return null;\n      }\n    } catch (e) {\n      return null;\n    }\n  }\n  return null;\n};\n\nexport const connectWebSocket = (playerName: string, roomId?: string) => {\n  const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n  const wsUrl = `${protocol}//${window.location.host}/game`;\n\n  socket = new WebSocket(wsUrl);\n\n  socket.onopen = () => {\n    console.log(\"WebSocket connected\");\n    if (roomId) {\n      send({ type: \"join_room\", roomId, playerName });\n    } else {\n      send({ type: \"create_room\", playerName });\n    }\n  };\n\n  socket.onmessage = (event) => {\n    const message = JSON.parse(event.data);\n    handleMessage(message);\n  };\n\n  socket.onclose = () => {\n    console.log(\"WebSocket disconnected\");\n  };\n\n  socket.onerror = (error) => {\n    console.error(\"WebSocket error:\", error);\n  };\n\n  return socket;\n};\n\nexport const send = (message: any) => {\n  if (socket && socket.readyState === WebSocket.OPEN) {\n    socket.send(JSON.stringify(message));\n  }\n};\n\nexport const clearSession = () => {\n  sessionStorage.removeItem(\"multiplayerSession\");\n};\n\nexport const disconnect = () => {\n  if (socket) {\n    socket.close();\n    socket = null;\n  }\n  clearSession();\n};\n\nexport const reconnectToSession = () => {\n  const session = getSessionFromStorage();\n  if (session && session.playerId && session.roomId) {\n    return session;\n  }\n  return null;\n};\n\nexport const reconnectWithRetry = (playerName: string, playerId: string, roomId: string) => {\n  const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n  const wsUrl = `${protocol}//${window.location.host}/game`;\n\n  socket = new WebSocket(wsUrl);\n\n  socket.onopen = () => {\n    console.log(\"WebSocket connected - attempting reconnect\");\n    send({ \n      type: \"reconnect\", \n      playerId, \n      playerName,\n      roomId \n    });\n  };\n\n  socket.onmessage = (event) => {\n    const message = JSON.parse(event.data);\n    handleMessage(message);\n  };\n\n  socket.onclose = () => {\n    console.log(\"WebSocket disconnected\");\n  };\n\n  socket.onerror = (error) => {\n    console.error(\"WebSocket error:\", error);\n  };\n\n  return socket;\n};\n\nconst handleMessage = (message: any) => {\n  const store = useNumberGame.getState();\n\n  console.log(\"Received message:\", message);\n\n  switch (message.type) {\n    case \"room_created\":\n      store.setRoomId(message.roomId);\n      store.setPlayerId(message.playerId);\n      if (message.hostId) {\n        store.setHostId(message.hostId);\n      }\n      if (message.players) {\n        store.setPlayers(message.players);\n      }\n      store.setIsConnecting(false);\n      saveSessionToStorage(store.multiplayer.playerName, message.playerId, message.roomId);\n      console.log(\"Room created:\", message.roomId, \"Host:\", message.hostId);\n      break;\n\n    case \"room_joined\":\n      store.setRoomId(message.roomId);\n      store.setPlayerId(message.playerId);\n      if (message.hostId) {\n        store.setHostId(message.hostId);\n      }\n      store.setPlayers(message.players);\n      store.setIsConnecting(false);\n      saveSessionToStorage(store.multiplayer.playerName, message.playerId, message.roomId);\n      console.log(\"Room joined:\", message.roomId, \"Host:\", message.hostId);\n      break;\n\n    case \"players_updated\":\n      store.setPlayers(message.players);\n      if (message.hostId) {\n        store.setHostId(message.hostId);\n      }\n      break;\n\n    case \"host_changed\":\n      store.setHostId(message.newHostId);\n      break;\n\n    case \"settings_updated\":\n      store.setMultiplayerSettings(message.settings);\n      break;\n\n    case \"game_started\":\n      store.setGameStatus(\"playing\");\n      store.setSharedSecret(message.sharedSecret);\n      store.setMultiplayerPhase(\"playing\");\n      store.setMultiplayerStartTime();\n      saveSessionToStorage(store.multiplayer.playerName, store.multiplayer.playerId, store.multiplayer.roomId);\n      console.log(\"Game started with shared secret, startTime:\", Date.now(), \"phase:\", store.multiplayer.phase);\n      break;\n\n    case \"room_rejoined\":\n      store.setRoomId(message.roomId);\n      store.setPlayerId(message.playerId);\n      store.setHostId(message.hostId);\n      store.setPlayers(message.players);\n      store.setIsConnecting(false);\n      console.log(\"Successfully reconnected to room\", message.roomId);\n      break;\n\n    case \"game_state\":\n      store.setGameStatus(message.status);\n      store.setSharedSecret(message.sharedSecret);\n      // Restore settings\n      if (message.settings) {\n        store.setMultiplayerSettings(message.settings);\n      }\n      // Keep existing attempts and game data\n      console.log(\"Received game state after reconnect\");\n      break;\n\n    case \"player_game_state\":\n      // Restore player's game data after reconnect\n      message.attempts.forEach((attempt: any) => {\n        store.addMultiplayerAttempt(attempt);\n      });\n      if (message.finished) {\n        if (message.won) {\n          store.setMultiplayerPhase(\"won\");\n        } else {\n          store.setMultiplayerPhase(\"lost\");\n        }\n      }\n      console.log(\"Restored player game state\");\n      break;\n\n    case \"player_disconnected\":\n      toast.info(`Ø§Ù„Ù„Ø§Ø¹Ø¨ ${message.playerName} Ø§Ù†Ù‚Ø·Ø¹ Ø§ØªØµØ§Ù„Ù‡`, {\n        duration: 5000,\n        icon: \"ğŸ“¡\",\n      });\n      break;\n\n    case \"player_reconnected\":\n      toast.success(`Ø§Ù„Ù„Ø§Ø¹Ø¨ ${message.playerName} Ø¹Ø§Ø¯ Ù„Ù„Ø¹Ø¨Ø© âœ…`, {\n        duration: 5000,\n      });\n      break;\n\n    case \"player_timeout\":\n      toast.warning(`Ø§Ù„Ù„Ø§Ø¹Ø¨ ${message.playerName} Ø§Ù†Ù‚Ø·Ø¹ Ø§ØªØµØ§Ù„Ù‡ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ (Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© 5 Ø¯Ù‚Ø§Ø¦Ù‚)`, {\n        duration: 7000,\n        icon: \"â±ï¸\",\n      });\n      break;\n\n    case \"guess_result\":\n      const attempt = {\n        guess: message.guess,\n        correctCount: message.correctCount,\n        correctPositionCount: message.correctPositionCount,\n      };\n      store.addMultiplayerAttempt(attempt);\n      \n      if (message.won) {\n        store.setMultiplayerPhase(\"won\");\n        store.setMultiplayerEndTime();\n      }\n      break;\n\n    case \"max_attempts_reached\":\n      store.setMultiplayerPhase(\"lost\");\n      store.setMultiplayerEndTime();\n      console.log(\"Max attempts reached - game lost, waiting for final results...\");\n      break;\n\n    case \"player_attempt\":\n      // Another player made an attempt - update spectators\n      console.log(`Player ${message.playerName} made attempt #${message.attemptNumber}${message.won ? ' and won!' : ''}`);\n      // Spectators can see other players' attempts\n      break;\n\n    case \"player_quit\":\n      console.log(`Player ${message.playerName} quit the game`);\n      toast.info(`Ø§Ù„Ù„Ø§Ø¹Ø¨ ${message.playerName} Ø§Ù†Ø³Ø­Ø¨ Ù…Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©`, {\n        duration: 5000,\n        icon: \"ğŸšª\",\n      });\n      break;\n\n    case \"game_results\":\n      // Show results to finished players only\n      const currentState = useNumberGame.getState();\n      store.setGameResults(message.winners, message.losers, message.sharedSecret);\n      // Update still playing list\n      useNumberGame.setState({\n        multiplayer: {\n          ...currentState.multiplayer,\n          winners: message.winners,\n          losers: message.losers,\n          stillPlaying: message.stillPlaying || [],\n          sharedSecret: message.sharedSecret,\n          showResults: true,\n          gameStatus: \"finished\",\n        },\n      });\n      console.log(\"Game finished - results received\", { winners: message.winners.length, losers: message.losers.length, stillPlaying: message.stillPlaying?.length });\n      \n      // Clear session when results are shown to prevent reconnecting to finished game\n      clearSession();\n      \n      if (message.reason === \"time_expired\") {\n        toast.info(\"Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸ•\", {\n          duration: 7000,\n        });\n      } else if (message.reason === \"all_finished\") {\n        toast.success(\"Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©! Ø£Ù†Ù‡Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙ‡Ù… âœ…\", {\n          duration: 7000,\n        });\n      } else if (message.reason === \"player_finished\") {\n        // Check if current player won or lost\n        const playerId = useNumberGame.getState().multiplayer.playerId;\n        const isWinner = message.winners.some((w: any) => w.playerId === playerId);\n        \n        if (isWinner) {\n          toast.success(\"ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! ğŸ‰ Ù„Ù‚Ø¯ ÙØ²Øª! Ø¬Ø§Ø±ÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬...\", {\n            duration: 5000,\n          });\n        } else {\n          toast.info(\"Ø§Ù†ØªÙ‡Øª Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ. Ø¬Ø§Ø±ÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø­Ø§Ù„ÙŠØ©...\", {\n            duration: 5000,\n          });\n        }\n      }\n      break;\n\n    case \"player_details\":\n      // Could store this in a temporary state for showing details modal\n      console.log(\"Player details received:\", message);\n      break;\n\n    case \"rematch_requested\":\n      store.setRematchRequested(true, message.countdown);\n      if (message.votes) {\n        store.setRematchVotes(message.votes);\n      }\n      if (message.requestedBy) {\n        toast.info(`${message.requestedBy} Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©! ğŸ”„`, {\n          duration: 5000,\n        });\n      }\n      break;\n\n    case \"rematch_countdown\":\n      store.setRematchCountdown(message.countdown);\n      store.setRematchVotes(message.votes);\n      break;\n\n    case \"rematch_vote_update\":\n      store.setRematchVotes(message.votes);\n      break;\n\n    case \"rematch_starting\":\n      store.resetMultiplayerGame();\n      store.setPlayers(message.players);\n      console.log(\"Rematch starting - game reset\");\n      break;\n\n    case \"rematch_cancelled\":\n      store.setRematchRequested(false, null);\n      console.log(\"Rematch cancelled:\", message.message);\n      break;\n\n    case \"kicked_from_room\":\n      console.log(\"Kicked from room:\", message.message);\n      store.resetMultiplayer();\n      store.setMode(\"menu\");\n      break;\n\n    case \"room_deleted\":\n      console.log(\"Room deleted:\", message.message);\n      toast.warning(message.message, { duration: 5000 });\n      clearSession();\n      store.resetMultiplayer();\n      store.setMode(\"menu\");\n      break;\n\n    case \"error\":\n      console.error(\"Server error:\", message.message);\n      \n      // Map server errors to user-friendly Arabic messages\n      let errorMessage = message.message;\n      if (message.message.includes(\"Room not found\")) {\n        errorMessage = \"âŒ Ø§Ù„ØºØ±ÙØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ØºØ§Ø¯Ø±ÙˆØ§ Ø§Ù„Ù„Ø¹Ø¨Ø©\";\n      } else if (message.message.includes(\"full\")) {\n        errorMessage = \"âŒ Ø§Ù„ØºØ±ÙØ© Ù…Ù…ØªÙ„Ø¦Ø© - Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…\";\n      } else if (message.message.includes(\"session not found\")) {\n        errorMessage = \"âŒ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù†ØªÙ‡Øª - ÙŠØ±Ø¬Ù‰ Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰\";\n      }\n      \n      store.setConnectionError(errorMessage);\n      store.setIsConnecting(false);\n      store.setRoomId(\"\");\n      store.setPlayerId(\"\");\n      clearSession();\n      break;\n\n    default:\n      console.log(\"Unknown message type:\", message.type);\n  }\n};\n","size_bytes":12327},"client/src/components/mobile/MobileMultiplayer.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { MultiplayerResults } from \"../ui/MultiplayerResults\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { useAudio } from \"@/lib/stores/useAudio\";\nimport { send, connectWebSocket, disconnect } from \"@/lib/websocket\";\nimport { Home, Check, X, Users, Copy, Crown, Play, Settings, RefreshCw, Eye, Trophy, Maximize2, Minimize2, LogOut } from \"lucide-react\";\nimport { GameSettings } from \"../ui/GameSettings\";\nimport { clearSession } from \"@/lib/websocket\";\n\nexport function MobileMultiplayer() {\n  const {\n    multiplayer,\n    setMode,\n    resetMultiplayer,\n    addMultiplayerDigit,\n    deleteMultiplayerDigit,\n    submitMultiplayerGuess,\n  } = useNumberGame();\n\n  const { playDigit, playDelete, playConfirm, playError, successSound } = useAudio();\n  const [playerName, setPlayerName] = useState(\"\");\n  const [joinRoomId, setJoinRoomId] = useState(\"\");\n  const [showJoinForm, setShowJoinForm] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState<string | null>(null);\n  const [copied, setCopied] = useState(false);\n  const [expandedAttempts, setExpandedAttempts] = useState(false);\n  const [currentTime, setCurrentTime] = useState(Date.now());\n\n  const [input, setInput] = useState<string[]>([]);\n  const [focusedIndex, setFocusedIndex] = useState(0);\n\n  const numDigits = multiplayer.settings.numDigits;\n\n  useEffect(() => {\n    const savedName = localStorage.getItem(\"lastPlayerName\");\n    if (savedName) {\n      setPlayerName(savedName);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (playerName.trim()) {\n      localStorage.setItem(\"lastPlayerName\", playerName);\n    }\n  }, [playerName]);\n\n  useEffect(() => {\n    setInput(new Array(numDigits).fill(\"\"));\n    setFocusedIndex(0);\n  }, [numDigits]);\n\n  useEffect(() => {\n    if (multiplayer.currentGuess.length < numDigits) {\n      const newInput = [...multiplayer.currentGuess.map(String), ...new Array(numDigits - multiplayer.currentGuess.length).fill(\"\")];\n      setInput(newInput);\n      setFocusedIndex(multiplayer.currentGuess.length);\n    } else if (multiplayer.currentGuess.length === numDigits) {\n      setInput(multiplayer.currentGuess.map(String));\n      setFocusedIndex(numDigits);\n    }\n  }, [multiplayer.currentGuess, numDigits]);\n\n  // Live timer update\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTime(Date.now());\n    }, 100);\n    return () => clearInterval(interval);\n  }, []);\n\n  const handleCreateRoom = () => {\n    if (!playerName.trim()) return;\n    connectWebSocket(playerName.trim());\n  };\n\n  const handleJoinRoom = () => {\n    if (!playerName.trim() || !joinRoomId.trim()) return;\n    connectWebSocket(playerName.trim(), joinRoomId.trim().toUpperCase());\n  };\n\n  const handleStartGame = () => {\n    if (multiplayer.isHost && multiplayer.players.length >= 2) {\n      send({ type: \"start_game\" });\n    }\n  };\n\n  const handleNumberInput = (num: string) => {\n    if (multiplayer.gameStatus !== \"playing\" || multiplayer.phase !== \"playing\") return;\n    if (focusedIndex >= numDigits) return;\n\n    playDigit(parseInt(num));\n    addMultiplayerDigit(parseInt(num));\n  };\n\n  const handleBackspace = () => {\n    if (multiplayer.gameStatus !== \"playing\" || multiplayer.phase !== \"playing\") return;\n    if (focusedIndex === 0) return;\n\n    playDelete();\n    deleteMultiplayerDigit();\n  };\n\n  const handleSubmit = () => {\n    if (multiplayer.gameStatus !== \"playing\" || multiplayer.phase !== \"playing\") return;\n    if (input.some(val => val === \"\")) {\n      playError();\n      return;\n    }\n\n    playConfirm();\n    send({\n      type: \"submit_guess\",\n      guess: multiplayer.currentGuess,\n    });\n    submitMultiplayerGuess();\n  };\n\n  const handleLeaveRoom = () => {\n    send({ type: \"leave_room\" });\n    clearSession();\n    disconnect();\n    resetMultiplayer();\n  };\n\n  const handleHome = () => {\n    if (multiplayer.roomId) {\n      handleLeaveRoom();\n    }\n    setMode(\"menu\");\n  };\n\n  const handleCopyRoomId = () => {\n    navigator.clipboard.writeText(multiplayer.roomId);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const handleRematchVote = (accepted: boolean) => {\n    send({ type: \"rematch_vote\", accepted });\n  };\n\n  const formatDuration = (ms: number) => {\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    if (minutes > 0) {\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    }\n    return `${seconds}s`;\n  };\n\n  const getCurrentDuration = () => {\n    if (multiplayer.gameStatus === \"playing\" && multiplayer.startTime > 0) {\n      return currentTime - multiplayer.startTime;\n    }\n    return 0;\n  };\n\n  const playerDetails = selectedPlayer \n    ? [...multiplayer.winners, ...multiplayer.losers].find(p => p.playerId === selectedPlayer)\n    : null;\n\n  // Check if current player has finished\n  const playerFinished = multiplayer.phase === \"won\" || multiplayer.phase === \"lost\";\n  \n  // Show results screen if player finished or game is finished\n  const shouldShowResults = playerFinished || multiplayer.gameStatus === \"finished\";\n\n  // Initialize spectator mode when player finishes\n  // Watching mode when player finishes\n  useEffect(() => {\n    if (playerFinished && !multiplayer.showResults) {\n      // Player finished but results not shown yet - just wait\n      console.log(\"Player finished, waiting for results...\");\n    }\n  }, [playerFinished, multiplayer.showResults]);\n\n  if (showSettings && multiplayer.isHost && multiplayer.gameStatus === \"waiting\") {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4\">\n        <GameSettings\n          onConfirm={(settings) => {\n            send({ \n              type: \"update_settings\", \n              settings: { numDigits: settings.numDigits, maxAttempts: settings.maxAttempts }\n            });\n            setShowSettings(false);\n          }}\n          isMultiplayer={true}\n        />\n      </div>\n    );\n  }\n\n  if (shouldShowResults) {\n    return <MultiplayerResults />;\n  }\n\n  if (selectedPlayer && playerDetails) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4\">\n        <div className=\"max-w-2xl mx-auto space-y-4\">\n          <div className=\"flex items-center justify-between bg-white rounded-xl p-4 shadow-md\">\n            <button\n              onClick={() => setSelectedPlayer(null)}\n              className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n            >\n              <X className=\"w-6 h-6 text-gray-700\" />\n            </button>\n            <h2 className=\"text-xl font-bold text-gray-800\">{playerDetails.playerName}</h2>\n          </div>\n\n          <div className=\"bg-white rounded-xl p-6 shadow-md\">\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª:</span>\n                <span className=\"text-2xl font-bold text-blue-600\">{playerDetails.attempts}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚:</span>\n                <span className=\"text-xl font-bold text-green-600\">{formatDuration(playerDetails.duration)}</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl p-4 shadow-md\">\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4\">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</h3>\n            <div className=\"space-y-3\">\n              {playerDetails.attemptsDetails.map((attempt, idx) => (\n                <div\n                  key={idx}\n                  className=\"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-xl border border-gray-200 flex-row-reverse\"\n                >\n                  <span className=\"font-mono text-2xl font-bold text-gray-800\">\n                    {attempt.guess.join(\"\")}\n                  </span>\n                  <div className=\"flex gap-3\">\n                    <div className=\"flex flex-col items-center\">\n                      <span className=\"text-2xl font-bold text-blue-600\">{attempt.correctCount}</span>\n                      <span className=\"text-xs text-blue-600\">ØµØ­</span>\n                    </div>\n                    <div className=\"flex flex-col items-center\">\n                      <span className=\"text-2xl font-bold text-green-600\">{attempt.correctPositionCount}</span>\n                      <span className=\"text-xs text-green-600\">Ù…ÙƒØ§Ù†Ù‡Ù…</span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (false) { // Removed old finished game screen - use results component instead\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4\">\n        <div className=\"max-w-2xl mx-auto space-y-4\">\n          <div className=\"bg-white rounded-xl p-6 shadow-md text-center\">\n            <div className=\"text-6xl mb-4\">ğŸ†</div>\n            <h2 className=\"text-3xl font-bold text-purple-600 mb-6\">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>\n            \n            {multiplayer.winners.length > 0 && (\n              <div className=\"mb-6\">\n                <h3 className=\"text-xl font-bold text-green-600 mb-3 flex items-center justify-center gap-2\">\n                  <Trophy className=\"w-6 h-6\" />\n                  Ø§Ù„ÙØ§Ø¦Ø²ÙˆÙ†\n                </h3>\n                <div className=\"space-y-2\">\n                  {multiplayer.winners.map((winner, idx) => (\n                    <button\n                      key={winner.playerId}\n                      onClick={() => setSelectedPlayer(winner.playerId)}\n                      className=\"w-full flex items-center justify-between bg-gradient-to-r from-yellow-100 to-green-100 p-4 rounded-xl border-2 border-green-400 hover:border-green-600 transition-colors\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <span className=\"text-2xl font-bold text-purple-600\">#{idx + 1}</span>\n                        <Crown className=\"w-6 h-6 text-yellow-500\" />\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"font-bold text-gray-800\">{winner.playerName}</p>\n                        <p className=\"text-sm text-gray-600\">\n                          {winner.attempts} Ù…Ø­Ø§ÙˆÙ„Ø§Øª Â· {formatDuration(winner.duration)}\n                        </p>\n                      </div>\n                      <Eye className=\"w-5 h-5 text-gray-500\" />\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {multiplayer.losers.length > 0 && (\n              <div className=\"mb-6\">\n                <h3 className=\"text-xl font-bold text-red-600 mb-3\">Ù„Ù… ÙŠÙƒÙ…Ù„ÙˆØ§</h3>\n                <div className=\"space-y-2\">\n                  {multiplayer.losers.map((loser) => (\n                    <button\n                      key={loser.playerId}\n                      onClick={() => setSelectedPlayer(loser.playerId)}\n                      className=\"w-full flex items-center justify-between bg-gray-100 p-4 rounded-xl border-2 border-gray-300 hover:border-gray-400 transition-colors\"\n                    >\n                      <span className=\"font-bold text-gray-700\">{loser.playerName}</span>\n                      <Eye className=\"w-5 h-5 text-gray-500\" />\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {multiplayer.rematchState.requested && (\n              <div className=\"bg-blue-50 border-2 border-blue-300 rounded-xl p-4 mb-4\">\n                <p className=\"text-lg font-bold text-blue-800 mb-3\">Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ</p>\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={() => handleRematchVote(true)}\n                    className=\"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl transition-colors\"\n                  >\n                    Ù†Ø¹Ù…\n                  </button>\n                  <button\n                    onClick={() => handleRematchVote(false)}\n                    className=\"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl transition-colors\"\n                  >\n                    Ù„Ø§\n                  </button>\n                </div>\n              </div>\n            )}\n\n            <button\n              onClick={handleHome}\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors\"\n            >\n              Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Show game while playing\n  if (multiplayer.gameStatus === \"playing\" && multiplayer.sharedSecret.length > 0) {\n    return (\n      <div className=\"min-h-screen p-4 pb-safe flex flex-col\">\n        <div className=\"max-w-2xl mx-auto w-full space-y-4 flex-1 flex flex-col overflow-hidden\">\n          <div className=\"flex flex-row-reverse items-center justify-between bg-white rounded-xl p-4 shadow-md flex-shrink-0 gap-4\">\n            <button\n              onClick={handleHome}\n              className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0\"\n            >\n              <Home className=\"w-6 h-6 text-gray-700\" />\n            </button>\n            <div className=\"text-right flex-1\">\n              <p className=\"text-sm text-gray-600\">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù…Ù† {multiplayer.settings.maxAttempts}</p>\n              <p className=\"text-2xl font-bold text-blue-600\">{multiplayer.settings.maxAttempts - multiplayer.attempts.length}</p>\n            </div>\n            <div className=\"text-right flex-1 border-l-2 border-gray-300 pl-4\">\n              <p className=\"text-sm text-gray-600\">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ù‚Ø¶ÙŠ</p>\n              <p className=\"text-2xl font-bold text-green-600\">{formatDuration(getCurrentDuration())}</p>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl p-3 shadow-md flex-shrink-0\">\n            <h3 className=\"text-base font-bold text-gray-800 mb-2 text-center\">Ø£Ø¯Ø®Ù„ {numDigits} Ø£Ø±Ù‚Ø§Ù…</h3>\n            \n            <div className=\"flex gap-2 justify-center mb-3\" dir=\"ltr\">\n              {input.map((digit, idx) => (\n                <div\n                  key={idx}\n                  className={`w-12 h-14 border-2 rounded-lg flex items-center justify-center text-2xl font-bold transition-all ${\n                    focusedIndex === idx\n                      ? \"border-blue-500 bg-blue-50\"\n                      : \"border-gray-300 bg-white\"\n                  }`}\n                >\n                  {digit}\n                </div>\n              ))}\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-2 mb-2\" dir=\"ltr\">\n              {[1, 2, 3].map((num) => (\n                <button\n                  key={num}\n                  onClick={() => handleNumberInput(num.toString())}\n                  className=\"h-12 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-lg font-bold rounded-lg shadow-md active:scale-95 transition-all\"\n                >\n                  {num}\n                </button>\n              ))}\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-2 mb-2\" dir=\"ltr\">\n              {[4, 5, 6].map((num) => (\n                <button\n                  key={num}\n                  onClick={() => handleNumberInput(num.toString())}\n                  className=\"h-12 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-lg font-bold rounded-lg shadow-md active:scale-95 transition-all\"\n                >\n                  {num}\n                </button>\n              ))}\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-2 mb-2\" dir=\"ltr\">\n              {[7, 8, 9].map((num) => (\n                <button\n                  key={num}\n                  onClick={() => handleNumberInput(num.toString())}\n                  className=\"h-12 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-lg font-bold rounded-lg shadow-md active:scale-95 transition-all\"\n                >\n                  {num}\n                </button>\n              ))}\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-2\" dir=\"ltr\">\n              <button\n                onClick={handleBackspace}\n                className=\"h-12 bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-lg shadow-md active:scale-95 transition-all flex items-center justify-center col-span-1\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={() => handleNumberInput(\"0\")}\n                className=\"h-12 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-lg font-bold rounded-lg shadow-md active:scale-95 transition-all col-span-1\"\n              >\n                0\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={input.some(val => val === \"\")}\n                className=\"h-12 bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-bold rounded-lg shadow-md active:scale-95 transition-all flex items-center justify-center col-span-1\"\n              >\n                <Check className=\"w-5 h-5\" />\n              </button>\n            </div>\n          </div>\n\n          {multiplayer.attempts.length > 0 && !expandedAttempts && (\n            <div className=\"bg-white rounded-xl p-4 shadow-md flex-shrink-0\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"text-lg font-bold text-gray-800\">Ù…Ø­Ø§ÙˆÙ„Ø§Øª ({multiplayer.attempts.length} / {multiplayer.settings.maxAttempts})</h3>\n                <button\n                  onClick={() => setExpandedAttempts(true)}\n                  className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                >\n                  <Maximize2 className=\"w-5 h-5 text-gray-600\" />\n                </button>\n              </div>\n              <div>\n                {multiplayer.attempts.length > 0 && (\n                  <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg flex-row-reverse\">\n                    <span className=\"font-mono text-lg font-bold text-gray-800\">\n                      {[...multiplayer.attempts].reverse()[0].guess.join(\"\")}\n                    </span>\n                    <div className=\"flex gap-2 text-sm\">\n                      <span className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-lg font-semibold\">\n                        {[...multiplayer.attempts].reverse()[0].correctCount} ØµØ­\n                      </span>\n                      <span className=\"bg-green-100 text-green-800 px-3 py-1 rounded-lg font-semibold\">\n                        {[...multiplayer.attempts].reverse()[0].correctPositionCount === 0 && '0 Ù…ÙƒØ§Ù†Ùˆ ØµØ­'}\n                        {[...multiplayer.attempts].reverse()[0].correctPositionCount === 1 && '1 Ù…ÙƒØ§Ù†Ùˆ ØµØ­'}\n                        {[...multiplayer.attempts].reverse()[0].correctPositionCount > 1 && `${[...multiplayer.attempts].reverse()[0].correctPositionCount} Ù…ÙƒØ§Ù†Ù‡Ù… ØµØ­`}\n                      </span>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {expandedAttempts && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-end z-50 p-4\">\n              <div className=\"w-full bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]\">\n                <div className=\"flex items-center justify-between p-4 border-b flex-shrink-0\">\n                  <h3 className=\"text-2xl font-bold text-gray-800\">Ù…Ø­Ø§ÙˆÙ„Ø§Øª ({multiplayer.attempts.length} / {multiplayer.settings.maxAttempts})</h3>\n                  <button\n                    onClick={() => setExpandedAttempts(false)}\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                  >\n                    <Minimize2 className=\"w-6 h-6 text-gray-600\" />\n                  </button>\n                </div>\n                <div className=\"overflow-y-scroll flex-1 p-4\">\n                  <div className=\"space-y-3\">\n                    {[...multiplayer.attempts].reverse().map((attempt, idx) => (\n                      <div\n                        key={idx}\n                        className=\"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-xl border border-gray-200 flex-row-reverse\"\n                      >\n                        <span className=\"font-mono text-2xl font-bold text-gray-800\">\n                          {attempt.guess.join(\"\")}\n                        </span>\n                        <div className=\"flex gap-3\">\n                          <div className=\"flex flex-col items-center\">\n                            <span className=\"text-2xl font-bold text-blue-600\">{attempt.correctCount}</span>\n                            <span className=\"text-xs text-blue-600\">ØµØ­</span>\n                          </div>\n                          <div className=\"flex flex-col items-center\">\n                            <span className=\"text-2xl font-bold text-green-600\">{attempt.correctPositionCount}</span>\n                            <span className=\"text-xs text-green-600\">Ù…ÙƒØ§Ù†Ù‡Ù…</span>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n                <button\n                  onClick={() => setExpandedAttempts(false)}\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 m-4 rounded-xl transition-colors flex-shrink-0\"\n                >\n                  Ø¥ØºÙ„Ø§Ù‚\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  if (!multiplayer.roomId) {\n    return (\n      <div className=\"min-h-screen p-6 flex items-center justify-center\">\n        <div className=\"w-full max-w-md space-y-4\">\n          <div className=\"bg-white rounded-2xl shadow-xl p-6 space-y-4\">\n            <button\n              onClick={handleHome}\n              className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n            >\n              <Home className=\"w-6 h-6 text-gray-700\" />\n            </button>\n\n            <div className=\"text-center mb-6\">\n              <h2 className=\"text-2xl font-bold text-gray-800\">Ù„Ø¹Ø¨ Ø¬Ù…Ø§Ø¹ÙŠ</h2>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-bold text-gray-700 mb-2 text-right\">\n                Ø§Ø³Ù…Ùƒ\n              </label>\n              <input\n                type=\"text\"\n                value={playerName}\n                onChange={(e) => setPlayerName(e.target.value)}\n                placeholder=\"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ\"\n                className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl text-right focus:outline-none focus:border-blue-500\"\n                dir=\"rtl\"\n              />\n            </div>\n\n            <button\n              onClick={handleCreateRoom}\n              disabled={!playerName.trim()}\n              className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-xl transition-all flex items-center justify-center gap-2\"\n            >\n              <Users className=\"w-5 h-5\" />\n              Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©\n            </button>\n\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <div className=\"w-full border-t border-gray-300\"></div>\n              </div>\n              <div className=\"relative flex justify-center text-sm\">\n                <span className=\"px-4 bg-white text-gray-500\">Ø£Ùˆ</span>\n              </div>\n            </div>\n\n            {!showJoinForm ? (\n              <button\n                onClick={() => setShowJoinForm(true)}\n                disabled={!playerName.trim()}\n                className=\"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-xl transition-colors\"\n              >\n                Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„ØºØ±ÙØ©\n              </button>\n            ) : (\n              <div className=\"space-y-3\">\n                <input\n                  type=\"text\"\n                  value={joinRoomId}\n                  onChange={(e) => setJoinRoomId(e.target.value.toUpperCase())}\n                  placeholder=\"Ø±Ù…Ø² Ø§Ù„ØºØ±ÙØ©\"\n                  className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl text-center focus:outline-none focus:border-blue-500 font-mono text-xl uppercase\"\n                  maxLength={6}\n                />\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => setShowJoinForm(false)}\n                    className=\"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-xl transition-colors\"\n                  >\n                    Ø¥Ù„ØºØ§Ø¡\n                  </button>\n                  <button\n                    onClick={handleJoinRoom}\n                    disabled={!playerName.trim() || !joinRoomId.trim() || joinRoomId.length !== 6}\n                    className=\"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl transition-colors\"\n                  >\n                    Ø§Ù†Ø¶Ù…Ø§Ù…\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Mobile lobby screen (waiting for game to start)\n  if (multiplayer.gameStatus === \"waiting\") {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4\">\n        <div className=\"max-w-2xl mx-auto space-y-4\">\n          {/* Header */}\n          <div className=\"bg-white rounded-xl p-4 shadow-md\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <button\n                onClick={handleHome}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                <Home className=\"w-6 h-6 text-gray-700\" />\n              </button>\n              <div className=\"text-center flex-1\">\n                <h3 className=\"text-sm text-gray-600\">Ø±Ù…Ø² Ø§Ù„ØºØ±ÙØ©</h3>\n                <div className=\"flex items-center justify-center gap-2\">\n                  <button\n                    onClick={handleCopyRoomId}\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                  >\n                    {copied ? (\n                      <Check className=\"w-5 h-5 text-green-600\" />\n                    ) : (\n                      <Copy className=\"w-5 h-5 text-gray-600\" />\n                    )}\n                  </button>\n                  <p className=\"text-3xl font-mono font-bold text-blue-600\">{multiplayer.roomId}</p>\n                </div>\n              </div>\n              {multiplayer.isHost && (\n                <button\n                  onClick={() => setShowSettings(true)}\n                  className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                >\n                  <Settings className=\"w-6 h-6 text-gray-700\" />\n                </button>\n              )}\n            </div>\n\n            {/* Settings Display */}\n            <div className=\"bg-gray-100 rounded-lg p-3 text-center text-sm text-gray-600\">\n              Ø£Ø±Ù‚Ø§Ù…: <span className=\"font-bold text-gray-800\">{multiplayer.settings.numDigits}</span> Â· Ù…Ø­Ø§ÙˆÙ„Ø§Øª: <span className=\"font-bold text-gray-800\">{multiplayer.settings.maxAttempts}</span>\n            </div>\n          </div>\n\n          {/* Players List */}\n          <div className=\"bg-white rounded-xl p-4 shadow-md\">\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center\">\n              <Users className=\"w-5 h-5 ml-2\" />\n              Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ† ({multiplayer.players.length})\n            </h3>\n            <div className=\"space-y-2\">\n              {multiplayer.players.map((player) => {\n                const isHost = player.id === multiplayer.hostId;\n                const isYou = player.id === multiplayer.playerId;\n                \n                return (\n                  <div\n                    key={player.id}\n                    className={`p-3 rounded-xl flex items-center gap-3 ${\n                      isYou\n                        ? \"bg-gradient-to-r from-blue-100 to-purple-100 border-2 border-blue-300\"\n                        : \"bg-gray-50 border border-gray-200\"\n                    }`}\n                  >\n                    {isHost && (\n                      <Crown className=\"w-5 h-5 text-yellow-500 fill-yellow-500\" />\n                    )}\n                    {!isHost && (\n                      <span className=\"w-5 h-5 bg-purple-600 text-white rounded-full flex items-center justify-center text-xs\">\n                        ğŸ‘¤\n                      </span>\n                    )}\n                    <span className=\"font-bold text-gray-800\">{player.name}</span>\n                    {isYou && (\n                      <span className=\"text-xs bg-blue-200 text-blue-700 px-2 py-0.5 rounded-lg ml-auto\">\n                        (Ø£Ù†Øª)\n                      </span>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n            {multiplayer.players.length < 2 && (\n              <div className=\"bg-blue-50 p-3 rounded-xl border-2 border-blue-300 mt-3\">\n                <p className=\"text-blue-800 text-center font-medium text-sm\">\n                  ğŸ•’ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¢Ø®Ø±ÙŠÙ†...\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"space-y-2\">\n            {multiplayer.isHost && multiplayer.players.length >= 2 && (\n              <button\n                onClick={handleStartGame}\n                className=\"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-3 rounded-xl shadow-lg flex items-center justify-center gap-2\"\n              >\n                <Play className=\"w-5 h-5\" />\n                Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©\n              </button>\n            )}\n\n            {!multiplayer.isHost && (\n              <div className=\"bg-purple-50 border-2 border-purple-300 rounded-xl p-3\">\n                <p className=\"text-purple-800 text-center font-semibold text-sm\">\n                  â³ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¶ÙŠÙ Ù„Ù„Ø¹Ø¨Ø©...\n                </p>\n              </div>\n            )}\n\n            <button\n              onClick={handleLeaveRoom}\n              className=\"w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-bold py-3 rounded-xl shadow-lg flex items-center justify-center gap-2\"\n            >\n              <LogOut className=\"w-5 h-5\" />\n              Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØºØ±ÙØ©\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // If we reach here, something is wrong - return empty or fallback\n  return null;\n}\n","size_bytes":32082},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7224},"client/src/components/game/ChallengeDoor.tsx":{"content":"import { useRef, useState, useEffect } from \"react\";\nimport { Text } from \"@react-three/drei\";\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\nimport { useChallenge } from \"@/lib/stores/useChallenge\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\n\nexport function ChallengeDoor({ onEnterChallenge }: { onEnterChallenge: () => void }) {\n  const buttonRef = useRef<THREE.Mesh>(null);\n  const hintBoxRef = useRef<THREE.Mesh>(null);\n  const { camera } = useThree();\n  const [isHovering, setIsHovering] = useState(false);\n  const challengeCompleted = useChallenge((state) => state.challengeCompleted);\n  const hint = useChallenge((state) => state.hint);\n  const { generateHint } = useChallenge();\n  const { singleplayer } = useNumberGame();\n  const raycasterRef = useRef(new THREE.Raycaster());\n\n  useEffect(() => {\n    if (challengeCompleted && !hint && singleplayer.secretCode) {\n      console.log(\"ğŸšª Door: Generating hint, secretCode:\", singleplayer.secretCode);\n      generateHint(singleplayer.secretCode);\n    }\n  }, [challengeCompleted, hint, generateHint, singleplayer.secretCode]);\n\n  useEffect(() => {\n    console.log(\"ğŸšª Door state - challengeCompleted:\", challengeCompleted, \"hint:\", hint);\n  }, [challengeCompleted, hint]);\n\n  useEffect(() => {\n    const handlePointerDown = () => {\n      if (challengeCompleted) return;\n      \n      raycasterRef.current.setFromCamera(new THREE.Vector2(0, 0), camera);\n      raycasterRef.current.far = Infinity;\n      \n      let clickedButton = false;\n      if (buttonRef.current) {\n        const intersectsButton = raycasterRef.current.intersectObject(buttonRef.current, true);\n        if (intersectsButton.length > 0) clickedButton = true;\n      }\n      if (hintBoxRef.current && !clickedButton) {\n        const intersectsHint = raycasterRef.current.intersectObject(hintBoxRef.current, true);\n        if (intersectsHint.length > 0) clickedButton = true;\n      }\n      \n      if (clickedButton) {\n        onEnterChallenge();\n      }\n    };\n\n    window.addEventListener('pointerdown', handlePointerDown);\n    return () => window.removeEventListener('pointerdown', handlePointerDown);\n  }, [onEnterChallenge, camera, challengeCompleted]);\n\n  useFrame((state) => {\n    if (!buttonRef.current && !hintBoxRef.current) return;\n\n    raycasterRef.current.setFromCamera(new THREE.Vector2(0, 0), camera);\n    raycasterRef.current.far = Infinity;\n    \n    let isHover = false;\n    if (buttonRef.current) {\n      const intersectsButton = raycasterRef.current.intersectObject(buttonRef.current, true);\n      if (intersectsButton.length > 0) isHover = true;\n    }\n    if (hintBoxRef.current) {\n      const intersectsHint = raycasterRef.current.intersectObject(hintBoxRef.current, true);\n      if (intersectsHint.length > 0) isHover = true;\n    }\n    \n    if (isHover !== isHovering) {\n      setIsHovering(isHover);\n    }\n\n    if (buttonRef.current) {\n      const targetScale = isHovering && !challengeCompleted ? 1.1 : 1.0;\n      buttonRef.current.scale.lerp(\n        new THREE.Vector3(targetScale, targetScale, targetScale),\n        0.15\n      );\n    }\n  });\n\n  const handleDoorClick = () => {\n    onEnterChallenge();\n  };\n\n  const hintText = hint\n    ? hint.type === \"digit\"\n      ? `${hint.value}`\n      : String(hint.value)\n    : \"\";\n\n  return (\n    <group position={[11, 2, 0.2]} rotation={[0, -Math.PI / 2, 0]}>\n      {/* Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªÙ„Ù…ÙŠØ­ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø´ÙØ§Ù */}\n      <group position={[0, 2.0, 0]}>\n        {/* Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´ÙØ§ÙØ© */}\n        <mesh ref={hintBoxRef}>\n          <boxGeometry args={[2.3, 1.3, 0.15]} />\n          <meshStandardMaterial\n            color=\"#6366f1\"\n            transparent\n            opacity={0.3}\n            metalness={0.3}\n            roughness={0.4}\n          />\n        </mesh>\n\n        {/* Ø­Ø¯ÙˆØ¯ Ø°Ù‡Ø¨ÙŠØ© Ø¹Ù„ÙˆÙŠØ© */}\n        <mesh position={[0, 0, 0.08]}>\n          <boxGeometry args={[2.4, 1.4, 0.05]} />\n          <meshStandardMaterial\n            color=\"#fbbf24\"\n            metalness={1}\n            roughness={0.1}\n            emissive=\"#fbbf24\"\n            emissiveIntensity={0.7}\n          />\n        </mesh>\n\n        {/* Ø§Ù„Ù†Øµ */}\n        {challengeCompleted ? (\n          <>\n            <Text\n              position={[0, 0.35, 0.15]}\n              fontSize={0.2}\n              color=\"#fbbf24\"\n              anchorX=\"center\"\n              anchorY=\"middle\"\n              fontWeight=\"bold\"\n            >\n              Ø§Ù„ØªÙ„Ù…ÙŠØ­:\n            </Text>\n            {hint && (\n              <Text\n                position={[0, -0.15, 0.15]}\n                fontSize={0.16}\n                color=\"#fbbf24\"\n                anchorX=\"center\"\n                anchorY=\"middle\"\n                maxWidth={2.1}\n                lineHeight={1.3}\n                fontWeight=\"bold\"\n              >\n                {hintText}\n              </Text>\n            )}\n          </>\n        ) : (\n          <Text\n            position={[0, 0, 0.15]}\n            fontSize={0.24}\n            color=\"#ffffff\"\n            anchorX=\"center\"\n            anchorY=\"middle\"\n            fontWeight=\"bold\"\n          >\n            Ø§Ù„ØªÙ„Ù…ÙŠØ­\n          </Text>\n        )}\n      </group>\n\n      {/* Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ø·Ø§ÙÙŠ Ø§Ù„Ø´ÙØ§Ù */}\n      <mesh \n        ref={buttonRef}\n        position={[0, 0, 0.1]}\n      >\n        <boxGeometry args={[2.0, 2.0, 0.15]} />\n        <meshStandardMaterial\n          color={challengeCompleted ? \"#999999\" : isHovering ? \"#8b5cf6\" : \"#6366f1\"}\n          transparent\n          opacity={0.85}\n          metalness={0.6}\n          roughness={0.2}\n          emissive={challengeCompleted ? \"#999999\" : isHovering ? \"#8b5cf6\" : \"#4f46e5\"}\n          emissiveIntensity={challengeCompleted ? 0.3 : isHovering ? 0.8 : 0.5}\n        />\n      </mesh>\n\n      {/* Ø­Ø¯ÙˆØ¯ Ø°Ù‡Ø¨ÙŠØ© Ù„Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */}\n      <mesh position={[0, 0, 0.11]}>\n        <boxGeometry args={[2.1, 2.1, 0.04]} />\n        <meshStandardMaterial\n          color=\"#fbbf24\"\n          metalness={1}\n          roughness={0.1}\n          emissive=\"#fbbf24\"\n          emissiveIntensity={0.8}\n        />\n      </mesh>\n\n      {/* Ø±Ù…Ø² Ø§Ù„Ù…ØµØ¨Ø§Ø­ */}\n      <Text\n        position={[0, 0.4, 0.2]}\n        fontSize={0.55}\n        color=\"#fbbf24\"\n        anchorX=\"center\"\n        anchorY=\"middle\"\n      >\n        ğŸ’¡\n      </Text>\n\n      {/* Ù†Øµ \"ØªÙ„Ù…ÙŠØ­\" */}\n      <Text\n        position={[0, -0.45, 0.2]}\n        fontSize={0.32}\n        color=\"#ffffff\"\n        anchorX=\"center\"\n        anchorY=\"middle\"\n        fontWeight=\"bold\"\n      >\n        ØªÙ„Ù…ÙŠØ­\n      </Text>\n    </group>\n  );\n}\n","size_bytes":6655},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/MultiplayerLobby.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"./button\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { send, clearSession, disconnect } from \"@/lib/websocket\";\nimport { Users, Copy, LogOut, Settings, Crown, Play } from \"lucide-react\";\nimport { GameSettings } from \"./GameSettings\";\n\nexport function MultiplayerLobby() {\n  const { multiplayer, setMode, resetMultiplayer } = useNumberGame();\n  const [showSettings, setShowSettings] = useState(false);\n  const [copied, setCopied] = useState(false);\n\n  const handleLeaveRoom = () => {\n    send({ type: \"leave_room\" });\n    clearSession();\n    disconnect();\n    resetMultiplayer();\n    setMode(\"menu\");\n    setTimeout(() => {\n      window.location.reload();\n    }, 300);\n  };\n\n  const handleStartGame = () => {\n    if (multiplayer.isHost && multiplayer.players.length >= 2) {\n      send({ type: \"start_game\" });\n    }\n  };\n\n  const handleCopyRoomId = () => {\n    navigator.clipboard.writeText(multiplayer.roomId);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  // Render GameSettings if showSettings is true\n  if (showSettings && multiplayer.isHost) {\n    return (\n      <GameSettings\n        onConfirm={(settings) => {\n          send({ \n            type: \"update_settings\", \n            settings: { numDigits: settings.numDigits, maxAttempts: settings.maxAttempts }\n          });\n          setShowSettings(false);\n        }}\n        isMultiplayer={true}\n      />\n    );\n  }\n\n  // Main lobby view\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50 p-4\">\n      <div className=\"w-full max-w-4xl bg-white border-2 border-gray-200 shadow-2xl rounded-3xl max-h-[90vh] flex flex-col\">\n        {/* Compact Header */}\n        <div className=\"p-4 border-b border-gray-200 flex items-center justify-between flex-shrink-0\">\n          {/* Right side - Logo and Title */}\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-xl flex items-center justify-center shadow-md\">\n              <Users className=\"w-6 h-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl font-bold text-gray-800\">ØºØ±ÙØ© Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ</h1>\n              <p className=\"text-xs text-gray-600\">Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ†: {multiplayer.players.length}/10</p>\n            </div>\n          </div>\n\n          {/* Left side - Room ID and Settings */}\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex items-center gap-2 bg-gradient-to-br from-blue-50 to-purple-50 px-3 py-2 rounded-lg border border-blue-200\">\n              <input\n                type=\"text\"\n                readOnly\n                value={multiplayer.roomId}\n                className=\"w-24 bg-transparent text-gray-800 font-mono font-bold text-sm text-center focus:outline-none\"\n              />\n              <Button\n                onClick={handleCopyRoomId}\n                size=\"sm\"\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded-md flex items-center gap-1 h-7\"\n              >\n                <Copy className=\"w-3 h-3\" />\n                {copied ? 'âœ“' : 'Ù†Ø³Ø®'}\n              </Button>\n            </div>\n            {multiplayer.isHost && (\n              <button\n                onClick={() => setShowSettings(true)}\n                className=\"p-2 hover:bg-blue-100 rounded-lg transition-colors\"\n                title=\"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª\"\n              >\n                <Settings className=\"w-5 h-5 text-blue-600\" />\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Settings Info */}\n        <div className=\"px-4 py-2 bg-gradient-to-r from-amber-50 to-yellow-50 border-b border-amber-200 flex items-center justify-center gap-4 flex-shrink-0\">\n          <div className=\"flex items-center gap-2 text-sm\">\n            <span className=\"text-gray-600\">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…:</span>\n            <span className=\"bg-white px-2 py-0.5 rounded font-bold text-blue-600 border border-blue-300\">\n              {multiplayer.settings.numDigits}\n            </span>\n          </div>\n          <div className=\"flex items-center gap-2 text-sm\">\n            <span className=\"text-gray-600\">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª:</span>\n            <span className=\"bg-white px-2 py-0.5 rounded font-bold text-blue-600 border border-blue-300\">\n              {multiplayer.settings.maxAttempts}\n            </span>\n          </div>\n        </div>\n        \n        {/* Players List - Main content area */}\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          <div className=\"bg-gradient-to-br from-blue-50 to-purple-50 p-4 rounded-2xl border-2 border-gray-200 h-full\">\n            <h3 className=\"text-gray-800 font-bold text-base flex items-center mb-3\">\n              <Users className=\"w-4 h-4 ml-2\" />\n              Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ({multiplayer.players.length})\n            </h3>\n\n            <div className=\"space-y-2\">\n              {multiplayer.players.map((player) => {\n                const isHost = player.id === multiplayer.hostId;\n                const isYou = player.id === multiplayer.playerId;\n                \n                return (\n                  <div\n                    key={player.id}\n                    className={`p-3 rounded-xl flex items-center justify-between transition-all duration-200 ${\n                      isYou\n                        ? \"bg-gradient-to-r from-blue-100 to-purple-100 border-2 border-blue-300 shadow-md\"\n                        : \"bg-white border border-gray-300\"\n                    }`}\n                  >\n                    <span className=\"text-gray-800 font-medium flex items-center\">\n                      {isHost && (\n                        <Crown className=\"w-4 h-4 ml-2 text-yellow-500 fill-yellow-500\" />\n                      )}\n                      {!isHost && (\n                        <span className=\"w-4 h-4 ml-2 bg-purple-600 text-white rounded-full flex items-center justify-center text-xs\">\n                          ğŸ‘¤\n                        </span>\n                      )}\n                      <span className=\"font-bold text-sm\">{player.name}</span>\n                      {isYou && (\n                        <span className=\"mr-2 text-blue-700 text-xs bg-blue-200 px-2 py-0.5 rounded-lg font-semibold\">\n                          (Ø£Ù†Øª)\n                        </span>\n                      )}\n                      {isHost && (\n                        <span className=\"mr-2 text-yellow-700 text-xs bg-yellow-200 px-2 py-0.5 rounded-lg font-semibold\">\n                          (Ø§Ù„Ù…Ø¶ÙŠÙ)\n                        </span>\n                      )}\n                    </span>\n                  </div>\n                );\n              })}\n            </div>\n\n            {multiplayer.players.length < 2 && (\n              <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 p-3 rounded-xl border-2 border-blue-300 mt-3\">\n                <p className=\"text-blue-800 text-center font-medium text-sm\">\n                  ğŸ•’ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¢Ø®Ø±ÙŠÙ†... (ÙŠØªØ·Ù„Ø¨ Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"p-4 border-t border-gray-200 space-y-2 flex-shrink-0\">\n          {multiplayer.isHost && (\n            <Button\n              onClick={handleStartGame}\n              disabled={multiplayer.players.length < 2}\n              className=\"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl shadow-lg flex items-center justify-center gap-2 transition-all\"\n            >\n              <Play className=\"w-5 h-5\" />\n              Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©\n            </Button>\n          )}\n\n          {!multiplayer.isHost && (\n            <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 p-3 rounded-xl border-2 border-purple-300\">\n              <p className=\"text-purple-800 text-center font-semibold text-sm\">\n                â³ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¶ÙŠÙ Ù„Ù„Ø¹Ø¨Ø©...\n              </p>\n            </div>\n          )}\n\n          <Button\n            onClick={handleLeaveRoom}\n            className=\"w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-semibold py-3 rounded-xl shadow-lg transform hover:scale-105 transition-all duration-200 flex items-center justify-center gap-2\"\n          >\n            <LogOut className=\"w-4 h-4\" />\n            Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØºØ±ÙØ©\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":8868},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/lib/stores/useGame.tsx":{"content":"import { create } from \"zustand\";\nimport { subscribeWithSelector } from \"zustand/middleware\";\n\nexport type GamePhase = \"ready\" | \"playing\" | \"ended\";\n\ninterface GameState {\n  phase: GamePhase;\n  \n  // Actions\n  start: () => void;\n  restart: () => void;\n  end: () => void;\n}\n\nexport const useGame = create<GameState>()(\n  subscribeWithSelector((set) => ({\n    phase: \"ready\",\n    \n    start: () => {\n      set((state) => {\n        // Only transition from ready to playing\n        if (state.phase === \"ready\") {\n          return { phase: \"playing\" };\n        }\n        return {};\n      });\n    },\n    \n    restart: () => {\n      set(() => ({ phase: \"ready\" }));\n    },\n    \n    end: () => {\n      set((state) => {\n        // Only transition from playing to ended\n        if (state.phase === \"playing\") {\n          return { phase: \"ended\" };\n        }\n        return {};\n      });\n    }\n  }))\n);\n","size_bytes":893},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path, { dirname } from \"path\";\nimport { fileURLToPath } from \"url\";\nimport { createServer as createViteServer, createLogger, type ServerOptions } from \"vite\";\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions: ServerOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        __dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2409},"client/src/components/mobile/MobileSingleplayer.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { useAudio } from \"@/lib/stores/useAudio\";\nimport { Home, Check, X, Maximize2, Minimize2, Lightbulb } from \"lucide-react\";\nimport { useChallenge } from \"@/lib/stores/useChallenge\";\n\nexport function MobileSingleplayer({ onStartChallenge }: { onStartChallenge?: () => void }) {\n  const {\n    singleplayer,\n    setMode,\n    restartSingleplayer,\n  } = useNumberGame();\n  const challengeCompleted = useChallenge((state) => state.challengeCompleted);\n  const hint = useChallenge((state) => state.hint);\n  const { startChallenge, generateHint } = useChallenge();\n  \n  const { playDigit, playDelete, playError, successSound } = useAudio();\n  const numDigits = singleplayer.settings.numDigits;\n  const [input, setInput] = useState<string[]>(Array(numDigits).fill(\"\"));\n  const [focusedIndex, setFocusedIndex] = useState(0);\n  const [expandedAttempts, setExpandedAttempts] = useState(false);\n  const [showHint, setShowHint] = useState(false);\n  const [expandedAttemptIndex, setExpandedAttemptIndex] = useState(singleplayer.attempts.length - 1);\n\n  useEffect(() => {\n    if (!singleplayer.secretCode || singleplayer.secretCode.length === 0) {\n      restartSingleplayer();\n    }\n  }, [singleplayer.secretCode, restartSingleplayer]);\n\n  useEffect(() => {\n    setInput(Array(numDigits).fill(\"\"));\n    setFocusedIndex(0);\n  }, [numDigits]);\n\n  useEffect(() => {\n    if (singleplayer.phase === \"won\" && challengeCompleted && !hint && singleplayer.secretCode) {\n      generateHint(singleplayer.secretCode);\n    }\n  }, [singleplayer.phase, challengeCompleted, hint, singleplayer.secretCode, generateHint]);\n\n  const handleNumberInput = (num: string) => {\n    if (focusedIndex >= numDigits) return;\n    \n    playDigit(parseInt(num));\n    const newInput = [...input];\n    newInput[focusedIndex] = num;\n    setInput(newInput);\n    \n    if (focusedIndex < numDigits - 1) {\n      setFocusedIndex(focusedIndex + 1);\n    }\n  };\n\n  const handleBackspace = () => {\n    playDelete();\n    if (focusedIndex > 0) {\n      const newInput = [...input];\n      if (input[focusedIndex] === \"\") {\n        newInput[focusedIndex - 1] = \"\";\n        setFocusedIndex(focusedIndex - 1);\n      } else {\n        newInput[focusedIndex] = \"\";\n      }\n      setInput(newInput);\n    } else if (input[0] !== \"\") {\n      const newInput = [...input];\n      newInput[0] = \"\";\n      setInput(newInput);\n    }\n  };\n\n  const handleSubmit = () => {\n    if (input.some(val => val === \"\")) {\n      return;\n    }\n\n    const guess = input.map(Number);\n    let correctCount = 0;\n    let correctPositionCount = 0;\n\n    const secretCopy = [...singleplayer.secretCode];\n    const guessCopy = [...guess];\n    const numDigits = singleplayer.settings.numDigits;\n\n    for (let i = 0; i < numDigits; i++) {\n      if (guessCopy[i] === secretCopy[i]) {\n        correctPositionCount++;\n        secretCopy[i] = -1;\n        guessCopy[i] = -2;\n      }\n    }\n\n    for (let i = 0; i < numDigits; i++) {\n      if (guessCopy[i] !== -2) {\n        const index = secretCopy.indexOf(guessCopy[i]);\n        if (index !== -1) {\n          correctCount++;\n          secretCopy[index] = -1;\n        }\n      }\n    }\n\n    correctCount += correctPositionCount;\n\n    useNumberGame.setState((state) => ({\n      singleplayer: {\n        ...state.singleplayer,\n        attempts: [...state.singleplayer.attempts, { guess, correctCount, correctPositionCount }],\n      },\n    }));\n\n    if (correctPositionCount === numDigits) {\n      if (successSound) {\n        successSound.currentTime = 0;\n        successSound.play();\n      }\n      useNumberGame.setState((state) => ({\n        singleplayer: {\n          ...state.singleplayer,\n          phase: \"won\",\n        },\n      }));\n    } else if (singleplayer.attempts.length >= singleplayer.settings.maxAttempts - 1) {\n      useNumberGame.setState((state) => ({\n        singleplayer: {\n          ...state.singleplayer,\n          phase: \"lost\",\n        },\n      }));\n    }\n\n    setInput(Array(numDigits).fill(\"\"));\n    setFocusedIndex(0);\n  };\n\n  const handleHome = () => {\n    const { resetChallenge } = useChallenge.getState();\n    resetChallenge();\n    restartSingleplayer();\n    setMode(\"menu\");\n  };\n\n  useEffect(() => {\n    if (singleplayer.phase === \"won\") {\n      console.log(\"ğŸ† Player won - challengeCompleted:\", challengeCompleted, \"hint:\", hint);\n      if (challengeCompleted && !hint && singleplayer.secretCode) {\n        console.log(\"ğŸ“ Generating hint on win...\");\n        generateHint(singleplayer.secretCode);\n      }\n    }\n  }, [singleplayer.phase, challengeCompleted, hint, singleplayer.secretCode, generateHint]);\n\n  const hintText = hint\n    ? hint.type === \"digit\"\n      ? `Ø§Ù„Ø®Ø§Ù†Ø© ${(hint.position || 0) + 1}: ${hint.value}`\n      : String(hint.value)\n    : \"\";\n\n  if (singleplayer.phase === \"won\") {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-6\">\n        <div className=\"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center space-y-6\">\n          <div className=\"text-6xl\">ğŸ‰</div>\n          <h2 className=\"text-3xl font-bold text-green-600\">Ù…Ø¨Ø±ÙˆÙƒ! ÙØ²Øª</h2>\n          <p className=\"text-gray-600 text-lg\">\n            Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª: <span className=\"font-bold text-blue-600\">{singleplayer.attempts.length}</span>\n          </p>\n          <p className=\"text-gray-700\">\n            Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ÙƒØ§Ù†: <span className=\"font-mono text-xl font-bold text-purple-600\">{singleplayer.secretCode.join(\"\")}</span>\n          </p>\n          {challengeCompleted && hint && (\n            <div className=\"bg-gradient-to-r from-yellow-400 to-amber-500 rounded-xl p-4 shadow-lg\">\n              <h3 className=\"text-white font-bold text-lg mb-2 flex items-center gap-2 justify-center\">\n                <Lightbulb className=\"w-5 h-5\" />\n                Ø§Ù„ØªÙ„Ù…ÙŠØ­:\n              </h3>\n              <p className=\"text-white text-base font-bold\">{hintText}</p>\n            </div>\n          )}\n          <div className=\"space-y-3\">\n            {!challengeCompleted ? (\n              <button\n                onClick={() => startChallenge()}\n                className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-xl transition-colors flex items-center gap-2 justify-center\"\n              >\n                <Lightbulb className=\"w-5 h-5\" />\n                ØªØ­Ø¯ÙŠ\n              </button>\n            ) : (\n              <div className=\"w-full bg-green-100 border-2 border-green-500 text-green-800 font-bold py-3 px-6 rounded-xl flex items-center gap-2 justify-center\">\n                <span>âœ“</span>\n                <span>ØªÙ… Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠ</span>\n              </div>\n            )}\n            <button\n              onClick={handleHome}\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors\"\n            >\n              Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (singleplayer.phase === \"lost\") {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-6\">\n        <div className=\"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center space-y-6\">\n          <div className=\"text-6xl\">ğŸ˜¢</div>\n          <h2 className=\"text-3xl font-bold text-red-600\">Ø®Ø³Ø±Øª!</h2>\n          <p className=\"text-gray-700\">\n            Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ÙƒØ§Ù†: <span className=\"font-mono text-xl font-bold text-purple-600\">{singleplayer.secretCode.join(\"\")}</span>\n          </p>\n          <div className=\"space-y-3\">\n            <button\n              onClick={restartSingleplayer}\n              className=\"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-colors\"\n            >\n              Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰\n            </button>\n            <button\n              onClick={handleHome}\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors\"\n            >\n              Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const attemptsLeft = singleplayer.settings.maxAttempts - singleplayer.attempts.length;\n\n  return (\n    <div className=\"min-h-screen p-4 pb-safe flex flex-col\">\n      <div className=\"max-w-2xl mx-auto w-full space-y-4 flex-1 flex flex-col overflow-hidden\">\n        <div className=\"flex flex-row-reverse items-center justify-between bg-white rounded-xl p-4 shadow-md flex-shrink-0\">\n          <button\n            onClick={handleHome}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <Home className=\"w-6 h-6 text-gray-700\" />\n          </button>\n          <div className=\"text-right\">\n            <p className=\"text-sm text-gray-600\">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù…Ù† {singleplayer.settings.maxAttempts}</p>\n            <p className=\"text-2xl font-bold text-blue-600\">{attemptsLeft}</p>\n          </div>\n        </div>\n\n\n        {/* Ø²Ø± Ø§Ù„ØªØ­Ø¯ÙŠ Ø£Ùˆ Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªÙ„Ù…ÙŠØ­ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ */}\n        {onStartChallenge && (\n          !challengeCompleted ? (\n            <button\n              onClick={onStartChallenge}\n              className=\"w-full flex items-center gap-2 justify-center bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-4 rounded-xl transition-colors shadow-md flex-shrink-0\"\n            >\n              <Lightbulb className=\"w-6 h-6\" />\n              <span className=\"text-lg\">ØªØ­Ø¯ÙŠ</span>\n            </button>\n          ) : hint ? (\n            <div className=\"w-full bg-gradient-to-r from-yellow-400 to-amber-500 rounded-xl p-4 shadow-md flex-shrink-0\">\n              <h3 className=\"text-white font-bold text-lg mb-2 flex items-center gap-2\">\n                <Lightbulb className=\"w-5 h-5\" />\n                Ø§Ù„ØªÙ„Ù…ÙŠØ­:\n              </h3>\n              <p className=\"text-white text-base font-bold\">{hint.type === \"digit\" ? `ÙÙŠ Ø§Ù„Ø®Ø§Ù†Ø© ${(hint.position || 0) + 1}: Ø±Ù‚Ù… ${hint.value}` : String(hint.value)}</p>\n            </div>\n          ) : null\n        )}\n\n        <div className=\"bg-white rounded-xl p-6 shadow-md flex-shrink-0\">\n          <h3 className=\"text-lg font-bold text-gray-800 mb-4 text-center\">Ø£Ø¯Ø®Ù„ {numDigits} Ø£Ø±Ù‚Ø§Ù…</h3>\n          \n          <div className=\"flex gap-3 justify-center mb-6\" dir=\"ltr\">\n            {input.map((digit, idx) => (\n              <div\n                key={idx}\n                className={`w-16 h-20 border-2 rounded-xl flex items-center justify-center text-3xl font-bold transition-all ${\n                  focusedIndex === idx\n                    ? \"border-blue-500 bg-blue-50\"\n                    : \"border-gray-300 bg-white\"\n                }`}\n              >\n                {digit}\n              </div>\n            ))}\n          </div>\n\n          <div className=\"grid grid-cols-3 gap-3 mb-4\" dir=\"ltr\">\n            {[1, 2, 3].map((num) => (\n              <button\n                key={num}\n                onClick={() => handleNumberInput(num.toString())}\n                className=\"h-16 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-2xl font-bold rounded-xl shadow-md active:scale-95 transition-all\"\n              >\n                {num}\n              </button>\n            ))}\n          </div>\n\n          <div className=\"grid grid-cols-3 gap-3 mb-4\" dir=\"ltr\">\n            {[4, 5, 6].map((num) => (\n              <button\n                key={num}\n                onClick={() => handleNumberInput(num.toString())}\n                className=\"h-16 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-2xl font-bold rounded-xl shadow-md active:scale-95 transition-all\"\n              >\n                {num}\n              </button>\n            ))}\n          </div>\n\n          <div className=\"grid grid-cols-3 gap-3 mb-4\" dir=\"ltr\">\n            {[7, 8, 9].map((num) => (\n              <button\n                key={num}\n                onClick={() => handleNumberInput(num.toString())}\n                className=\"h-16 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-2xl font-bold rounded-xl shadow-md active:scale-95 transition-all\"\n              >\n                {num}\n              </button>\n            ))}\n          </div>\n\n          <div className=\"grid grid-cols-3 gap-3\" dir=\"ltr\">\n            <button\n              onClick={handleBackspace}\n              className=\"h-16 bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl shadow-md active:scale-95 transition-all flex items-center justify-center col-span-1\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n            <button\n              onClick={() => handleNumberInput(\"0\")}\n              className=\"h-16 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-2xl font-bold rounded-xl shadow-md active:scale-95 transition-all col-span-1\"\n            >\n              0\n            </button>\n            <button\n              onClick={handleSubmit}\n              disabled={input.some(val => val === \"\")}\n              className=\"h-16 bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-md active:scale-95 transition-all flex items-center justify-center col-span-1\"\n            >\n              <Check className=\"w-6 h-6\" />\n            </button>\n          </div>\n        </div>\n\n        {singleplayer.attempts.length > 0 && !expandedAttempts && (\n          <div className=\"bg-white rounded-xl p-4 shadow-md flex-shrink-0\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-lg font-bold text-gray-800\">Ù…Ø­Ø§ÙˆÙ„Ø§Øª ({singleplayer.attempts.length} / {singleplayer.settings.maxAttempts})</h3>\n              <button\n                onClick={() => setExpandedAttempts(true)}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                <Maximize2 className=\"w-5 h-5 text-gray-600\" />\n              </button>\n            </div>\n            <div>\n              {singleplayer.attempts.length > 0 && (\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg flex-row-reverse\">\n                  <span className=\"font-mono text-lg font-bold text-gray-800\">\n                    {[...singleplayer.attempts].reverse()[0].guess.join(\"\")}\n                  </span>\n                  <div className=\"flex gap-2 text-sm\">\n                    <span className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-lg font-semibold\">\n                      {[...singleplayer.attempts].reverse()[0].correctCount} ØµØ­\n                    </span>\n                    <span className=\"bg-green-100 text-green-800 px-3 py-1 rounded-lg font-semibold\">\n                      {[...singleplayer.attempts].reverse()[0].correctPositionCount === 0 && '0 Ù…ÙƒØ§Ù†Ùˆ ØµØ­'}\n                      {[...singleplayer.attempts].reverse()[0].correctPositionCount === 1 && '1 Ù…ÙƒØ§Ù†Ùˆ ØµØ­'}\n                      {[...singleplayer.attempts].reverse()[0].correctPositionCount > 1 && `${[...singleplayer.attempts].reverse()[0].correctPositionCount} Ù…ÙƒØ§Ù†Ù‡Ù… ØµØ­`}\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {expandedAttempts && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-end z-50 p-4\">\n            <div className=\"w-full bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]\">\n              <div className=\"flex items-center justify-between p-4 border-b flex-shrink-0\">\n                <h3 className=\"text-2xl font-bold text-gray-800\">Ù…Ø­Ø§ÙˆÙ„Ø§Øª ({singleplayer.attempts.length} / {singleplayer.settings.maxAttempts})</h3>\n                <button\n                  onClick={() => setExpandedAttempts(false)}\n                  className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                >\n                  <Minimize2 className=\"w-6 h-6 text-gray-600\" />\n                </button>\n              </div>\n              <div className=\"overflow-y-scroll flex-1 p-4\">\n                <div className=\"space-y-3\">\n                  {[...singleplayer.attempts].reverse().map((attempt, idx) => (\n                    <div\n                      key={idx}\n                      className=\"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-xl border border-gray-200 flex-row-reverse\"\n                    >\n                      <span className=\"font-mono text-2xl font-bold text-gray-800\">\n                        {attempt.guess.join(\"\")}\n                      </span>\n                      <div className=\"flex gap-3\">\n                        <div className=\"flex flex-col items-center\">\n                          <span className=\"text-2xl font-bold text-blue-600\">{attempt.correctCount}</span>\n                          <span className=\"text-xs text-blue-600\">ØµØ­</span>\n                        </div>\n                        <div className=\"flex flex-col items-center\">\n                          <span className=\"text-2xl font-bold text-green-600\">{attempt.correctPositionCount}</span>\n                          <span className=\"text-xs text-green-600\">Ù…ÙƒØ§Ù†Ù‡Ù…</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              <button\n                onClick={() => setExpandedAttempts(false)}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 m-4 rounded-xl transition-colors flex-shrink-0\"\n              >\n                Ø¥ØºÙ„Ø§Ù‚\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":18174},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1198},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","size_bytes":2751},"client/src/components/mobile/MobileChallenge.tsx":{"content":"import { useEffect, useRef, useState } from \"react\";\nimport { useChallenge } from \"@/lib/stores/useChallenge\";\nimport { Home } from \"lucide-react\";\n\nconst BUTTON_COLORS = [\n  { name: \"Ø£Ø­Ù…Ø±\", color: \"#ef4444\", sound: 261.63 },\n  { name: \"Ø£Ø²Ø±Ù‚\", color: \"#3b82f6\", sound: 293.66 },\n  { name: \"Ø£Ø®Ø¶Ø±\", color: \"#22c55e\", sound: 329.63 },\n  { name: \"Ø£ØµÙØ±\", color: \"#eab308\", sound: 349.23 },\n  { name: \"Ø¨Ù†ÙØ³Ø¬ÙŠ\", color: \"#a855f7\", sound: 392.00 },\n  { name: \"Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ\", color: \"#f97316\", sound: 440.00 },\n  { name: \"ÙˆØ±Ø¯ÙŠ\", color: \"#ec4899\", sound: 493.88 },\n  { name: \"Ø³Ù…Ø§ÙˆÙŠ\", color: \"#06b6d4\", sound: 523.25 },\n];\n\nexport function MobileChallenge({ onExit }: { onExit: () => void }) {\n  const {\n    sequence,\n    playerSequence,\n    currentLevel,\n    phase,\n    isShowingSequence,\n    canInput,\n    addToPlayerSequence,\n    setIsShowingSequence,\n    setCanInput,\n  } = useChallenge();\n\n  const [activeButton, setActiveButton] = useState<number | null>(null);\n  const audioContextRef = useRef<AudioContext | null>(null);\n\n  useEffect(() => {\n    audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\n    \n    return () => {\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n      }\n    };\n  }, []);\n\n  const playSound = (frequency: number, duration: number = 0.3) => {\n    if (!audioContextRef.current) return;\n\n    const oscillator = audioContextRef.current.createOscillator();\n    const gainNode = audioContextRef.current.createGain();\n\n    oscillator.connect(gainNode);\n    gainNode.connect(audioContextRef.current.destination);\n\n    oscillator.frequency.value = frequency;\n    oscillator.type = 'sine';\n\n    gainNode.gain.setValueAtTime(0.3, audioContextRef.current.currentTime);\n    gainNode.gain.exponentialRampToValueAtTime(\n      0.01,\n      audioContextRef.current.currentTime + duration\n    );\n\n    oscillator.start(audioContextRef.current.currentTime);\n    oscillator.stop(audioContextRef.current.currentTime + duration);\n  };\n\n  useEffect(() => {\n    if (isShowingSequence && sequence.length > 0) {\n      let index = 0;\n      const delay = Math.max(600 - currentLevel * 50, 300);\n\n      const showNext = () => {\n        if (index < sequence.length) {\n          const buttonIndex = sequence[index];\n          setActiveButton(buttonIndex);\n          playSound(BUTTON_COLORS[buttonIndex].sound);\n\n          setTimeout(() => {\n            setActiveButton(null);\n            index++;\n            setTimeout(showNext, delay);\n          }, 500);\n        } else {\n          setIsShowingSequence(false);\n          setCanInput(true);\n        }\n      };\n\n      setTimeout(showNext, 1000);\n    }\n  }, [isShowingSequence, sequence, currentLevel]);\n\n\n  const handleButtonClick = (index: number) => {\n    if (!canInput || isShowingSequence) return;\n    \n    setActiveButton(index);\n    playSound(BUTTON_COLORS[index].sound);\n    addToPlayerSequence(index);\n\n    setTimeout(() => {\n      setActiveButton(null);\n    }, 300);\n  };\n\n  if (phase === \"won\") {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-6 bg-slate-950\">\n        <div className=\"w-full max-w-md bg-slate-900/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-green-500/30 p-8 text-center space-y-6\">\n          <div className=\"text-8xl animate-bounce\">ğŸ‰</div>\n          <h2 className=\"text-4xl font-bold text-green-400\">Ù…Ø¨Ø±ÙˆÙƒ! ÙØ²Øª</h2>\n          <p className=\"text-gray-300 text-lg\">\n            Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø®Ù…Ø³Ø© Ø¨Ù†Ø¬Ø§Ø­!\n          </p>\n          <p className=\"text-green-300 font-semibold\">\n            Ø³ÙŠØ¸Ù‡Ø± Ù„Ùƒ Ø§Ù„ØªÙ„Ù…ÙŠØ­ Ø§Ù„Ø¢Ù†\n          </p>\n          <button\n            onClick={onExit}\n            className=\"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg shadow-green-500/50\"\n          >\n            Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¹Ø¨Ø©\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (phase === \"lost\") {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-6 bg-slate-950\">\n        <div className=\"w-full max-w-md bg-slate-900/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-red-500/30 p-8 text-center space-y-6\">\n          <div className=\"text-8xl\">ğŸ˜”</div>\n          <h2 className=\"text-4xl font-bold text-red-400\">Ø®Ø³Ø±Øª!</h2>\n          <p className=\"text-gray-300 text-lg\">\n            Ù„Ù… ØªØ³ØªØ·Ø¹ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø©\n          </p>\n          <button\n            onClick={onExit}\n            className=\"w-full bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-700 hover:to-rose-700 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg shadow-red-500/50\"\n          >\n            Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-950 p-4 overflow-hidden relative\">\n      {/* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */}\n      <div className=\"fixed inset-0 bg-gradient-to-br from-purple-950/30 via-slate-950 to-blue-950/30 pointer-events-none\" />\n      <div className=\"fixed inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(139,92,246,0.1),transparent_50%)] pointer-events-none\" />\n      \n      <div className=\"relative z-10\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6 pt-4\">\n          <button\n            onClick={onExit}\n            className=\"flex items-center gap-2 bg-slate-900/80 backdrop-blur-sm hover:bg-slate-800 border border-red-500/30 text-white font-bold py-3 px-4 rounded-xl transition-all shadow-lg\"\n          >\n            <Home className=\"w-5 h-5\" />\n            <span>Ø®Ø±ÙˆØ¬</span>\n          </button>\n          <div className=\"bg-slate-900/80 backdrop-blur-xl rounded-xl px-6 py-3 border border-purple-500/30 shadow-lg shadow-purple-500/20\">\n            <p className=\"text-white font-bold text-lg\">\n              Ø§Ù„Ù…Ø³ØªÙˆÙ‰: {currentLevel + 1} / 5\n            </p>\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"mb-6 max-w-lg mx-auto\">\n          <div className=\"flex gap-2 justify-center\">\n            {[...Array(5)].map((_, i) => (\n              <div\n                key={i}\n                className={`h-2 flex-1 rounded-full transition-all duration-500 ${\n                  i < currentLevel + 1\n                    ? 'bg-gradient-to-r from-purple-500 to-pink-500 shadow-lg shadow-purple-500/50'\n                    : 'bg-slate-800/50 border border-slate-700'\n                }`}\n              />\n            ))}\n          </div>\n        </div>\n\n        {/* Status Message */}\n        <div className=\"mb-8 text-center\">\n          {isShowingSequence && (\n            <div className=\"bg-gradient-to-r from-yellow-900/80 to-amber-900/80 backdrop-blur-xl border border-yellow-500/50 rounded-2xl p-5 shadow-2xl shadow-yellow-500/20 max-w-md mx-auto\">\n              <p className=\"text-yellow-200 font-bold text-2xl\">â³ Ø±Ø§Ù‚Ø¨ Ø§Ù„ØªØ³Ù„Ø³Ù„...</p>\n            </div>\n          )}\n          {canInput && (\n            <div className=\"bg-gradient-to-r from-green-900/80 to-emerald-900/80 backdrop-blur-xl border border-green-500/50 rounded-2xl p-5 shadow-2xl shadow-green-500/20 max-w-md mx-auto\">\n              <p className=\"text-green-200 font-bold text-2xl\">\n                âœ¨ Ø¯ÙˆØ±Ùƒ! ({playerSequence.length} / {sequence.length})\n              </p>\n            </div>\n          )}\n          {!isShowingSequence && !canInput && playerSequence.length === 0 && (\n            <div className=\"bg-gradient-to-r from-blue-900/80 to-indigo-900/80 backdrop-blur-xl border border-blue-500/50 rounded-2xl p-5 shadow-2xl shadow-blue-500/20 max-w-md mx-auto\">\n              <p className=\"text-blue-200 font-bold text-2xl\">ğŸ¯ Ø§Ø³ØªØ¹Ø¯...</p>\n            </div>\n          )}\n        </div>\n\n        {/* Color Buttons - Ø´Ø¨ÙƒØ© 4x2 */}\n        <div className=\"grid grid-cols-4 gap-3 max-w-2xl mx-auto mb-6\">\n          {BUTTON_COLORS.map((btn, index) => (\n            <button\n              key={index}\n              onClick={() => handleButtonClick(index)}\n              disabled={!canInput || isShowingSequence}\n              className=\"aspect-square rounded-2xl shadow-2xl transform transition-all duration-200 active:scale-90 disabled:opacity-40 relative overflow-hidden border-2\"\n              style={{\n                backgroundColor: btn.color,\n                borderColor: activeButton === index ? '#ffffff' : `${btn.color}80`,\n                boxShadow: activeButton === index \n                  ? `0 0 40px 15px ${btn.color}, 0 0 80px 20px ${btn.color}80` \n                  : `0 8px 25px ${btn.color}40, inset 0 2px 10px ${btn.color}80`,\n                transform: activeButton === index ? 'scale(1.15)' : 'scale(1)',\n              }}\n            >\n              {/* ØªÙˆÙ‡Ø¬ Ø¯Ø§Ø®Ù„ÙŠ */}\n              <div \n                className=\"absolute inset-0 bg-gradient-to-br from-white/30 to-transparent opacity-50\"\n                style={{\n                  opacity: activeButton === index ? 0.8 : 0.3,\n                }}\n              />\n              \n              {/* Ø­Ù„Ù‚Ø© Ù†ÙŠÙˆÙ† */}\n              {activeButton === index && (\n                <div \n                  className=\"absolute inset-0 rounded-2xl animate-ping\"\n                  style={{\n                    border: `3px solid ${btn.color}`,\n                    boxShadow: `0 0 20px ${btn.color}`,\n                  }}\n                />\n              )}\n            </button>\n          ))}\n        </div>\n\n        {/* Info Panel */}\n        <div className=\"mt-8 max-w-lg mx-auto\">\n          <div className=\"bg-slate-900/60 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-5 shadow-2xl\">\n            <p className=\"text-slate-300 text-sm text-center leading-relaxed\">\n              ğŸ® Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ù†ÙØ³ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø°ÙŠ Ø¸Ù‡Ø±Øª Ø¨Ù‡\n              <br />\n              ğŸ’« ÙƒÙ„ Ù…Ø³ØªÙˆÙ‰ ÙŠØ²ÙŠØ¯ Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„ØµØ¹ÙˆØ¨Ø©!\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":10192},"README.md":{"content":"# Overview\r\n\r\nThis is a 3D guessing game application built with React and Three.js. Players attempt to guess a secret numerical code through multiple attempts, receiving feedback on correctness and position accuracy. The game supports both single-player and multiplayer modes with real-time WebSocket communication.\r\n\r\nThe application features:\r\n- **Single-player mode**: Play against the computer with customizable difficulty\r\n- **Multiplayer mode**: Real-time competitive gameplay via WebSocket connections\r\n- **3D environment**: Immersive first-person perspective built with React Three Fiber\r\n- **Challenge mini-game**: Pattern-matching memory game with audio-visual elements\r\n- **Mobile responsive**: Separate mobile UI for touch-based interactions\r\n- **Arabic language support**: UI text in Arabic (right-to-left layout)\r\n\r\n# User Preferences\r\n\r\nPreferred communication style: Simple, everyday language.\r\n\r\n# System Architecture\r\n\r\n## Frontend Architecture\r\n\r\n**Technology Stack:**\r\n- React 18 with TypeScript for UI components\r\n- React Three Fiber (@react-three/fiber) and Drei for 3D rendering\r\n- Vite as build tool and development server\r\n- TailwindCSS with custom theme for styling\r\n- Radix UI components for accessible UI primitives\r\n- Zustand for client-side state management\r\n\r\n**Rendering Strategy:**\r\n- Desktop: Full 3D first-person environment with pointer lock controls\r\n- Mobile: 2D touch-optimized interface with custom number pad\r\n- Responsive detection via `useIsMobile` hook (768px breakpoint)\r\n\r\n**3D Scene Components:**\r\n- FirstPersonControls: Custom FPS camera with pointer lock and keyboard movement\r\n- NumberPanel: Interactive 3D buttons for number input in game scene\r\n- DisplayPanel: Shows current guess in 3D space\r\n- AttemptsHistory: Scrollable 3D panel displaying guess history\r\n- ChallengeDoor: Portal to mini-game challenge room\r\n- ChallengeRoom: Separate 3D environment for pattern-matching game\r\n\r\n**State Management:**\r\n- `useNumberGame`: Main game state (Zustand store)\r\n  - Manages single-player and multiplayer game states separately\r\n  - Tracks attempts, secret codes, settings, and game phases\r\n  - Handles game mode transitions\r\n- `useChallenge`: Challenge mini-game state\r\n  - Pattern sequence generation and validation\r\n  - Hint system for main game integration\r\n- `useAudio`: Audio feedback management\r\n  - Sound effects for button presses and game events\r\n\r\n**Client-Server Communication:**\r\n- WebSocket connection for real-time multiplayer\r\n- Session persistence via sessionStorage for reconnection\r\n- Message types: challenge_player, set_secret_code, make_guess, turn_timeout, request_rematch\r\n\r\n## Backend Architecture\r\n\r\n**Technology Stack:**\r\n- Express.js server with TypeScript\r\n- WebSocket (ws library) for real-time communication\r\n- Neon serverless PostgreSQL with Drizzle ORM\r\n- Session-based architecture with in-memory storage fallback\r\n\r\n**Server Structure:**\r\n- `server/index.ts`: Express app setup, middleware, error handling\r\n- `server/routes.ts`: WebSocket server and game logic\r\n- `server/db.ts`: Database connection with Neon serverless\r\n- `server/storage.ts`: Storage interface with MemStorage implementation\r\n- `server/vite.ts`: Vite integration for development HMR\r\n\r\n**Game Logic:**\r\n- Room-based multiplayer system with unique room IDs\r\n- Turn-based gameplay with 60-second turn timer\r\n- Secret code validation with correctness/position feedback\r\n- Player matching and challenge system\r\n- Automatic timeout handling and game state synchronization\r\n\r\n**WebSocket Message Flow:**\r\n1. Player creates/joins room â†’ Server assigns room and player ID\r\n2. Challenge initiation â†’ Server notifies opponent\r\n3. Secret code exchange â†’ Both players set codes before game starts\r\n4. Turn-based guessing â†’ Server validates and broadcasts results\r\n5. Game completion â†’ Winner determination and rematch handling\r\n\r\n## Data Storage\r\n\r\n**Database Schema (Drizzle ORM):**\r\n- Users table: `id`, `username`, `password` (authentication ready but not fully implemented)\r\n- PostgreSQL dialect via Neon serverless connection\r\n- Schema location: `shared/schema.ts` for type sharing between client/server\r\n\r\n**Storage Pattern:**\r\n- `IStorage` interface defines CRUD operations\r\n- `MemStorage` class provides in-memory fallback\r\n- Database operations ready for future authentication implementation\r\n\r\n**Session Management:**\r\n- WebSocket connections tracked per player\r\n- Room state maintained in server memory (Map structures)\r\n- Client-side session persistence for reconnection after refresh\r\n- 30-minute session timeout for inactive games\r\n\r\n## External Dependencies\r\n\r\n**3D Graphics & Rendering:**\r\n- `@react-three/fiber`: React renderer for Three.js\r\n- `@react-three/drei`: Helper components for Three.js (Text, RoundedBox, KeyboardControls)\r\n- `@react-three/postprocessing`: Post-processing effects\r\n- `vite-plugin-glsl`: GLSL shader support\r\n- `three`: Core 3D library (peer dependency)\r\n\r\n**UI Component Library:**\r\n- `@radix-ui/*`: Comprehensive set of unstyled, accessible primitives\r\n  - Dialogs, dropdowns, tooltips, accordions, and 20+ other components\r\n  - Provides accessibility and keyboard navigation out of the box\r\n\r\n**Database & Backend:**\r\n- `@neondatabase/serverless`: PostgreSQL client optimized for serverless/edge\r\n- `drizzle-orm`: TypeScript ORM with type-safe queries\r\n- `drizzle-kit`: Schema migrations and push commands\r\n- `ws`: WebSocket server implementation\r\n- `connect-pg-simple`: PostgreSQL session store (configured but not actively used)\r\n\r\n**Styling:**\r\n- `tailwindcss`: Utility-first CSS framework\r\n- `class-variance-authority`: Component variant management\r\n- `clsx` / `tailwind-merge`: Conditional class utilities\r\n\r\n**State & Data Fetching:**\r\n- `@tanstack/react-query`: Server state management and caching\r\n- `zustand`: Lightweight client state management\r\n\r\n**Fonts & Assets:**\r\n- `@fontsource/inter`: Self-hosted Inter font family\r\n- Custom font JSON for 3D text rendering (troika-three-text format)\r\n\r\n**Development Tools:**\r\n- `@replit/vite-plugin-runtime-error-modal`: Error overlay for Replit environment\r\n- `tsx`: TypeScript execution for development\r\n- `esbuild`: Fast bundler for production builds\r\n- `vite`: Frontend build tool with HMR\r\n\r\n**Build Configuration:**\r\n- Development: `tsx server/index.ts` (direct TypeScript execution)\r\n- Production: Vite build + esbuild bundle â†’ Node.js execution\r\n- Database: `drizzle-kit push` for schema synchronization","size_bytes":6459},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1037},"client/src/components/game/AttemptsHistory.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Text, RoundedBox } from \"@react-three/drei\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\n\nexport function AttemptsHistory() {\n  const { mode, singleplayer, multiplayer } = useNumberGame();\n  const [scrollOffset, setScrollOffset] = useState(0);\n  const scrollRef = useRef(0);\n\n  if (mode !== \"singleplayer\" && mode !== \"multiplayer\") {\n    return null;\n  }\n\n  const attempts = mode === \"singleplayer\" ? singleplayer.attempts : multiplayer.attempts;\n  const numDigits = mode === \"singleplayer\" ? singleplayer.settings.numDigits : multiplayer.settings.numDigits;\n  const maxAttempts = mode === \"singleplayer\" ? singleplayer.settings.maxAttempts : multiplayer.settings.maxAttempts;\n  const attemptCount = attempts.length;\n  const itemHeight = 0.65;\n  const panelWidth = 5.5;\n  const panelHeight = 4.5;\n  const maxVisibleItems = 5;\n  \n  const dragStartY = useRef(0);\n  const isDragging = useRef(false);\n\n  useEffect(() => {\n    const handleWheel = (e: WheelEvent) => {\n      // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¨Ø³Ø±Ø¹Ø© Ø£ÙƒØ¨Ø± Ø¹Ø´Ø§Ù† ÙŠÙƒÙˆÙ† Ø³Ù„Ø³ Ø²ÙŠ Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†\n      const maxScroll = Math.max(0, attemptCount - maxVisibleItems) * itemHeight;\n      scrollRef.current = Math.max(0, Math.min(maxScroll, scrollRef.current + e.deltaY * 0.008));\n      setScrollOffset(scrollRef.current);\n    };\n\n    const handleKeyboard = (e: KeyboardEvent) => {\n      if (e.key === 'PageDown' || (e.key === 'ArrowDown' && e.shiftKey)) {\n        e.preventDefault();\n        const maxScroll = Math.max(0, attemptCount - maxVisibleItems) * itemHeight;\n        scrollRef.current = Math.max(0, Math.min(maxScroll, scrollRef.current + itemHeight * 2));\n        setScrollOffset(scrollRef.current);\n      } else if (e.key === 'PageUp' || (e.key === 'ArrowUp' && e.shiftKey)) {\n        e.preventDefault();\n        const maxScroll = Math.max(0, attemptCount - maxVisibleItems) * itemHeight;\n        scrollRef.current = Math.max(0, Math.min(maxScroll, scrollRef.current - itemHeight * 2));\n        setScrollOffset(scrollRef.current);\n      }\n    };\n\n    const handleMouseDown = (e: MouseEvent) => {\n      // ÙƒÙ„ÙŠÙƒ ÙŠÙ…ÙŠÙ† Ù…Ø·ÙˆÙ„ Ù„Ù„Ø³Ø­Ø¨\n      if (e.button === 2) { // 2 = right mouse button\n        isDragging.current = true;\n        dragStartY.current = e.clientY;\n      }\n    };\n\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isDragging.current) return;\n      \n      const deltaY = e.clientY - dragStartY.current;\n      const maxScroll = Math.max(0, attemptCount - maxVisibleItems) * itemHeight;\n      // Ø¹ÙƒØ³ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ - Ù„Ù…Ø§ ØªØ³Ø­Ø¨ Ù„Ø£Ø³ÙÙ„ ÙŠØ±ÙØ¹ Ù„Ù„Ø£Ø¹Ù„Ù‰\n      scrollRef.current = Math.max(0, Math.min(maxScroll, scrollRef.current - deltaY * 0.008));\n      setScrollOffset(scrollRef.current);\n      dragStartY.current = e.clientY;\n    };\n\n    const handleMouseUp = () => {\n      isDragging.current = false;\n    };\n\n    const handleContextMenu = (e: MouseEvent) => {\n      // Ù…Ù†Ø¹ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„ÙƒÙ„ÙŠÙƒ Ø§Ù„ÙŠÙ…ÙŠÙ†\n      e.preventDefault();\n    };\n\n    window.addEventListener('wheel', handleWheel, { passive: true });\n    window.addEventListener('keydown', handleKeyboard);\n    window.addEventListener('mousedown', handleMouseDown);\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    window.addEventListener('contextmenu', handleContextMenu);\n    \n    return () => {\n      window.removeEventListener('wheel', handleWheel);\n      window.removeEventListener('keydown', handleKeyboard);\n      window.removeEventListener('mousedown', handleMouseDown);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n      window.removeEventListener('contextmenu', handleContextMenu);\n    };\n  }, [attemptCount, maxVisibleItems, itemHeight]);\n\n  const startIndex = Math.floor(scrollOffset / itemHeight);\n  const visibleAttempts = attempts.slice(startIndex, startIndex + maxVisibleItems);\n\n  const maxScroll = Math.max(0, (attemptCount - maxVisibleItems) * itemHeight);\n  const scrollProgress = maxScroll > 0 ? scrollOffset / maxScroll : 0;\n\n  return (\n    <group position={[5, 2.5, -12.8]}>\n      {/* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù„ÙˆØ­Ø© */}\n      <RoundedBox\n        args={[3.3, panelHeight, 0.25]}\n        radius={0.18}\n        smoothness={6}\n        castShadow\n      >\n        <meshStandardMaterial \n          color=\"#f8fafc\"\n          metalness={0.15}\n          roughness={0.6}\n          emissive=\"#cbd5e1\"\n          emissiveIntensity={0.1}\n        />\n      </RoundedBox>\n\n      {/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */}\n      {attemptCount > maxVisibleItems && (\n        <>\n          {/* Ø®Ù„ÙÙŠØ© Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */}\n          <RoundedBox\n            args={[0.18, panelHeight - 0.8, 0.08]}\n            radius={0.09}\n            smoothness={6}\n            position={[1.45, -0.15, 0.08]}\n          >\n            <meshStandardMaterial \n              color=\"#e2e8f0\"\n              metalness={0.1}\n              roughness={0.7}\n            />\n          </RoundedBox>\n\n          {/* Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙ…Ø±ÙŠØ± */}\n          <RoundedBox\n            args={[0.16, Math.max(0.3, (panelHeight - 0.8) * (maxVisibleItems / attemptCount)), 0.09]}\n            radius={0.08}\n            smoothness={6}\n            position={[1.45, (panelHeight / 2 - 1) - scrollProgress * (Math.max(0, panelHeight - 0.8 - ((panelHeight - 0.8) * (maxVisibleItems / attemptCount)))), 0.09]}\n          >\n            <meshStandardMaterial \n              color=\"#6366f1\"\n              metalness={0.2}\n              roughness={0.3}\n              emissive=\"#6366f1\"\n              emissiveIntensity={0.2}\n            />\n          </RoundedBox>\n        </>\n      )}\n\n      {/* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„ÙˆØ­Ø© */}\n      <Text\n        position={[0, panelHeight / 2 - 0.5, 0.15]}\n        fontSize={0.32}\n        color=\"#4338ca\"\n        anchorX=\"center\"\n        anchorY=\"middle\"\n        fontWeight=\"bold\"\n      >\n        Ù…Ø­Ø§ÙˆÙ„Ø§Øª ({attemptCount}/{maxAttempts})\n      </Text>\n\n      {/* Ø®Ø· ÙØ§ØµÙ„ */}\n      <RoundedBox\n        args={[3.2, 0.02, 0.02]}\n        radius={0.01}\n        smoothness={4}\n        position={[0, panelHeight / 2 - 0.85, 0.12]}\n      >\n        <meshStandardMaterial \n          color=\"#818cf8\"\n          emissive=\"#818cf8\"\n          emissiveIntensity={0.5}\n        />\n      </RoundedBox>\n\n      {/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª - Ù…Ø¹ clipping */}\n      <group position={[0, 0, 0]}>\n        {/* Ù‚Ù†Ø§Ø¹ clipping Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª */}\n        {visibleAttempts.map((attempt, visibleIndex) => {\n          const globalIndex = startIndex + visibleIndex;\n          const guessText = attempt.guess.join(\" \");\n          const yPosition = panelHeight / 2 - 1.5 - visibleIndex * itemHeight;\n          \n          const positionText = \n            attempt.correctPositionCount === 0 ? '0 Ù…ÙƒØ§Ù†Ùˆ ØµØ­' :\n            attempt.correctPositionCount === 1 ? '1 Ù…ÙƒØ§Ù†Ùˆ ØµØ­' :\n            `${attempt.correctPositionCount} Ù…ÙƒØ§Ù†Ù‡Ù… ØµØ­`;\n\n          return (\n            <group key={globalIndex} position={[0, yPosition, 0]}>\n              {/* Ø®Ù„ÙÙŠØ© ØµÙ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© */}\n              <RoundedBox\n                args={[3.05, itemHeight - 0.08, 0.08]}\n                radius={0.1}\n                smoothness={6}\n                position={[0, 0, 0.08]}\n              >\n                <meshStandardMaterial \n                  color={globalIndex % 2 === 0 ? \"#f0f4ff\" : \"#ffffff\"}\n                  transparent\n                  opacity={0.7}\n                  metalness={0.3}\n                  roughness={0.2}\n                />\n              </RoundedBox>\n\n              {/* Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ø§ÙˆÙ„ - Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */}\n              <Text\n                position={[1.35, 0, 0.15]}\n                fontSize={0.24}\n                color=\"#1e293b\"\n                anchorX=\"right\"\n                anchorY=\"middle\"\n                fontWeight=\"bold\"\n              >\n                {guessText}\n              </Text>\n\n              {/* Badge: Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØµØ­ÙŠØ­Ø© */}\n              <RoundedBox\n                args={[0.55, 0.28, 0.06]}\n                radius={0.08}\n                smoothness={6}\n                position={[-0.25, 0.08, 0.12]}\n              >\n                <meshStandardMaterial \n                  color=\"#dbeafe\"\n                  metalness={0.2}\n                  roughness={0.4}\n                />\n              </RoundedBox>\n              <Text\n                position={[-0.25, 0.08, 0.16]}\n                fontSize={0.14}\n                color=\"#1e40af\"\n                anchorX=\"center\"\n                anchorY=\"middle\"\n                fontWeight=\"bold\"\n              >\n                {attempt.correctCount} ØµØ­\n              </Text>\n\n              {/* Badge: Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ù…ÙƒØ§Ù†Ù‡Ø§ Ø§Ù„ØµØ­ÙŠØ­ */}\n              <RoundedBox\n                args={[0.85, 0.28, 0.06]}\n                radius={0.08}\n                smoothness={6}\n                position={[-0.95, 0.08, 0.12]}\n              >\n                <meshStandardMaterial \n                  color=\"#dcfce7\"\n                  metalness={0.2}\n                  roughness={0.4}\n                />\n              </RoundedBox>\n              <Text\n                position={[-0.95, 0.08, 0.16]}\n                fontSize={0.12}\n                color=\"#166534\"\n                anchorX=\"center\"\n                anchorY=\"middle\"\n                fontWeight=\"bold\"\n              >\n                {positionText}\n              </Text>\n            </group>\n          );\n        })}\n      </group>\n\n\n      {attemptCount === 0 && (\n        <Text\n          position={[0, 0, 0.15]}\n          fontSize={0.24}\n          color=\"#94a3b8\"\n          anchorX=\"center\"\n          anchorY=\"middle\"\n        >\n          Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¨Ø¹Ø¯\n        </Text>\n      )}\n    </group>\n  );\n}\n","size_bytes":9919},"client/src/components/mobile/MobileMenu.tsx":{"content":"import { useState } from \"react\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { Gamepad2, Users } from \"lucide-react\";\nimport { GameSettings } from \"../ui/GameSettings\";\n\nexport function MobileMenu() {\n  const { setMode, startSingleplayer } = useNumberGame();\n  const [showSettings, setShowSettings] = useState(false);\n\n  const handleSingleplayer = () => {\n    setShowSettings(true);\n  };\n\n  const handleSettingsConfirm = (settings: { numDigits: number; maxAttempts: number }) => {\n    startSingleplayer(settings);\n    setShowSettings(false);\n  };\n\n  if (showSettings) {\n    return <GameSettings onConfirm={handleSettingsConfirm} isMultiplayer={false} />;\n  }\n\n  const handleMultiplayer = () => {\n    setMode(\"multiplayer\");\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-6\">\n      <div className=\"w-full max-w-md space-y-8\">\n        <div className=\"text-center space-y-4\">\n          <div className=\"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl shadow-lg\">\n            <Gamepad2 className=\"w-10 h-10 text-white\" />\n          </div>\n          \n          <h1 className=\"text-4xl font-bold text-gray-800\">\n            Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ®Ù…ÙŠÙ†\n          </h1>\n          \n          <div className=\"space-y-2 text-gray-600\">\n            <p className=\"text-lg\">Ø®Ù…Ù† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 4 Ø£Ø±Ù‚Ø§Ù…</p>\n          </div>\n        </div>\n\n        <div className=\"space-y-4\">\n          <button\n            onClick={handleSingleplayer}\n            className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold py-4 px-6 rounded-xl shadow-lg transition-all duration-200 hover:shadow-xl hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-3\"\n          >\n            <Gamepad2 className=\"w-6 h-6\" />\n            <span className=\"text-lg\">Ù„Ø¹Ø¨ ÙØ±Ø¯ÙŠ</span>\n          </button>\n\n          <button\n            onClick={handleMultiplayer}\n            className=\"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-bold py-4 px-6 rounded-xl shadow-lg transition-all duration-200 hover:shadow-xl hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-3\"\n          >\n            <Users className=\"w-6 h-6\" />\n            <span className=\"text-lg\">Ù„Ø¹Ø¨ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</span>\n          </button>\n        </div>\n\n        <div className=\"bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-md space-y-3\">\n          <h3 className=\"font-bold text-gray-800 flex items-center gap-2\">\n            <span>ğŸ“–</span>\n            <span>ÙƒÙŠÙ ØªÙ„Ø¹Ø¨:</span>\n          </h3>\n          <ul className=\"space-y-2 text-sm text-gray-700 text-right\">\n            <li>1. <strong>Ø§Ø®ØªØ± Ø±Ù‚Ù…Ùƒ Ø§Ù„Ø³Ø±ÙŠ:</strong> 4 Ø£Ø±Ù‚Ø§Ù… ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„Ø®ØµÙ… ØªØ®Ù…ÙŠÙ†Ù‡Ø§</li>\n            <li>2. <strong>Ø®Ù…Ù† Ø§Ù„Ø±Ù‚Ù…:</strong> Ø£Ø¯Ø®Ù„ 4 Ø£Ø±Ù‚Ø§Ù… Ù…Ù† Ø§Ø®ØªÙŠØ§Ø±Ùƒ</li>\n            <li>3. <strong>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> Ø±Ù‚Ù… Ø£Ø²Ø±Ù‚ = ØµØ­ Ø¨Ø£ÙŠ Ù…ÙˆØ¶Ø¹ØŒ Ø±Ù‚Ù… Ø£Ø®Ø¶Ø± = ØµØ­ Ø¨Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„ØµØ­ÙŠØ­</li>\n            <li>4. Ù…Ù† ÙŠØ®Ù…Ù† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø£ÙˆÙ„Ø§Ù‹ ÙŠÙÙˆØ²!</li>\n            <li>5. ÙŠÙ…ÙƒÙ† ØªØ®ØµÙŠØµ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙÙŠ ÙƒÙ„ Ø¬ÙˆÙ„Ø©</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3468},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":2001},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey[0] as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1376},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":649},"client/src/components/ui/Crosshair.tsx":{"content":"export function Crosshair({ isHoveringButton = false }: { isHoveringButton?: boolean }) {\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center pointer-events-none z-50\">\n      <div className=\"relative\">\n        {/* Ù†Ù‚Ø·Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© */}\n        <div \n          className=\"w-2 h-2 rounded-full transition-all duration-200 shadow-lg\"\n          style={{\n            backgroundColor: isHoveringButton ? '#22c55e' : '#ffffff',\n            boxShadow: isHoveringButton \n              ? '0 0 8px 2px rgba(34, 197, 94, 0.8)' \n              : '0 0 4px 1px rgba(255, 255, 255, 0.5)',\n          }}\n        />\n        \n        {/* Ø­Ù„Ù‚Ø© Ø®Ø§Ø±Ø¬ÙŠØ© Ø±ÙÙŠØ¹Ø© Ø¹Ù†Ø¯ hover */}\n        {isHoveringButton && (\n          <div \n            className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 rounded-full border border-green-400 opacity-60\"\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":943},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/WaitingForOpponentScreen.tsx":{"content":"import { useNumberGame } from \"@/lib/stores/useNumberGame\";\n\nexport function WaitingForOpponentScreen() {\n  const { multiplayer } = useNumberGame();\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50\">\n      <div className=\"text-center space-y-8\">\n        <div className=\"flex justify-center\">\n          <div className=\"relative w-24 h-24\">\n            {/* Outer rotating circle */}\n            <div className=\"absolute inset-0 rounded-full border-4 border-transparent border-t-blue-500 border-r-purple-500 animate-spin\"></div>\n            \n            {/* Inner waiting circle */}\n            <div className=\"absolute inset-2 rounded-full border-4 border-blue-200 flex items-center justify-center\">\n              <span className=\"text-5xl animate-pulse\">â³</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-3\">\n          <h2 className=\"text-4xl font-bold text-gray-800\">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h2>\n          <p className=\"text-xl text-gray-600\">\n            ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± <span className=\"font-bold text-blue-600\">{multiplayer.opponentName}</span>\n          </p>\n          <p className=\"text-gray-500 text-sm\">\n            ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø®ØµÙ… Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù…Ù‡ Ø§Ù„Ø³Ø±ÙŠ...\n          </p>\n        </div>\n\n        <div className=\"flex justify-center gap-2 pt-4\">\n          <div className=\"w-3 h-3 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: \"0s\" }}></div>\n          <div className=\"w-3 h-3 bg-purple-500 rounded-full animate-bounce\" style={{ animationDelay: \"0.2s\" }}></div>\n          <div className=\"w-3 h-3 bg-pink-500 rounded-full animate-bounce\" style={{ animationDelay: \"0.4s\" }}></div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":1801},"client/src/App.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useNumberGame } from \"./lib/stores/useNumberGame\";\nimport { useAudio } from \"./lib/stores/useAudio\";\nimport { send, reconnectToSession, connectWebSocket, reconnectWithRetry } from \"./lib/websocket\";\nimport { useIsMobile } from \"./hooks/use-is-mobile\";\nimport { MobileApp } from \"./components/mobile/MobileApp\";\nimport { GameScene } from \"./components/game/GameScene\";\nimport { Menu } from \"./components/ui/Menu\";\nimport { WinScreen } from \"./components/ui/WinScreen\";\nimport { LoseScreen } from \"./components/ui/LoseScreen\";\nimport { MultiplayerLobby } from \"./components/ui/MultiplayerLobby\";\nimport { MultiplayerResults } from \"./components/ui/MultiplayerResults\";\nimport { GameHUD } from \"./components/ui/GameHUD\";\nimport { ChallengeRoom } from \"./components/game/ChallengeRoom\";\nimport { ChallengeResultScreen } from \"./components/ui/ChallengeResultScreen\";\nimport { useChallenge } from \"./lib/stores/useChallenge\";\nimport \"@fontsource/inter\";\n\nfunction App() {\n  const isMobile = useIsMobile();\n  const { mode, singleplayer, multiplayer, connectionError, setMode, isConnecting, setIsConnecting, setPlayerName, setRoomId, setPlayerId, setConnectionError, resetMultiplayer } = useNumberGame();\n  const { setSuccessSound } = useAudio();\n  const [showChallengeRoom, setShowChallengeRoom] = useState(false);\n  const { startChallenge, phase: challengePhase, resetChallenge, generateHint } = useChallenge();\n\n  useEffect(() => {\n    const successAudio = new Audio(\"/sounds/success.mp3\");\n    successAudio.load();\n    setSuccessSound(successAudio);\n  }, [setSuccessSound]);\n\n  useEffect(() => {\n    const session = reconnectToSession();\n    if (session && session.roomId && session.playerId && !multiplayer.roomId) {\n      // Only auto-reconnect if game is actively playing (not finished/results shown)\n      const isGameActive = session.gameState && session.gameState.gameStatus === \"playing\";\n      \n      if (isGameActive) {\n        console.log(\"Reconnecting to active session:\", session);\n        setPlayerName(session.playerName);\n        \n        // Restore game state if it was active\n        if (session.gameState) {\n          const store = useNumberGame.getState();\n          if (session.gameState.gameStatus) {\n            store.setGameStatus(session.gameState.gameStatus);\n          }\n          if (session.gameState.sharedSecret) {\n            store.setSharedSecret(session.gameState.sharedSecret);\n          }\n          if (session.gameState.settings) {\n            store.setMultiplayerSettings(session.gameState.settings);\n          }\n          if (session.gameState.attempts) {\n            useNumberGame.setState((state) => ({\n              multiplayer: {\n                ...state.multiplayer,\n                attempts: session.gameState.attempts,\n                startTime: session.gameState.startTime || 0,\n              },\n            }));\n          }\n        }\n        \n        setMode(\"multiplayer\");\n        setIsConnecting(true);\n        \n        // Attempt reconnection with retry\n        const ws = reconnectWithRetry(session.playerName, session.playerId, session.roomId);\n        \n        // Add timeout to prevent infinite loading (network issues only)\n        setTimeout(() => {\n          if (useNumberGame.getState().isConnecting) {\n            console.error(\"Connection timeout - redirecting to menu\");\n            setIsConnecting(false);\n            setMode(\"menu\");\n          }\n        }, 3000);\n      } else {\n        // Game is finished, clear the session\n        sessionStorage.removeItem(\"multiplayerSession\");\n      }\n    }\n  }, []);\n\n  if (isMobile) {\n    return <MobileApp />;\n  }\n\n  const isMultiplayerGameActive = multiplayer.gameStatus === \"playing\" && multiplayer.sharedSecret.length > 0;\n\n  return (\n    <div dir=\"rtl\" style={{ width: '100vw', height: '100vh', position: 'relative', overflow: 'hidden' }}>\n      {mode === \"menu\" && <Menu />}\n\n      {mode === \"singleplayer\" && (\n        <>\n          {singleplayer.secretCode.length > 0 && !showChallengeRoom && (\n            <>\n              <GameScene onEnterChallenge={() => {\n                setShowChallengeRoom(true);\n                startChallenge();\n              }} />\n              <GameHUD />\n              {singleplayer.phase === \"won\" && <WinScreen />}\n              {singleplayer.phase === \"lost\" && <LoseScreen />}\n            </>\n          )}\n          {showChallengeRoom && (\n            <>\n              <ChallengeRoom onExit={() => {\n                if (challengePhase === \"won\") {\n                  generateHint(singleplayer.secretCode);\n                }\n                setShowChallengeRoom(false);\n                resetChallenge();\n              }} />\n              {(challengePhase === \"won\" || challengePhase === \"lost\") && (\n                <ChallengeResultScreen\n                  won={challengePhase === \"won\"}\n                  onClose={() => {\n                    if (challengePhase === \"won\") {\n                      generateHint(singleplayer.secretCode);\n                    }\n                    setShowChallengeRoom(false);\n                    resetChallenge();\n                  }}\n                />\n              )}\n            </>\n          )}\n        </>\n      )}\n\n      {mode === \"multiplayer\" && (\n        <>\n          {/* Show connection error */}\n          {connectionError && (\n            <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-red-50 via-white to-red-50 z-50\">\n              <div className=\"text-center relative max-w-md mx-4\">\n                <div className=\"inline-flex items-center justify-center mb-4\">\n                  <div className=\"text-6xl\">âŒ</div>\n                </div>\n                <p className=\"text-gray-800 text-xl font-semibold mb-4\">{connectionError}</p>\n                <button\n                  onClick={() => {\n                    setConnectionError(null);\n                    resetMultiplayer();\n                    setMode(\"menu\");\n                  }}\n                  className=\"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg font-semibold transition-colors\"\n                >\n                  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Show loading screen while connecting */}\n          {isConnecting && !connectionError && (\n            <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50\">\n              <div className=\"text-center relative\">\n                <div className=\"inline-flex items-center justify-center mb-4\">\n                  <div className=\"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-500\"></div>\n                </div>\n                <p className=\"text-gray-800 text-xl font-semibold\">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</p>\n                <p className=\"text-gray-600 text-sm mt-2\">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>\n              </div>\n            </div>\n          )}\n\n          {/* Show lobby when not in game */}\n          {!isConnecting && multiplayer.roomId && multiplayer.gameStatus === \"waiting\" && !multiplayer.showResults && (\n            <MultiplayerLobby />\n          )}\n          \n          {/* Show game */}\n          {isMultiplayerGameActive && !multiplayer.showResults && (\n            <>\n              <GameScene />\n              <GameHUD />\n              <HomeButton />\n            </>\n          )}\n          \n          {/* Show results */}\n          {multiplayer.showResults && <MultiplayerResults />}\n\n          {/* Rematch countdown dialog */}\n          {multiplayer.rematchState.requested && multiplayer.rematchState.countdown !== null && (\n            <RematchDialog />\n          )}\n          \n          {!isConnecting && !multiplayer.roomId && <Menu />}\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction RematchDialog() {\n  const { multiplayer } = useNumberGame();\n  const myVote = multiplayer.rematchState.votes.find(v => v.playerId === multiplayer.playerId);\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4\">\n      <div className=\"w-full max-w-2xl bg-gradient-to-br from-blue-50 to-white rounded-3xl shadow-2xl border-2 border-blue-300 p-6 md:p-8 text-center space-y-6\">\n        {/* Header */}\n        <div>\n          <div className=\"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full mx-auto mb-4 shadow-lg\">\n            <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n            </svg>\n          </div>\n          <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 mb-2\">Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ</h2>\n          <p className=\"text-sm md:text-base text-gray-600\">Ù„Ø¯ÙŠÙƒ <span className=\"font-bold text-blue-600\">{multiplayer.rematchState.countdown}s</span> Ù„Ù„ØªØµÙˆÙŠØª</p>\n        </div>\n\n        {/* Voting Buttons - Only show if player hasn't voted */}\n        {!myVote && (\n          <div className=\"grid grid-cols-2 gap-3 md:gap-4\">\n            <button\n              onClick={() => send({ type: \"rematch_vote\", accepted: true })}\n              className=\"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-3 md:py-4 px-4 md:px-6 rounded-xl transition-all transform hover:scale-105 shadow-lg flex flex-col items-center gap-2\"\n            >\n              <span className=\"text-xl md:text-2xl\">âœ“</span>\n              <span className=\"text-xs md:text-sm\">Ù…ÙˆØ§ÙÙ‚</span>\n            </button>\n            <button\n              onClick={() => send({ type: \"rematch_vote\", accepted: false })}\n              className=\"bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold py-3 md:py-4 px-4 md:px-6 rounded-xl transition-all transform hover:scale-105 shadow-lg flex flex-col items-center gap-2\"\n            >\n              <span className=\"text-xl md:text-2xl\">âœ—</span>\n              <span className=\"text-xs md:text-sm\">Ø±Ø§ÙØ¶</span>\n            </button>\n          </div>\n        )}\n\n        {/* Player Voting Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4\">\n          {multiplayer.players.map(player => {\n            const vote = multiplayer.rematchState.votes.find(v => v.playerId === player.id);\n            const isCurrentPlayer = player.id === multiplayer.playerId;\n            \n            return (\n              <div\n                key={player.id}\n                className={`relative rounded-2xl p-4 md:p-5 border-2 transition-all transform ${\n                  vote?.accepted\n                    ? 'bg-gradient-to-br from-green-50 to-green-100 border-green-400 scale-100'\n                    : vote?.accepted === false\n                    ? 'bg-gradient-to-br from-red-50 to-red-100 border-red-400 scale-100'\n                    : 'bg-gradient-to-br from-gray-50 to-gray-100 border-gray-300 animate-pulse'\n                }`}\n              >\n                {/* Vote Status Icon */}\n                <div className=\"absolute top-2 right-2 md:top-3 md:right-3\">\n                  {vote?.accepted ? (\n                    <div className=\"w-8 h-8 md:w-10 md:h-10 bg-green-500 rounded-full flex items-center justify-center shadow-lg\">\n                      <span className=\"text-white font-bold text-lg md:text-xl\">âœ“</span>\n                    </div>\n                  ) : vote?.accepted === false ? (\n                    <div className=\"w-8 h-8 md:w-10 md:h-10 bg-red-500 rounded-full flex items-center justify-center shadow-lg\">\n                      <span className=\"text-white font-bold text-lg md:text-xl\">âœ—</span>\n                    </div>\n                  ) : (\n                    <div className=\"w-8 h-8 md:w-10 md:h-10 bg-gray-400 rounded-full flex items-center justify-center shadow-lg\">\n                      <span className=\"text-white font-bold text-lg md:text-xl\">â³</span>\n                    </div>\n                  )}\n                </div>\n\n                {/* Player Info */}\n                <div className=\"pr-10 md:pr-12\">\n                  <p className=\"font-bold text-gray-800 text-sm md:text-base flex items-center gap-2\">\n                    {player.name}\n                    {isCurrentPlayer && <span className=\"text-xs bg-blue-200 text-blue-700 px-2 py-0.5 rounded-lg\">(Ø£Ù†Øª)</span>}\n                  </p>\n                  <p className={`text-xs md:text-sm font-semibold mt-1 ${\n                    vote?.accepted ? 'text-green-700' : vote?.accepted === false ? 'text-red-700' : 'text-gray-500'\n                  }`}>\n                    {vote?.accepted ? 'Ù…ÙˆØ§ÙÙ‚ âœ“' : vote?.accepted === false ? 'Ø±Ø§ÙØ¶ âœ—' : 'ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...'}\n                  </p>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction HomeButton() {\n  const { setMode, resetMultiplayer } = useNumberGame();\n  const [showConfirm, setShowConfirm] = useState(false);\n\n  const handleQuit = () => {\n    import(\"@/lib/websocket\").then(({ send, clearSession, disconnect }) => {\n      send({ type: \"leave_room\" });\n      clearSession();\n      disconnect();\n    });\n    resetMultiplayer();\n    setMode(\"menu\");\n    setTimeout(() => {\n      window.location.reload();\n    }, 300);\n  };\n\n  if (showConfirm) {\n    return (\n      <div className=\"fixed top-4 right-4 z-50 bg-red-900 border-2 border-red-600 rounded-lg p-4 shadow-lg\">\n        <p className=\"text-white font-semibold mb-3\">Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ù†Ø³Ø­Ø§Ø¨ØŸ</p>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={handleQuit}\n            className=\"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm font-semibold\"\n          >\n            Ù†Ø¹Ù…\n          </button>\n          <button\n            onClick={() => setShowConfirm(false)}\n            className=\"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded text-sm font-semibold\"\n          >\n            Ù„Ø§\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <button\n      onClick={() => setShowConfirm(true)}\n      className=\"fixed top-4 right-4 z-40 w-12 h-12 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-full flex items-center justify-center shadow-lg text-xl transition-transform duration-200 hover:scale-110\"\n      title=\"Ø§Ù„Ø¨ÙŠØª\"\n    >\n      ğŸ \n    </button>\n  );\n}\n\nexport default App;\n","size_bytes":14799},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1012},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1410},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7480},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4280},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1217},"client/src/components/ui/GameSettings.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"./button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"./card\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { send } from \"@/lib/websocket\";\nimport { Sliders } from \"lucide-react\";\n\nexport function GameSettings({ onConfirm, isMultiplayer = false }: { onConfirm: (settings: { numDigits: number; maxAttempts: number }) => void; isMultiplayer?: boolean }) {\n  const { singleplayer, multiplayer, setSingleplayerSettings, setMultiplayerSettings } = useNumberGame();\n  const currentSettings = isMultiplayer ? multiplayer.settings : singleplayer.settings;\n  \n  const [numDigits, setNumDigits] = useState(currentSettings.numDigits);\n  const [maxAttempts, setMaxAttempts] = useState(currentSettings.maxAttempts);\n\n  const handleConfirm = () => {\n    const settings = { numDigits, maxAttempts };\n    if (isMultiplayer) {\n      setMultiplayerSettings(settings);\n      // Send settings to all players in the room\n      send({\n        type: \"update_settings\",\n        settings,\n      });\n    } else {\n      setSingleplayerSettings(settings);\n    }\n    onConfirm(settings);\n  };\n\n  const canSave = numDigits >= 3 && numDigits <= 10 && maxAttempts >= 5 && maxAttempts <= 50;\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50 p-4 overflow-y-auto\">\n      <Card className=\"w-full max-w-md bg-white shadow-xl border border-gray-200 rounded-2xl relative overflow-hidden my-auto\">\n        <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500\"></div>\n        \n        <CardHeader className=\"text-center pb-2 pt-6\">\n          <div className=\"mb-4 flex justify-center\">\n            <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg\">\n              <Sliders className=\"w-8 h-8 text-white\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-center text-gray-800 text-3xl font-bold mb-2\">\n            {isMultiplayer ? \"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø±Ø©\" : \"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©\"}\n          </CardTitle>\n          <p className=\"text-center text-gray-600 text-base\">\n            Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø© ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª\n          </p>\n        </CardHeader>\n        \n        <CardContent className=\"space-y-6 p-6 max-h-96 overflow-y-auto\">\n          <div>\n            <label className=\"block text-gray-700 font-semibold mb-3 text-sm\">\n              Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…Ø±Ø§Ø¯ ØªØ®Ù…ÙŠÙ†Ù‡Ø§: <span className=\"text-blue-600 text-lg\">{numDigits}</span>\n            </label>\n            <input\n              type=\"range\"\n              min=\"3\"\n              max=\"10\"\n              value={numDigits}\n              onChange={(e) => setNumDigits(Number(e.target.value))}\n              className=\"w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer accent-blue-600\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500 mt-2\">\n              <span>3</span>\n              <span>10</span>\n            </div>\n            <div className=\"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n              <p className=\"text-sm text-gray-700\">\n                ØµØ¹ÙˆØ¨Ø©: <span className=\"font-semibold\">\n                  {numDigits <= 4 ? \"Ø³Ù‡Ù„Ø© ğŸ˜Š\" : numDigits <= 6 ? \"Ù…ØªÙˆØ³Ø·Ø© ğŸ˜\" : \"ØµØ¹Ø¨Ø© ğŸ˜°\"}\n                </span>\n              </p>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-gray-700 font-semibold mb-3 text-sm\">\n              Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡Ø§: <span className=\"text-purple-600 text-lg\">{maxAttempts}</span>\n            </label>\n            <input\n              type=\"range\"\n              min=\"5\"\n              max=\"50\"\n              step=\"5\"\n              value={maxAttempts}\n              onChange={(e) => setMaxAttempts(Number(e.target.value))}\n              className=\"w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer accent-purple-600\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500 mt-2\">\n              <span>5</span>\n              <span>50</span>\n            </div>\n            <div className=\"mt-3 p-3 bg-purple-50 rounded-lg border border-purple-200\">\n              <p className=\"text-sm text-gray-700\">\n                Ø§Ù„ÙØ±Øµ: <span className=\"font-semibold\">\n                  {maxAttempts <= 15 ? \"Ù‚Ù„ÙŠÙ„Ø© âš¡\" : maxAttempts <= 25 ? \"Ù…ØªÙˆØ³Ø·Ø© ğŸ¯\" : \"Ø§Ù„ÙƒØ«ÙŠØ± âœ¨\"}\n                </span>\n              </p>\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200\">\n            <p className=\"text-sm text-gray-700 font-semibold mb-2\">Ù…Ù„Ø®Øµ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:</p>\n            <ul className=\"text-sm text-gray-600 space-y-1\">\n              <li>ğŸ¯ Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… Ø³Ø±ÙŠ Ù…Ù† <span className=\"font-bold\">{numDigits} Ø£Ø±Ù‚Ø§Ù…</span></li>\n              <li>ğŸ“ Ù„Ø¯ÙŠÙƒ <span className=\"font-bold\">{maxAttempts} Ù…Ø­Ø§ÙˆÙ„Ø§Øª</span> Ù„Ù„ØªØ®Ù…ÙŠÙ†</li>\n              <li>âœ“ ÙŠØ¬Ø¨ ØªØ®Ù…ÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ø£Ù…Ø§ÙƒÙ†Ù‡Ø§ Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù„ÙÙˆØ²</li>\n            </ul>\n          </div>\n\n          <Button\n            onClick={handleConfirm}\n            disabled={!canSave}\n            className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:from-gray-300 disabled:to-gray-400 disabled:opacity-50 text-white font-semibold text-base py-6 rounded-xl shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center gap-2\"\n          >\n            âœ“ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":5939},"replit.md":{"content":"# Overview\n\nThis is a 3D guessing game application built with React and Three.js. Players attempt to guess a secret numerical code through multiple attempts, receiving feedback on correctness and position accuracy. The game supports both single-player and multiplayer modes with real-time WebSocket communication.\n\nThe application features:\n- **Single-player mode**: Play against the computer with customizable difficulty\n- **Multiplayer mode**: Real-time competitive gameplay via WebSocket connections\n- **3D environment**: Immersive first-person perspective built with React Three Fiber\n- **Challenge mini-game**: Pattern-matching memory game with audio-visual elements\n- **Mobile responsive**: Separate mobile UI for touch-based interactions\n- **Arabic language support**: UI text in Arabic (right-to-left layout)\n- **Live timer**: Real-time elapsed time counter during gameplay (updates every 100ms)\n- **5-minute game timer**: Automatic game timeout ensures matches don't run indefinitely\n- **Reconnection system**: Players can reconnect within 5 minutes and resume their game with all data preserved\n\n# Recent Changes\n\n## November 24, 2025\n\n**UI Redesign & Features:**\n- **Rank numbers in results**: Winners now display #1, #2, #3 etc. with golden badges\n- **Auto-approval for rematch requester**: Player who requests rematch is instantly marked as approved (no voting prompt)\n- **New rematch voting UI**: Floating card displays:\n  - Question first: \"Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ\"\n  - Two voting buttons: âœ“ (green) and âœ— (red) - only shown to players who haven't voted\n  - Player cards below showing votes: green cards with checkmarks for approved, red cards with X for rejected\n  - Cards show \"ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...\" for players who haven't voted yet\n  - Responsive design for mobile and desktop (2 columns on desktop, 1 on mobile)\n- **Results screen redesign**: Fully responsive with md/mobile breakpoints\n  - Consistent spacing and typography across all device sizes\n  - Winner cards with rank numbers displayed prominently\n  - Better visual hierarchy and spacing\n  - Confetti animation preserved during victory\n- **Fixed max attempts detection**: Player is immediately marked as loser when reaching max attempts without winning\n  - Previously: Had to send another guess to trigger loss\n  - Now: Loss is triggered immediately on the last valid guess\n- **Fixed session reconnection timeout**: Reconnection now works only within 30 seconds instead of 30 minutes\n  - If you leave a game and return within 30 seconds â†’ automatically reconnect to the same room\n  - If you return after 30 seconds â†’ new session, starts fresh with menu\n- **Instant rematch start**: New game starts immediately when 2 players accept (no wait for 10-second countdown)\n  - Rematch requester is automatically marked as approved (no voting buttons shown)\n  - When second player votes, game launches instantly\n  - Other players are kicked immediately if they reject\n\n**Previous Session - Multiplayer Game Fixes:**\n- Immediate results display, real-time updates, 5-minute timer\n- Automatic room cleanup when empty\n- Session persistence fixes\n\n**Replit Environment Setup:**\n- Installed all npm dependencies (612 packages)\n- Created .gitignore file with Node.js, TypeScript, and Replit exclusions\n- Configured workflow \"Start application\" running `npm run dev` on port 5000\n- Verified frontend configuration:\n  - Vite dev server: 0.0.0.0:5000 with allowedHosts: true (Replit-compatible)\n  - Express backend: serves both API and static files on same port\n  - WebSocket endpoint: /game for real-time multiplayer\n- Configured deployment settings:\n  - Build: `npm run build` (Vite + esbuild bundle)\n  - Run: `node dist/index.js` (production server)\n  - Deployment target: autoscale (stateless web app)\n- Application verified working: Main menu displays correctly in Arabic\n\n## November 23, 2025\n\n**Reconnection System with 5-Minute Timeout:**\n- Players who disconnect can rejoin within 5 minutes with all game data preserved\n  - Attempts, current score, game state all restored\n  - If player doesn't reconnect within 5 minutes â†’ kicked from room\n- Server tracks disconnected players separately:\n  - Active players in `room.players`\n  - Disconnected players in `room.disconnectedPlayers` with timeout tracking\n  - Automatic cleanup of abandoned rooms after all timeouts expire\n- New WebSocket messages:\n  - Client sends: `reconnect` message with playerId, playerName, roomId\n  - Server sends: `room_rejoined`, `game_state`, `player_game_state`\n  - Broadcast: `player_disconnected`, `player_reconnected`, `player_timeout`\n- Client-side:\n  - Session stored in sessionStorage (30-minute expiry)\n  - `reconnectWithRetry()` function connects and sends reconnect message\n  - Game data restored from server response\n\n**Previous Session Changes:**\n- Added live timer with 100ms updates in mobile multiplayer interface\n- Fixed mousedown listener bug in NumberPanel.tsx preventing HMR errors\n- Implemented spectator mode for finished players\n- Results screen shows only for finished/watching players\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n# System Architecture\n\n## Frontend Architecture\n\n**Technology Stack:**\n- React 18 with TypeScript for UI components\n- React Three Fiber (@react-three/fiber) and Drei for 3D rendering\n- Vite as build tool and development server\n- TailwindCSS with custom theme for styling\n- Radix UI components for accessible UI primitives\n- Zustand for client-side state management\n\n**Rendering Strategy:**\n- Desktop: Full 3D first-person environment with pointer lock controls\n- Mobile: 2D touch-optimized interface with custom number pad\n- Responsive detection via `useIsMobile` hook (768px breakpoint)\n\n**3D Scene Components:**\n- FirstPersonControls: Custom FPS camera with pointer lock and keyboard movement\n- NumberPanel: Interactive 3D buttons for number input in game scene\n- DisplayPanel: Shows current guess in 3D space\n- AttemptsHistory: Scrollable 3D panel displaying guess history\n- ChallengeDoor: Portal to mini-game challenge room\n- ChallengeRoom: Separate 3D environment for pattern-matching game\n\n**State Management:**\n- `useNumberGame`: Main game state (Zustand store)\n  - Manages single-player and multiplayer game states separately\n  - Tracks attempts, secret codes, settings, and game phases\n  - Handles game mode transitions\n- `useChallenge`: Challenge mini-game state\n  - Pattern sequence generation and validation\n  - Hint system for main game integration\n- `useAudio`: Audio feedback management\n  - Sound effects for button presses and game events\n\n**Client-Server Communication:**\n- WebSocket connection for real-time multiplayer\n- Session persistence via sessionStorage for reconnection (30-min expiry)\n- Message types: create_room, join_room, reconnect, start_game, submit_guess, leave_room, etc.\n- Automatic data restoration on reconnect\n\n## Backend Architecture\n\n**Technology Stack:**\n- Express.js server with TypeScript\n- WebSocket (ws library) for real-time communication\n- Neon serverless PostgreSQL with Drizzle ORM\n- Session-based architecture with in-memory storage fallback\n\n**Server Structure:**\n- `server/index.ts`: Express app setup, middleware, error handling\n- `server/routes.ts`: WebSocket server and game logic\n- `server/db.ts`: Database connection with Neon serverless\n- `server/storage.ts`: Storage interface with MemStorage implementation\n- `server/vite.ts`: Vite integration for development HMR\n\n**Game Logic:**\n- Room-based multiplayer system with unique room IDs\n- Independent simultaneous guessing (no turns/timers)\n- Auto-generated shared secret code\n- Secret code validation with correctness/position feedback\n- Host controls for settings and game start\n- Automatic winner/loser determination\n- Spectator mode for finished players\n- **Reconnection system**:\n  - Disconnected players stored with 5-minute timeout\n  - Game data preserved in `room.game.players` Map\n  - Automatic cleanup and player timeout after 5 minutes\n  - Reconnected players restore full game state\n\n**WebSocket Message Flow:**\n1. Player creates/joins room â†’ Server assigns room and player ID\n2. Host starts game â†’ Server generates shared secret code\n3. All players guess simultaneously â†’ Server validates and broadcasts results\n4. **Player disconnects** â†’ Added to disconnectedPlayers (5-min timeout)\n5. **Player reconnects** â†’ Checks disconnectedPlayers, clears timeout, restores game state\n6. Players finish â†’ Spectator mode enabled\n7. Game completion â†’ Results display with rankings\n\n## Data Storage\n\n**Database Schema (Drizzle ORM):**\n- Users table: `id`, `username`, `password` (authentication ready but not fully implemented)\n- PostgreSQL dialect via Neon serverless connection\n- Schema location: `shared/schema.ts` for type sharing between client/server\n\n**Storage Pattern:**\n- `IStorage` interface defines CRUD operations\n- `MemStorage` class provides in-memory fallback\n- Database operations ready for future authentication implementation\n\n**Session Management:**\n- WebSocket connections tracked per player\n- Room state maintained in server memory (Map structures):\n  - `room.players`: Active connected players\n  - `room.disconnectedPlayers`: Disconnected players with timeout tracking\n- Client-side session persistence for reconnection after refresh\n- 30-minute session timeout for inactive games\n- 5-minute timeout for disconnected players in active games\n\n## External Dependencies\n\n**3D Graphics & Rendering:**\n- `@react-three/fiber`: React renderer for Three.js\n- `@react-three/drei`: Helper components for Three.js (Text, RoundedBox, KeyboardControls)\n- `@react-three/postprocessing`: Post-processing effects\n- `vite-plugin-glsl`: GLSL shader support\n- `three`: Core 3D library (peer dependency)\n\n**UI Component Library:**\n- `@radix-ui/*`: Comprehensive set of unstyled, accessible primitives\n  - Dialogs, dropdowns, tooltips, accordions, and 20+ other components\n  - Provides accessibility and keyboard navigation out of the box\n\n**Database & Backend:**\n- `@neondatabase/serverless`: PostgreSQL client optimized for serverless/edge\n- `drizzle-orm`: TypeScript ORM with type-safe queries\n- `drizzle-kit`: Schema migrations and push commands\n- `ws`: WebSocket server implementation\n- `connect-pg-simple`: PostgreSQL session store (configured but not actively used)\n\n**Styling:**\n- `tailwindcss`: Utility-first CSS framework\n- `class-variance-authority`: Component variant management\n- `clsx` / `tailwind-merge`: Conditional class utilities\n\n**State & Data Fetching:**\n- `@tanstack/react-query`: Server state management and caching\n- `zustand`: Lightweight client state management\n\n**Fonts & Assets:**\n- `@fontsource/inter`: Self-hosted Inter font family\n- Custom font JSON for 3D text rendering (troika-three-text format)\n\n**Development Tools:**\n- `@replit/vite-plugin-runtime-error-modal`: Error overlay for Replit environment\n- `tsx`: TypeScript execution for development\n- `esbuild`: Fast bundler for production builds\n- `vite`: Frontend build tool with HMR\n\n**Build Configuration:**\n- Development: `tsx server/index.ts` (direct TypeScript execution)\n- Production: Vite build + esbuild bundle â†’ Node.js execution\n- Database: `drizzle-kit push` for schema synchronization\n\n# Mobile vs Desktop Interfaces\n\n**Desktop (3D Mode):**\n- First-person 3D environment with interactive number buttons\n- Pointer lock for FPS-style mouse controls\n- Full spatial audio and 3D effects\n\n**Mobile (2D Mode - Auto-detected at 768px):**\n- Touch-optimized grid layout for number pad\n- Game interface matches desktop gameplay exactly\n- Lobby and results screens differ slightly for mobile constraints\n- Swipe-friendly buttons with large touch targets\n\n# Reconnection Behavior\n\n**When Player Disconnects:**\n1. Server marks player as disconnected (doesn't delete immediately)\n2. Remaining players notified with `player_disconnected` message\n3. Timeout starts (5 minutes)\n4. All game data preserved (attempts, state, start time)\n\n**When Player Reconnects Within 5 Minutes:**\n1. Client sends `reconnect` message with playerId, playerName, roomId\n2. Server validates session exists and hasn't timed out\n3. Clears the timeout, removes from disconnectedPlayers\n4. Restores player to active players list\n5. Sends player their complete game state (attempts, game status, etc.)\n6. Other players notified with `player_reconnected` message\n\n**When 5-Minute Timeout Expires:**\n1. Player is marked as finished in game\n2. All players notified with `player_timeout` message\n3. Game end checked (may trigger winner if last player)\n4. Player data removed from disconnectedPlayers\n5. Room deleted if empty\n\n# Known Limitations & Future Enhancements\n\n**Current Limitations:**\n- Authentication system designed but not fully implemented\n- Database integration optional (works without DATABASE_URL)\n- Single-player challenge mini-game available but not integrated into main flow\n\n**Future Enhancements:**\n- User accounts and persistent statistics\n- Leaderboards and ranking system\n- Custom room settings UI for non-host players\n- Audio/visual preferences\n- Game replay system\n- Auto-reconnect with exponential backoff\n","size_bytes":13178},"client/src/components/game/NumberPanel.tsx":{"content":"import { useRef, useState, useEffect, useCallback } from \"react\";\nimport { useFrame, ThreeEvent, useThree } from \"@react-three/fiber\";\nimport { Text, RoundedBox } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport { useNumberGame, GamePhase } from \"@/lib/stores/useNumberGame\";\nimport { useAudio } from \"@/lib/stores/useAudio\";\nimport { send } from \"@/lib/websocket\";\nimport { toast } from \"sonner\";\nimport { DisplayPanel } from \"./DisplayPanel\";\n\ninterface ButtonProps {\n  position: [number, number, number];\n  digit: number;\n  onClick: (digit: number) => void;\n}\n\ninterface NumberButtonProps extends ButtonProps {\n  isPointerLocked?: boolean;\n  ref?: React.Ref<THREE.Mesh>;\n}\n\nconst NumberButton = ({ position, digit, onClick, isPointerLocked }: NumberButtonProps) => {\n  const [hovered, setHovered] = useState(false);\n  const [isHoveredByCenter, setIsHoveredByCenter] = useState(false);\n  const [buttonZ, setButtonZ] = useState(0);\n  const meshRef = useRef<THREE.Mesh>(null);\n  const raycaster = useRef(new THREE.Raycaster());\n  const { camera } = useThree();\n\n  useFrame(() => {\n    if (isPointerLocked && meshRef.current) {\n      const normalizedCoords = new THREE.Vector2(0, 0);\n      raycaster.current.setFromCamera(normalizedCoords, camera);\n      const intersects = raycaster.current.intersectObject(meshRef.current);\n      \n      if (intersects.length > 0) {\n        setIsHoveredByCenter(true);\n        meshRef.current.scale.setScalar(1.08);\n        meshRef.current.position.z = 0.12;\n        setButtonZ(0.12);\n      } else {\n        setIsHoveredByCenter(false);\n        meshRef.current.scale.setScalar(1);\n        meshRef.current.position.z = 0;\n        setButtonZ(0);\n      }\n    } else if (meshRef.current && hovered && !isPointerLocked) {\n      meshRef.current.scale.setScalar(1.08);\n      meshRef.current.position.z = 0.12;\n      setButtonZ(0.12);\n    } else if (meshRef.current) {\n      meshRef.current.scale.setScalar(1);\n      meshRef.current.position.z = 0;\n      setButtonZ(0);\n    }\n  });\n\n  // Keyboard and mouse listener for center crosshair click\n  useEffect(() => {\n    if (!isPointerLocked || !isHoveredByCenter) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.code === \"Space\" || e.code === \"Enter\") {\n        e.preventDefault();\n        onClick(digit);\n      }\n    };\n\n    const handleMouseDown = (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      onClick(digit);\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown, { passive: false });\n    window.addEventListener(\"mousedown\", handleMouseDown, { passive: false });\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      window.removeEventListener(\"mousedown\", handleMouseDown);\n    };\n  }, [isPointerLocked, isHoveredByCenter, digit, onClick]);\n\n  return (\n    <group position={position}>\n      <RoundedBox\n        ref={meshRef}\n        args={[0.85, 0.85, 0.25]}\n        radius={0.15}\n        smoothness={6}\n        onClick={(e: ThreeEvent<MouseEvent>) => {\n          if (!isPointerLocked) {\n            e.stopPropagation();\n            onClick(digit);\n          }\n        }}\n        onPointerOver={(e: ThreeEvent<PointerEvent>) => {\n          if (!isPointerLocked) {\n            e.stopPropagation();\n            setHovered(true);\n          }\n        }}\n        onPointerOut={(e: ThreeEvent<PointerEvent>) => {\n          setHovered(false);\n        }}\n        castShadow\n      >\n        <meshStandardMaterial \n          color={hovered ? \"#7c3aed\" : \"#8b5cf6\"}\n          metalness={0.2}\n          roughness={0.4}\n          emissive={hovered ? \"#5b21b6\" : \"#000000\"}\n          emissiveIntensity={hovered ? 0.4 : 0}\n        />\n      </RoundedBox>\n      <Text\n        position={[0, 0, 0.16 + buttonZ]}\n        fontSize={0.48}\n        color=\"white\"\n        anchorX=\"center\"\n        anchorY=\"middle\"\n        fontWeight=\"bold\"\n      >\n        {digit}\n      </Text>\n    </group>\n  );\n};\n\ninterface DeleteButtonProps {\n  position: [number, number, number];\n  onClick: () => void;\n  isPointerLocked?: boolean;\n}\n\nconst DeleteButton = ({ position, onClick, isPointerLocked }: DeleteButtonProps) => {\n  const [hovered, setHovered] = useState(false);\n  const [isHoveredByCenter, setIsHoveredByCenter] = useState(false);\n  const [buttonZ, setButtonZ] = useState(0);\n  const meshRef = useRef<THREE.Mesh>(null);\n  const raycaster = useRef(new THREE.Raycaster());\n  const { camera } = useThree();\n\n  useFrame(() => {\n    if (isPointerLocked && meshRef.current) {\n      const normalizedCoords = new THREE.Vector2(0, 0);\n      raycaster.current.setFromCamera(normalizedCoords, camera);\n      const intersects = raycaster.current.intersectObject(meshRef.current);\n      \n      if (intersects.length > 0) {\n        setIsHoveredByCenter(true);\n        meshRef.current.scale.setScalar(1.08);\n        meshRef.current.position.z = 0.12;\n        setButtonZ(0.12);\n      } else {\n        setIsHoveredByCenter(false);\n        meshRef.current.scale.setScalar(1);\n        meshRef.current.position.z = 0;\n        setButtonZ(0);\n      }\n    } else if (meshRef.current && hovered && !isPointerLocked) {\n      meshRef.current.scale.setScalar(1.08);\n      meshRef.current.position.z = 0.12;\n      setButtonZ(0.12);\n    } else if (meshRef.current) {\n      meshRef.current.scale.setScalar(1);\n      meshRef.current.position.z = 0;\n      setButtonZ(0);\n    }\n  });\n\n  useEffect(() => {\n    if (!isPointerLocked || !isHoveredByCenter) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.code === \"Space\" || e.code === \"Enter\") {\n        e.preventDefault();\n        onClick();\n      }\n    };\n\n    const handleMouseDown = (e: MouseEvent) => {\n      e.preventDefault();\n      onClick();\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    window.addEventListener(\"mousedown\", handleMouseDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      window.removeEventListener(\"mousedown\", handleMouseDown);\n    };\n  }, [isPointerLocked, isHoveredByCenter, onClick]);\n\n  return (\n    <group position={position}>\n      <RoundedBox\n        ref={meshRef}\n        args={[0.85, 0.85, 0.25]}\n        radius={0.15}\n        smoothness={6}\n        onClick={(e: ThreeEvent<MouseEvent>) => {\n          if (!isPointerLocked) {\n            e.stopPropagation();\n            onClick();\n          }\n        }}\n        onPointerOver={(e: ThreeEvent<PointerEvent>) => {\n          if (!isPointerLocked) {\n            e.stopPropagation();\n            setHovered(true);\n          }\n        }}\n        onPointerOut={(e: ThreeEvent<PointerEvent>) => {\n          setHovered(false);\n        }}\n        castShadow\n      >\n        <meshStandardMaterial \n          color={hovered ? \"#dc2626\" : \"#ef4444\"}\n          metalness={0.2}\n          roughness={0.4}\n          emissive={hovered ? \"#991b1b\" : \"#000000\"}\n          emissiveIntensity={hovered ? 0.4 : 0}\n        />\n      </RoundedBox>\n      <Text\n        position={[0, 0, 0.16 + buttonZ]}\n        fontSize={0.42}\n        color=\"white\"\n        anchorX=\"center\"\n        anchorY=\"middle\"\n        fontWeight=\"bold\"\n      >\n        âœ•\n      </Text>\n    </group>\n  );\n};\n\ninterface ConfirmButtonProps {\n  position: [number, number, number];\n  onClick: () => void;\n  enabled: boolean;\n  isPointerLocked?: boolean;\n}\n\nconst ConfirmButton = ({ position, onClick, enabled, isPointerLocked }: ConfirmButtonProps) => {\n  const [hovered, setHovered] = useState(false);\n  const [isHoveredByCenter, setIsHoveredByCenter] = useState(false);\n  const [buttonZ, setButtonZ] = useState(0);\n  const meshRef = useRef<THREE.Mesh>(null);\n  const raycaster = useRef(new THREE.Raycaster());\n  const { camera } = useThree();\n\n  useFrame(() => {\n    if (isPointerLocked && meshRef.current && enabled) {\n      const normalizedCoords = new THREE.Vector2(0, 0);\n      raycaster.current.setFromCamera(normalizedCoords, camera);\n      const intersects = raycaster.current.intersectObject(meshRef.current);\n      \n      if (intersects.length > 0) {\n        setIsHoveredByCenter(true);\n        meshRef.current.scale.setScalar(1.08);\n        meshRef.current.position.z = 0.12;\n        setButtonZ(0.12);\n      } else {\n        setIsHoveredByCenter(false);\n        meshRef.current.scale.setScalar(1);\n        meshRef.current.position.z = 0;\n        setButtonZ(0);\n      }\n    } else if (meshRef.current && hovered && enabled && !isPointerLocked) {\n      meshRef.current.scale.setScalar(1.08);\n      meshRef.current.position.z = 0.12;\n      setButtonZ(0.12);\n    } else if (meshRef.current) {\n      meshRef.current.scale.setScalar(1);\n      meshRef.current.position.z = 0;\n      setButtonZ(0);\n    }\n  });\n\n  useEffect(() => {\n    if (!isPointerLocked || !isHoveredByCenter || !enabled) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.code === \"Space\" || e.code === \"Enter\") {\n        e.preventDefault();\n        onClick();\n      }\n    };\n\n    const handleMouseDown = (e: MouseEvent) => {\n      e.preventDefault();\n      onClick();\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    window.addEventListener(\"mousedown\", handleMouseDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      window.removeEventListener(\"mousedown\", handleMouseDown);\n    };\n  }, [isPointerLocked, isHoveredByCenter, enabled, onClick]);\n\n  return (\n    <group position={position}>\n      <RoundedBox\n        ref={meshRef}\n        args={[0.85, 0.85, 0.25]}\n        radius={0.15}\n        smoothness={6}\n        onClick={(e: ThreeEvent<MouseEvent>) => {\n          if (!isPointerLocked && enabled) {\n            e.stopPropagation();\n            onClick();\n          }\n        }}\n        onPointerOver={(e: ThreeEvent<PointerEvent>) => {\n          if (!isPointerLocked) {\n            e.stopPropagation();\n            if (enabled) {\n              setHovered(true);\n            }\n          }\n        }}\n        onPointerOut={(e: ThreeEvent<PointerEvent>) => {\n          setHovered(false);\n        }}\n        castShadow\n      >\n        <meshStandardMaterial \n          color={enabled ? (hovered ? \"#059669\" : \"#10b981\") : \"#9ca3af\"}\n          metalness={0.2}\n          roughness={0.4}\n          emissive={enabled && hovered ? \"#047857\" : \"#000000\"}\n          emissiveIntensity={enabled && hovered ? 0.4 : 0}\n        />\n      </RoundedBox>\n      <Text\n        position={[0, 0, 0.16 + buttonZ]}\n        fontSize={0.42}\n        color=\"white\"\n        anchorX=\"center\"\n        anchorY=\"middle\"\n        fontWeight=\"bold\"\n      >\n        âœ“\n      </Text>\n    </group>\n  );\n};\n\ninterface NumberPanelProps {\n  isPointerLocked?: boolean;\n}\n\nexport function NumberPanel({ isPointerLocked = false }: NumberPanelProps) {\n  const { mode, singleplayer, multiplayer, addDigitToGuess, deleteLastDigit, submitGuess, addMultiplayerDigit, deleteMultiplayerDigit, submitMultiplayerGuess } = useNumberGame();\n  const { playDigit, playDelete, playSuccess, playError, playConfirm } = useAudio();\n  \n  const numDigits = mode === \"singleplayer\" ? singleplayer.settings.numDigits : multiplayer.settings.numDigits;\n\n  // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ø¬Ø§Ø­ Ø¹Ù†Ø¯ Ø§Ù„ÙÙˆØ²\n  const [wonSoundPlayed, setWonSoundPlayed] = useState(false);\n  const prevPhaseRef = useRef<GamePhase | null>(null);\n  \n  useEffect(() => {\n    let currentPhase: GamePhase | null = null;\n    \n    if (mode === \"singleplayer\") {\n      currentPhase = singleplayer.phase;\n    } else if (mode === \"multiplayer\") {\n      currentPhase = multiplayer.phase;\n    }\n    \n    // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ \"won\" Ù…Ù† Ø­Ø§Ù„Ø© Ø£Ø®Ø±Ù‰\n    if (currentPhase === \"won\" && prevPhaseRef.current !== \"won\" && !wonSoundPlayed) {\n      playSuccess();\n      setWonSoundPlayed(true);\n    }\n    \n    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ù„Ù… Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©\n    if (currentPhase === \"playing\" && prevPhaseRef.current !== \"playing\") {\n      setWonSoundPlayed(false);\n    }\n    \n    prevPhaseRef.current = currentPhase;\n  }, [mode, singleplayer.phase, multiplayer.phase, playSuccess, wonSoundPlayed]);\n\n  const handleDigitClick = useCallback((digit: number) => {\n    if (mode === \"singleplayer\") {\n      if (singleplayer.phase === \"playing\") {\n        playDigit(digit);\n        addDigitToGuess(digit);\n      }\n    } else if (mode === \"multiplayer\") {\n      if (multiplayer.gameStatus !== \"playing\" || multiplayer.phase !== \"playing\") {\n        toast.warning(\"Ø§Ù„Ù„Ø¹Ø¨Ø© ØºÙŠØ± Ù†Ø´Ø·Ø©\", { duration: 3000 });\n        return;\n      }\n      playDigit(digit);\n      addMultiplayerDigit(digit);\n    }\n  }, [mode, playDigit, addDigitToGuess, addMultiplayerDigit, multiplayer.gameStatus, multiplayer.phase, singleplayer.phase]);\n\n  const handleDeleteClick = useCallback(() => {\n    if (mode === \"singleplayer\") {\n      if (singleplayer.phase === \"playing\") {\n        playDelete();\n        deleteLastDigit();\n      }\n    } else if (mode === \"multiplayer\") {\n      if (multiplayer.gameStatus !== \"playing\" || multiplayer.phase !== \"playing\") {\n        return;\n      }\n      playDelete();\n      deleteMultiplayerDigit();\n    }\n  }, [mode, playDelete, deleteLastDigit, deleteMultiplayerDigit, multiplayer.gameStatus, multiplayer.phase, singleplayer.phase]);\n\n  const handleConfirmClick = useCallback(() => {\n    if (mode === \"singleplayer\") {\n      if (singleplayer.phase !== \"playing\") {\n        return;\n      }\n      const currentGuess = singleplayer.currentGuess;\n      if (currentGuess.length === numDigits) {\n        playConfirm();\n        submitGuess();\n      } else {\n        playError();\n      }\n    } else if (mode === \"multiplayer\") {\n      if (multiplayer.gameStatus !== \"playing\" || multiplayer.phase !== \"playing\") {\n        toast.warning(\"Ø§Ù„Ù„Ø¹Ø¨Ø© ØºÙŠØ± Ù†Ø´Ø·Ø©\", { duration: 3000 });\n        return;\n      }\n      const currentGuess = multiplayer.currentGuess;\n      if (currentGuess.length === numDigits) {\n        playConfirm();\n        const guessToSend = [...currentGuess];\n        submitMultiplayerGuess();\n        send({\n          type: \"submit_guess\",\n          guess: guessToSend,\n        });\n      } else {\n        playError();\n      }\n    }\n  }, [mode, singleplayer.currentGuess, singleplayer.phase, multiplayer.gameStatus, multiplayer.phase, multiplayer.currentGuess, numDigits, playConfirm, playError, submitGuess, submitMultiplayerGuess]);\n\n  // Keyboard input listener\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Check if game is active\n      const isGameActive = mode === \"singleplayer\" || \n                          (mode === \"multiplayer\" && multiplayer.gameStatus === \"playing\");\n      \n      if (!isGameActive) return;\n      \n      // Numbers 0-9\n      if (e.key >= \"0\" && e.key <= \"9\") {\n        e.preventDefault();\n        handleDigitClick(parseInt(e.key));\n      }\n      // Backspace or Delete\n      else if (e.key === \"Backspace\" || e.key === \"Delete\") {\n        e.preventDefault();\n        handleDeleteClick();\n      }\n      // Enter or Space for submit\n      else if (e.key === \"Enter\" || e.code === \"Space\") {\n        e.preventDefault();\n        handleConfirmClick();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [mode, multiplayer.gameStatus, handleDigitClick, handleDeleteClick, handleConfirmClick]);\n\n  const currentGuess = mode === \"singleplayer\" ? singleplayer.currentGuess : multiplayer.currentGuess;\n  const canConfirm = currentGuess.length === numDigits && (mode === \"singleplayer\" || multiplayer.gameStatus === \"playing\");\n\n  return (\n    <group position={[0, 3.5, -12.3]}>\n      <DisplayPanel />\n\n      {[1, 2, 3].map((digit, idx) => (\n        <NumberButton\n          key={digit}\n          position={[(idx - 1) * 1.05, 0.8, -0.1]}\n          digit={digit}\n          onClick={handleDigitClick}\n          isPointerLocked={isPointerLocked}\n        />\n      ))}\n      \n      {[4, 5, 6].map((digit, idx) => (\n        <NumberButton\n          key={digit}\n          position={[(idx - 1) * 1.05, -0.3, -0.1]}\n          digit={digit}\n          onClick={handleDigitClick}\n          isPointerLocked={isPointerLocked}\n        />\n      ))}\n\n      {[7, 8, 9].map((digit, idx) => (\n        <NumberButton\n          key={digit}\n          position={[(idx - 1) * 1.05, -1.4, -0.1]}\n          digit={digit}\n          onClick={handleDigitClick}\n          isPointerLocked={isPointerLocked}\n        />\n      ))}\n\n      <DeleteButton position={[-1.05, -2.5, -0.1]} onClick={handleDeleteClick} isPointerLocked={isPointerLocked} />\n      <NumberButton\n        position={[0, -2.5, -0.1]}\n        digit={0}\n        onClick={handleDigitClick}\n        isPointerLocked={isPointerLocked}\n      />\n      <ConfirmButton position={[1.05, -2.5, -0.1]} onClick={handleConfirmClick} enabled={canConfirm} isPointerLocked={isPointerLocked} />\n    </group>\n  );\n}\n","size_bytes":16903},"client/src/hooks/use-is-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/WinScreen.tsx":{"content":"import { Button } from \"./button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"./card\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { send } from \"@/lib/websocket\";\n\nexport function WinScreen() {\n  const { mode, singleplayer, multiplayer, restartSingleplayer, setMode, setShowResults, setShowOpponentAttempts, resetMultiplayer, setChallengeStatus, setOpponentId, setOpponentName, setMySecretCode } = useNumberGame();\n  \n  const isSingleplayer = mode === \"singleplayer\";\n  const attempts = isSingleplayer ? singleplayer.attempts.length : multiplayer.attempts.length;\n  const timeElapsed = isSingleplayer\n    ? (singleplayer.endTime ? Math.floor((singleplayer.endTime - singleplayer.startTime) / 1000) : 0)\n    : (multiplayer.endTime ? Math.floor((multiplayer.endTime - multiplayer.startTime) / 1000) : 0);\n  const minutes = Math.floor(timeElapsed / 60);\n  const seconds = timeElapsed % 60;\n  const secretCode = isSingleplayer ? singleplayer.secretCode : multiplayer.opponentSecretCode;\n  const isMultiplayer = mode === \"multiplayer\";\n  const isTie = multiplayer.gameResult === \"tie\";\n\n  const handleRematch = () => {\n    send({ type: \"request_rematch\", opponentId: multiplayer.opponentId });\n  };\n\n  const handleBackToLobby = () => {\n    if (isMultiplayer) {\n      // Reset game state but keep multiplayer session\n      setChallengeStatus(\"none\");\n      setOpponentId(null);\n      setOpponentName(\"\");\n      setMySecretCode([]);\n      setShowResults(false);\n      resetMultiplayer();\n    } else {\n      setShowResults(false);\n      setMode(\"menu\");\n      setTimeout(() => {\n        window.location.reload();\n      }, 300);\n    }\n  };\n\n  const handleShowOpponentAttempts = () => {\n    setShowOpponentAttempts(true);\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50\">\n      <div className=\"w-full max-w-md mx-4 bg-white rounded-2xl shadow-2xl p-8 text-center space-y-6\">\n        <div className=\"text-6xl\">\n          {isTie ? \"ğŸ¤\" : \"ğŸ‰\"}\n        </div>\n        \n        <div>\n          <h2 className=\"text-4xl font-bold text-gray-800 mb-2\">\n            {isTie ? \"ØªØ¹Ø§Ø¯Ù„!\" : \"Ù„Ù‚Ø¯ ÙØ²Øª!\"}\n          </h2>\n          {isMultiplayer && isTie && (\n            <p className=\"text-gray-600\">ÙƒÙ„Ø§ÙƒÙ…Ø§ Ø®Ù…Ù†ØªÙ… Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ÙÙŠ Ù†ÙØ³ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</p>\n          )}\n        </div>\n\n        <div className=\"bg-gradient-to-br from-blue-50 to-purple-50 p-6 rounded-xl space-y-3 border border-purple-200\">\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-700 font-semibold\">Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ:</span>\n            <span className=\"text-2xl font-bold text-blue-600\">{attempts}</span>\n          </div>\n          \n          {isMultiplayer && multiplayer.opponentAttempts && (\n            <div className=\"flex justify-between items-center border-t border-purple-200 pt-3\">\n              <span className=\"text-gray-700 font-semibold\">Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®ØµÙ…:</span>\n              <span className=\"text-2xl font-bold text-purple-600\">{multiplayer.opponentAttempts.length}</span>\n            </div>\n          )}\n\n          <div className=\"flex justify-between items-center border-t border-purple-200 pt-3\">\n            <span className=\"text-gray-700 font-semibold\">Ø§Ù„ÙˆÙ‚Øª:</span>\n            <span className=\"text-2xl font-bold text-pink-600\">\n              {minutes > 0 ? `${minutes}:${seconds.toString().padStart(2, \"0\")}` : `${seconds}Ø«`}\n            </span>\n          </div>\n\n          {secretCode.length > 0 && (\n            <div className=\"flex justify-between items-center border-t border-purple-200 pt-3\">\n              <span className=\"text-gray-700 font-semibold\">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ:</span>\n              <span className=\"text-2xl font-mono font-bold text-green-600\">{secretCode.join(\"\")}</span>\n            </div>\n          )}\n        </div>\n\n        <div className=\"space-y-2 pt-4\">\n          {isMultiplayer ? (\n            <>\n              <Button\n                onClick={handleShowOpponentAttempts}\n                className=\"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ø¹Ø±Ø¶ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®ØµÙ…\n              </Button>\n              <Button\n                onClick={handleRematch}\n                className=\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©\n              </Button>\n              <Button\n                onClick={handleBackToLobby}\n                className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØºØ±ÙØ©\n              </Button>\n            </>\n          ) : (\n            <>\n              <Button\n                onClick={restartSingleplayer}\n                className=\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰\n              </Button>\n              <Button\n                onClick={() => {\n                  setMode(\"menu\");\n                  setTimeout(() => {\n                    window.location.reload();\n                  }, 300);\n                }}\n                className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5618},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nconst getLocalStorage = (key: string): any =>\n  JSON.parse(window.localStorage.getItem(key) || \"null\");\nconst setLocalStorage = (key: string, value: any): void =>\n  window.localStorage.setItem(key, JSON.stringify(value));\n\nexport { getLocalStorage, setLocalStorage };\n","size_bytes":438},"shared/schema.ts":{"content":"import { pgTable, text, serial, integer, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n","size_bytes":533},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1148},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4419},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","size_bytes":1292},"client/src/components/ui/interface.tsx":{"content":"import { useEffect } from \"react\";\nimport { useGame } from \"@/lib/stores/useGame\";\nimport { useAudio } from \"@/lib/stores/useAudio\";\nimport { Button } from \"./button\";\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from \"./card\";\nimport { VolumeX, Volume2, RotateCw, Trophy } from \"lucide-react\";\n\nexport function Interface() {\n  const restart = useGame((state) => state.restart);\n  const phase = useGame((state) => state.phase);\n  const { isMuted, toggleMute } = useAudio();\n\n  // Handle clicks on the interface in the ready phase to start the game\n  useEffect(() => {\n    if (phase === \"ready\") {\n      const handleClick = () => {\n        const activeElement = document.activeElement;\n        if (activeElement && 'blur' in activeElement) {\n          (activeElement as HTMLElement).blur();\n        }\n        const event = new KeyboardEvent(\"keydown\", { code: \"Space\" });\n        window.dispatchEvent(event);\n      };\n\n      window.addEventListener(\"click\", handleClick);\n      return () => window.removeEventListener(\"click\", handleClick);\n    }\n  }, [phase]);\n\n  return (\n    <>\n      {/* Top-right corner UI controls */}\n      <div className=\"fixed top-4 right-4 flex gap-2 z-10\">\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={toggleMute}\n          title={isMuted ? \"Unmute\" : \"Mute\"}\n        >\n          {isMuted ? <VolumeX size={18} /> : <Volume2 size={18} />}\n        </Button>\n        \n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={restart}\n          title=\"Restart Game\"\n        >\n          <RotateCw size={18} />\n        </Button>\n      </div>\n      \n      {/* Game completion overlay */}\n      {phase === \"ended\" && (\n        <div className=\"fixed inset-0 flex items-center justify-center z-20 bg-black/30\">\n          <Card className=\"w-full max-w-md mx-4 shadow-lg\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center justify-center gap-2\">\n                <Trophy className=\"text-yellow-500\" />\n                Level Complete!\n              </CardTitle>\n            </CardHeader>\n            \n            <CardContent>\n              <p className=\"text-center text-muted-foreground\">\n                Congratulations! You successfully navigated the course.\n              </p>\n            </CardContent>\n            \n            <CardFooter className=\"flex justify-center\">\n              <Button onClick={restart} className=\"w-full\">\n                Play Again\n              </Button>\n            </CardFooter>\n          </Card>\n        </div>\n      )}\n      \n      {/* Instructions panel */}\n      <div className=\"fixed bottom-4 left-4 z-10\">\n        <Card className=\"w-auto max-w-xs bg-background/80 backdrop-blur-sm\">\n          <CardContent className=\"p-4\">\n            <h3 className=\"font-medium mb-2\">Controls:</h3>\n            <ul className=\"text-sm space-y-1 text-muted-foreground\">\n              <li>WASD or Arrow Keys: Move the ball</li>\n              <li>Space: Jump</li>\n              <li>R: Restart game</li>\n              <li>M: Toggle sound</li>\n            </ul>\n          </CardContent>\n        </Card>\n      </div>\n    </>\n  );\n}\n","size_bytes":3180},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1140},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":768},"client/src/components/ui/MultiplayerResults.tsx":{"content":"import { useState } from \"react\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { send, clearSession, disconnect } from \"@/lib/websocket\";\nimport { Trophy, Medal, XCircle, RefreshCw, Home, Eye, Crown } from \"lucide-react\";\nimport { Button } from \"./button\";\nimport Confetti from \"react-confetti\";\n\nexport function MultiplayerResults() {\n  const { multiplayer, setMode, resetMultiplayer } = useNumberGame();\n  const [selectedPlayer, setSelectedPlayer] = useState<string | null>(null);\n  const [showConfetti, setShowConfetti] = useState(true);\n\n  const isWinner = multiplayer.winners.some(w => w.playerId === multiplayer.playerId);\n  const isLoser = multiplayer.losers.some(l => l.playerId === multiplayer.playerId);\n  const myResult = [...multiplayer.winners, ...multiplayer.losers].find(r => r.playerId === multiplayer.playerId);\n  const hasNoWinners = multiplayer.winners.length === 0;\n\n  const handleRequestRematch = () => {\n    send({ type: \"request_rematch\" });\n  };\n\n  const handleBackToLobby = () => {\n    // Return to lobby without leaving the room\n    const { setShowResults, setGameStatus } = useNumberGame.getState();\n    setShowResults(false);\n    setGameStatus(\"waiting\");\n  };\n\n  const handleBackToMenu = () => {\n    send({ type: \"leave_room\" });\n    clearSession();\n    disconnect();\n    resetMultiplayer();\n    setMode(\"menu\");\n    setTimeout(() => {\n      window.location.reload();\n    }, 300);\n  };\n\n  const getRankIcon = (rank: number) => {\n    if (rank === 1) return <Trophy className=\"w-6 h-6 text-yellow-500 fill-yellow-500\" />;\n    if (rank === 2) return <Medal className=\"w-6 h-6 text-gray-400 fill-gray-400\" />;\n    if (rank === 3) return <Medal className=\"w-6 h-6 text-orange-500 fill-orange-500\" />;\n    return <span className=\"text-lg font-bold text-gray-600\">#{rank}</span>;\n  };\n\n  const formatDuration = (ms: number) => {\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    if (minutes > 0) {\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    }\n    return `${seconds}s`;\n  };\n\n  // Get player details\n  const playerDetails = selectedPlayer \n    ? [...multiplayer.winners, ...multiplayer.losers].find(p => p.playerId === selectedPlayer)\n    : null;\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50 p-4 overflow-y-auto\">\n      {showConfetti && isWinner && (\n        <Confetti\n          width={window.innerWidth}\n          height={window.innerHeight}\n          recycle={false}\n          numberOfPieces={500}\n          onConfettiComplete={() => setShowConfetti(false)}\n        />\n      )}\n\n      <div className=\"w-full max-w-4xl bg-white rounded-2xl md:rounded-3xl shadow-2xl border-2 border-gray-200 my-4 md:my-8\">\n        {/* Header */}\n        <div className={`p-6 md:p-8 text-center border-b-2 ${isWinner ? 'bg-gradient-to-br from-green-50 to-emerald-50 border-green-300' : isLoser ? 'bg-gradient-to-br from-orange-50 to-red-50 border-orange-300' : 'bg-gradient-to-br from-blue-50 to-purple-50 border-blue-300'}`}>\n          <div className=\"flex justify-center mb-4\">\n            {isWinner ? (\n              <div className=\"w-16 md:w-20 h-16 md:h-20 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full flex items-center justify-center shadow-lg animate-bounce\">\n                <Trophy className=\"w-8 md:w-10 h-8 md:h-10 text-white fill-white\" />\n              </div>\n            ) : (\n              <div className=\"w-16 md:w-20 h-16 md:h-20 bg-gradient-to-br from-red-500 to-orange-500 rounded-full flex items-center justify-center shadow-lg\">\n                <XCircle className=\"w-8 md:w-10 h-8 md:h-10 text-white\" />\n              </div>\n            )}\n          </div>\n          <h1 className={`text-2xl md:text-4xl font-bold mb-2 ${isWinner ? 'text-green-800' : isLoser ? 'text-red-800' : 'text-blue-800'}`}>\n            {isWinner ? 'ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ ÙØ²Øª!' : isLoser ? 'ğŸ˜¢ Ù„Ù„Ø£Ø³ÙØŒ Ù„Ù‚Ø¯ Ø®Ø³Ø±Øª' : 'â³ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¬Ø§Ø±ÙŠØ©...'}\n          </h1>\n          {myResult && (\n            <div className=\"flex flex-wrap justify-center gap-3 md:gap-6 mt-4\">\n              <div className=\"bg-white bg-opacity-70 px-3 md:px-4 py-2 rounded-lg\">\n                <p className=\"text-xs md:text-sm text-gray-600\">Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ</p>\n                <p className=\"text-xl md:text-2xl font-bold text-blue-600\">{myResult.attempts}</p>\n              </div>\n              <div className=\"bg-white bg-opacity-70 px-3 md:px-4 py-2 rounded-lg\">\n                <p className=\"text-xs md:text-sm text-gray-600\">Ø§Ù„ÙˆÙ‚Øª</p>\n                <p className=\"text-xl md:text-2xl font-bold text-purple-600\">{formatDuration(myResult.duration)}</p>\n              </div>\n              {myResult.rank && (\n                <div className=\"bg-white bg-opacity-70 px-3 md:px-4 py-2 rounded-lg\">\n                  <p className=\"text-xs md:text-sm text-gray-600\">Ø§Ù„ØªØ±ØªÙŠØ¨</p>\n                  <p className=\"text-xl md:text-2xl font-bold text-yellow-600\">#{myResult.rank}</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Secret Code */}\n        <div className=\"p-4 md:p-6 border-b border-gray-200 bg-gradient-to-br from-purple-50 to-pink-50\" dir=\"ltr\">\n          <h3 className=\"text-center text-sm md:text-base text-gray-700 font-semibold mb-3\">ğŸ” Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù‡Ùˆ:</h3>\n          <div className=\"flex justify-center gap-2\">\n            {multiplayer.sharedSecret.map((digit, idx) => (\n              <div\n                key={idx}\n                className=\"w-10 md:w-14 h-12 md:h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg md:rounded-xl flex items-center justify-center text-lg md:text-2xl font-bold text-white shadow-lg\"\n              >\n                {digit}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* No Winners Yet Message */}\n        {hasNoWinners && !isWinner && (\n          <div className=\"p-6 border-b border-gray-200 bg-gradient-to-br from-blue-50 to-purple-50\">\n            <h3 className=\"text-center text-xl font-bold text-blue-700\">\n              ğŸ”„ Ù„Ù… ÙŠÙÙˆØ² Ø£Ø­Ø¯ Ø¨Ø¹Ø¯\n            </h3>\n            <p className=\"text-center text-gray-600 mt-2\">Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ† ÙŠÙ„Ø¹Ø¨ÙˆÙ† Ø§Ù„Ø¢Ù†...</p>\n          </div>\n        )}\n\n        {/* Winners List */}\n        {multiplayer.winners.length > 0 && (\n          <div className=\"p-4 md:p-6 border-b border-gray-200 bg-gradient-to-br from-green-50 via-white to-emerald-50\">\n            <h3 className=\"text-lg md:text-xl font-bold text-green-700 mb-4 flex items-center\">\n              <Trophy className=\"w-5 md:w-6 h-5 md:h-6 ml-2 text-yellow-500 fill-yellow-500\" />\n              Ø§Ù„ÙØ§Ø¦Ø²ÙˆÙ† ({multiplayer.winners.length})\n            </h3>\n            <div className=\"space-y-3\">\n              {multiplayer.winners.map((winner) => (\n                <div\n                  key={winner.playerId}\n                  className=\"bg-white border-2 border-green-200 hover:border-green-400 hover:shadow-md transition-all rounded-xl p-3 md:p-4 flex items-center justify-between\"\n                >\n                  <div className=\"flex items-center gap-3 flex-1\">\n                    <div className=\"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg font-bold text-lg\">\n                      #{winner.rank || 1}\n                    </div>\n                    <div className=\"flex-1\">\n                      <p className=\"font-bold text-gray-800 text-sm md:text-base flex items-center gap-2\">\n                        {winner.playerName}\n                        {winner.playerId === multiplayer.playerId && (\n                          <span className=\"text-xs bg-blue-200 text-blue-700 px-2 py-0.5 rounded-lg\">(Ø£Ù†Øª)</span>\n                        )}\n                        {winner.playerId === multiplayer.hostId && (\n                          <Crown className=\"w-4 h-4 text-yellow-500 fill-yellow-500\" />\n                        )}\n                      </p>\n                      <p className=\"text-xs md:text-sm text-gray-500\">\n                        {winner.attempts} Ù…Ø­Ø§ÙˆÙ„Ø§Øª â€¢ {formatDuration(winner.duration)}\n                      </p>\n                    </div>\n                  </div>\n                  <Button\n                    size=\"sm\"\n                    onClick={() => setSelectedPlayer(winner.playerId)}\n                    className=\"bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-1 text-xs md:text-sm\"\n                  >\n                    <Eye className=\"w-3 md:w-4 h-3 md:h-4\" />\n                    ØªÙØ§ØµÙŠÙ„\n                  </Button>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Losers List */}\n        {multiplayer.losers.length > 0 && (\n          <div className=\"p-4 md:p-6 border-b border-gray-200 bg-gradient-to-br from-red-50 via-white to-orange-50\">\n            <h3 className=\"text-lg md:text-xl font-bold text-red-700 mb-4 flex items-center\">\n              <XCircle className=\"w-5 md:w-6 h-5 md:h-6 ml-2\" />\n              Ø§Ù„Ø®Ø§Ø³Ø±ÙˆÙ† ({multiplayer.losers.length})\n            </h3>\n            <div className=\"space-y-3\">\n              {multiplayer.losers.map((loser) => (\n                <div\n                  key={loser.playerId}\n                  className=\"bg-white border-2 border-red-200 hover:border-red-400 hover:shadow-md transition-all rounded-xl p-3 md:p-4 flex items-center justify-between\"\n                >\n                  <div className=\"flex items-center gap-3 flex-1\">\n                    <div className=\"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-red-100 to-red-200 rounded-lg\">\n                      <XCircle className=\"w-6 h-6 text-red-500\" />\n                    </div>\n                    <div className=\"flex-1\">\n                      <p className=\"font-bold text-gray-800 text-sm md:text-base flex items-center gap-2\">\n                        {loser.playerName}\n                        {loser.playerId === multiplayer.playerId && (\n                          <span className=\"text-xs bg-blue-200 text-blue-700 px-2 py-0.5 rounded-lg\">(Ø£Ù†Øª)</span>\n                        )}\n                        {loser.playerId === multiplayer.hostId && (\n                          <Crown className=\"w-4 h-4 text-yellow-500 fill-yellow-500\" />\n                        )}\n                      </p>\n                      <p className=\"text-xs md:text-sm text-gray-500\">\n                        {loser.attempts} Ù…Ø­Ø§ÙˆÙ„Ø§Øª â€¢ {formatDuration(loser.duration)}\n                      </p>\n                    </div>\n                  </div>\n                  <Button\n                    size=\"sm\"\n                    onClick={() => setSelectedPlayer(loser.playerId)}\n                    className=\"bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-1 text-xs md:text-sm\"\n                  >\n                    <Eye className=\"w-3 md:w-4 h-3 md:h-4\" />\n                    ØªÙØ§ØµÙŠÙ„\n                  </Button>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Still Playing List */}\n        {multiplayer.stillPlaying.length > 0 && (\n          <div className=\"p-6 border-b border-gray-200\">\n            <h3 className=\"text-xl font-bold text-blue-700 mb-4 flex items-center\">\n              <span className=\"text-2xl ml-2\">ğŸ®</span>\n              Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ† Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙˆÙ† ({multiplayer.stillPlaying.length})\n            </h3>\n            <div className=\"space-y-2\">\n              {multiplayer.stillPlaying.map((player) => (\n                <div\n                  key={player.playerId}\n                  className=\"bg-gradient-to-r from-blue-50 to-cyan-50 border-2 border-blue-300 rounded-xl p-4 flex items-center gap-3\"\n                >\n                  <span className=\"text-2xl animate-pulse\">â³</span>\n                  <div>\n                    <p className=\"font-bold text-gray-800 flex items-center gap-2\">\n                      {player.playerName}\n                      {player.playerId === multiplayer.playerId && (\n                        <span className=\"text-xs bg-blue-200 text-blue-700 px-2 py-0.5 rounded-lg\">(Ø£Ù†Øª)</span>\n                      )}\n                      {player.playerId === multiplayer.hostId && (\n                        <Crown className=\"w-4 h-4 text-yellow-500 fill-yellow-500\" />\n                      )}\n                    </p>\n                    <p className=\"text-sm text-gray-600\">ÙÙŠ Ù…Ø¨Ø§Ø±Ø©...</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Action Buttons */}\n        <div className=\"p-4 md:p-6 space-y-3\">\n          {(isWinner || isLoser) && !multiplayer.rematchState.requested && (\n            <Button\n              onClick={handleRequestRematch}\n              className=\"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-3 md:py-4 rounded-xl shadow-lg flex items-center justify-center gap-2 text-sm md:text-base\"\n            >\n              <RefreshCw className=\"w-4 md:w-5 h-4 md:h-5\" />\n              Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø¨Ø§Ø±Ø§Ø©\n            </Button>\n          )}\n\n          {multiplayer.roomId && (\n            <Button\n              onClick={handleBackToLobby}\n              className=\"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold py-3 md:py-4 rounded-xl shadow-lg flex items-center justify-center gap-2 text-sm md:text-base\"\n            >\n              <RefreshCw className=\"w-4 md:w-5 h-4 md:h-5\" />\n              Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØºØ±ÙØ©\n            </Button>\n          )}\n\n          <Button\n            onClick={handleBackToMenu}\n            className=\"w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-bold py-3 md:py-4 rounded-xl shadow-lg flex items-center justify-center gap-2 text-sm md:text-base\"\n          >\n            <Home className=\"w-4 md:w-5 h-4 md:h-5\" />\n            Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©\n          </Button>\n        </div>\n      </div>\n\n      {/* Rematch Dialog */}\n      {multiplayer.rematchState.requested && multiplayer.rematchState.countdown !== null && (\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4\">\n          <div className=\"w-full max-w-2xl bg-gradient-to-br from-blue-50 to-white rounded-3xl shadow-2xl border-2 border-blue-300 p-6 md:p-8 text-center space-y-6\">\n            {/* Header */}\n            <div>\n              <div className=\"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full mx-auto mb-4 shadow-lg\">\n                <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                </svg>\n              </div>\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 mb-2\">Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ</h2>\n              <p className=\"text-sm md:text-base text-gray-600\">Ù„Ø¯ÙŠÙƒ <span className=\"font-bold text-blue-600\">{multiplayer.rematchState.countdown}s</span> Ù„Ù„ØªØµÙˆÙŠØª</p>\n            </div>\n\n            {/* Voting Buttons */}\n            {!multiplayer.rematchState.votes.some(v => v.playerId === multiplayer.playerId) && (\n              <div className=\"grid grid-cols-2 gap-3 md:gap-4\">\n                <button\n                  onClick={() => send({ type: \"rematch_vote\", accepted: true })}\n                  className=\"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-3 md:py-4 px-4 md:px-6 rounded-xl transition-all transform hover:scale-105 shadow-lg flex flex-col items-center gap-2\"\n                >\n                  <span className=\"text-xl md:text-2xl\">âœ“</span>\n                  <span className=\"text-xs md:text-sm\">Ù…ÙˆØ§ÙÙ‚</span>\n                </button>\n                <button\n                  onClick={() => send({ type: \"rematch_vote\", accepted: false })}\n                  className=\"bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold py-3 md:py-4 px-4 md:px-6 rounded-xl transition-all transform hover:scale-105 shadow-lg flex flex-col items-center gap-2\"\n                >\n                  <span className=\"text-xl md:text-2xl\">âœ—</span>\n                  <span className=\"text-xs md:text-sm\">Ø±Ø§ÙØ¶</span>\n                </button>\n              </div>\n            )}\n\n            {/* Player Voting Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4\">\n              {multiplayer.players.map(player => {\n                const vote = multiplayer.rematchState.votes.find(v => v.playerId === player.id);\n                const isCurrentPlayer = player.id === multiplayer.playerId;\n                \n                return (\n                  <div\n                    key={player.id}\n                    className={`relative rounded-2xl p-4 md:p-5 border-2 transition-all transform ${\n                      vote?.accepted\n                        ? 'bg-gradient-to-br from-green-50 to-green-100 border-green-400'\n                        : vote?.accepted === false\n                        ? 'bg-gradient-to-br from-red-50 to-red-100 border-red-400'\n                        : 'bg-gradient-to-br from-gray-50 to-gray-100 border-gray-300 animate-pulse'\n                    }`}\n                  >\n                    <div className=\"absolute top-2 right-2 md:top-3 md:right-3\">\n                      {vote?.accepted ? (\n                        <div className=\"w-8 h-8 md:w-10 md:h-10 bg-green-500 rounded-full flex items-center justify-center shadow-lg\">\n                          <span className=\"text-white font-bold text-lg md:text-xl\">âœ“</span>\n                        </div>\n                      ) : vote?.accepted === false ? (\n                        <div className=\"w-8 h-8 md:w-10 md:h-10 bg-red-500 rounded-full flex items-center justify-center shadow-lg\">\n                          <span className=\"text-white font-bold text-lg md:text-xl\">âœ—</span>\n                        </div>\n                      ) : (\n                        <div className=\"w-8 h-8 md:w-10 md:h-10 bg-gray-400 rounded-full flex items-center justify-center shadow-lg\">\n                          <span className=\"text-white font-bold text-lg md:text-xl\">â³</span>\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"pr-10 md:pr-12\">\n                      <p className=\"font-bold text-gray-800 text-sm md:text-base flex items-center gap-2\">\n                        {player.name}\n                        {isCurrentPlayer && <span className=\"text-xs bg-blue-200 text-blue-700 px-2 py-0.5 rounded-lg\">(Ø£Ù†Øª)</span>}\n                      </p>\n                      <p className={`text-xs md:text-sm font-semibold mt-1 ${\n                        vote?.accepted ? 'text-green-700' : vote?.accepted === false ? 'text-red-700' : 'text-gray-500'\n                      }`}>\n                        {vote?.accepted ? 'Ù…ÙˆØ§ÙÙ‚ âœ“' : vote?.accepted === false ? 'Ø±Ø§ÙØ¶ âœ—' : 'ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...'}\n                      </p>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Player Details Modal */}\n      {playerDetails && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          onClick={() => setSelectedPlayer(null)}\n        >\n          <div \n            className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 max-h-[80vh] overflow-y-auto\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-2xl font-bold text-gray-800\">{playerDetails.playerName}</h2>\n              <button \n                onClick={() => setSelectedPlayer(null)}\n                className=\"text-gray-500 hover:text-gray-700 text-2xl\"\n              >\n                Ã—\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div className=\"bg-blue-50 p-4 rounded-xl\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø§Ù„Ù†ØªÙŠØ¬Ø©</p>\n                <p className=\"text-xl font-bold text-blue-600\">\n                  {playerDetails.rank ? `#${playerDetails.rank} - ÙØ§Ø¦Ø²` : 'Ø®Ø§Ø³Ø±'}\n                </p>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div className=\"bg-purple-50 p-4 rounded-xl\">\n                  <p className=\"text-sm text-gray-600 mb-1\">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</p>\n                  <p className=\"text-2xl font-bold text-purple-600\">{playerDetails.attempts}</p>\n                </div>\n                <div className=\"bg-green-50 p-4 rounded-xl\">\n                  <p className=\"text-sm text-gray-600 mb-1\">Ø§Ù„ÙˆÙ‚Øª</p>\n                  <p className=\"text-2xl font-bold text-green-600\">{formatDuration(playerDetails.duration)}</p>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-50 p-4 rounded-xl\" dir=\"rtl\">\n                <h3 className=\"font-bold text-gray-800 mb-3\">Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</h3>\n                <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                  {playerDetails.attemptsDetails.map((attempt, idx) => (\n                    <div key={idx} className=\"bg-white p-3 rounded-lg border border-gray-200\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"font-semibold text-gray-700\">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© {idx + 1}</span>\n                        {attempt.correctPositionCount === multiplayer.settings.numDigits && (\n                          <span className=\"text-green-600 font-bold\">âœ“ ÙÙˆØ²</span>\n                        )}\n                      </div>\n                      <div className=\"flex gap-2 mb-2\" dir=\"ltr\">\n                        {attempt.guess.map((digit, digitIdx) => (\n                          <div\n                            key={digitIdx}\n                            className=\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-sm font-bold text-blue-700\"\n                          >\n                            {digit}\n                          </div>\n                        ))}\n                      </div>\n                      <div className=\"flex gap-4 text-xs text-gray-600\">\n                        <span>âœ“ ØµØ­ÙŠØ­: {attempt.correctCount}</span>\n                        <span>ğŸ“ Ù…ÙˆÙ‚Ø¹ ØµØ­ÙŠØ­: {attempt.correctPositionCount}</span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":23395},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1828},"client/src/lib/stores/useNumberGame.ts":{"content":"import { create } from \"zustand\";\nimport { subscribeWithSelector } from \"zustand/middleware\";\nimport { useChallenge } from \"./useChallenge\";\n\nexport type GameMode = \"menu\" | \"singleplayer\" | \"multiplayer\";\nexport type GamePhase = \"playing\" | \"won\" | \"lost\";\nexport type GameStatus = \"waiting\" | \"playing\" | \"finished\";\n\ninterface Attempt {\n  guess: number[];\n  correctCount: number;\n  correctPositionCount: number;\n}\n\ninterface GameSettings {\n  numDigits: number;\n  maxAttempts: number;\n}\n\ninterface SingleplayerState {\n  secretCode: number[];\n  currentGuess: number[];\n  attempts: Attempt[];\n  phase: GamePhase;\n  startTime: number;\n  endTime: number | null;\n  settings: GameSettings;\n}\n\ninterface PlayerResult {\n  playerId: string;\n  playerName: string;\n  attempts: number;\n  duration: number;\n  attemptsDetails: Attempt[];\n  rank?: number;\n}\n\ninterface RematchVote {\n  playerId: string;\n  accepted: boolean;\n}\n\ninterface MultiplayerState {\n  roomId: string;\n  playerId: string;\n  playerName: string;\n  hostId: string;\n  isHost: boolean;\n  players: { id: string; name: string }[];\n  gameStatus: GameStatus;\n  sharedSecret: number[];\n  currentGuess: number[];\n  attempts: Attempt[];\n  phase: GamePhase;\n  startTime: number;\n  endTime: number | null;\n  winners: PlayerResult[];\n  losers: PlayerResult[];\n  stillPlaying: PlayerResult[];\n  showResults: boolean;\n  rematchState: {\n    requested: boolean;\n    countdown: number | null;\n    votes: RematchVote[];\n  };\n  settings: GameSettings;\n}\n\ninterface NumberGameState {\n  mode: GameMode;\n  isConnecting: boolean;\n  connectionError: string | null;\n  singleplayer: SingleplayerState;\n  multiplayer: MultiplayerState;\n\n  // Mode actions\n  setMode: (mode: GameMode) => void;\n  setIsConnecting: (isConnecting: boolean) => void;\n  setConnectionError: (error: string | null) => void;\n\n  // Singleplayer actions\n  startSingleplayer: (settings: GameSettings) => void;\n  addDigitToGuess: (digit: number) => void;\n  deleteLastDigit: () => void;\n  submitGuess: () => void;\n  restartSingleplayer: () => void;\n  setSingleplayerSettings: (settings: GameSettings) => void;\n\n  // Multiplayer actions\n  setRoomId: (roomId: string) => void;\n  setPlayerId: (playerId: string) => void;\n  setPlayerName: (name: string) => void;\n  setHostId: (hostId: string) => void;\n  setIsHost: (isHost: boolean) => void;\n  setPlayers: (players: { id: string; name: string }[]) => void;\n  setGameStatus: (status: GameStatus) => void;\n  setSharedSecret: (secret: number[]) => void;\n  addMultiplayerDigit: (digit: number) => void;\n  deleteMultiplayerDigit: () => void;\n  submitMultiplayerGuess: () => void;\n  addMultiplayerAttempt: (attempt: Attempt) => void;\n  setMultiplayerPhase: (phase: GamePhase) => void;\n  setMultiplayerStartTime: () => void;\n  setMultiplayerEndTime: () => void;\n  setGameResults: (winners: PlayerResult[], losers: PlayerResult[], sharedSecret: number[]) => void;\n  setShowResults: (show: boolean) => void;\n  setRematchRequested: (requested: boolean, countdown: number | null) => void;\n  setRematchVotes: (votes: RematchVote[]) => void;\n  setRematchCountdown: (countdown: number | null) => void;\n  resetMultiplayer: () => void;\n  resetMultiplayerGame: () => void;\n  setMultiplayerSettings: (settings: GameSettings) => void;\n}\n\nconst generateSecretCode = (numDigits: number = 4): number[] => {\n  return Array.from({ length: numDigits }, () => Math.floor(Math.random() * 10));\n};\n\nconst checkGuess = (secret: number[], guess: number[]): { correctCount: number; correctPositionCount: number } => {\n  let correctCount = 0;\n  let correctPositionCount = 0;\n\n  const secretCopy = [...secret];\n  const guessCopy = [...guess];\n  const length = Math.min(secret.length, guess.length);\n\n  // First pass: check correct positions\n  for (let i = 0; i < length; i++) {\n    if (guessCopy[i] === secretCopy[i]) {\n      correctPositionCount++;\n      secretCopy[i] = -1;\n      guessCopy[i] = -2;\n    }\n  }\n\n  // Second pass: check correct digits in wrong positions\n  for (let i = 0; i < length; i++) {\n    if (guessCopy[i] !== -2) {\n      const index = secretCopy.indexOf(guessCopy[i]);\n      if (index !== -1) {\n        correctCount++;\n        secretCopy[index] = -1;\n      }\n    }\n  }\n\n  correctCount += correctPositionCount;\n\n  return { correctCount, correctPositionCount };\n};\n\nexport const useNumberGame = create<NumberGameState>()(\n  subscribeWithSelector((set, get) => ({\n    mode: \"menu\",\n    isConnecting: false,\n    connectionError: null,\n    singleplayer: {\n      secretCode: [],\n      currentGuess: [],\n      attempts: [],\n      phase: \"playing\",\n      startTime: 0,\n      endTime: null,\n      settings: { numDigits: 4, maxAttempts: 20 },\n    },\n    multiplayer: {\n      roomId: \"\",\n      playerId: \"\",\n      playerName: \"\",\n      hostId: \"\",\n      isHost: false,\n      players: [],\n      gameStatus: \"waiting\",\n      sharedSecret: [],\n      currentGuess: [],\n      attempts: [],\n      phase: \"playing\",\n      startTime: 0,\n      endTime: null,\n      winners: [],\n      losers: [],\n      stillPlaying: [],\n      showResults: false,\n      rematchState: {\n        requested: false,\n        countdown: null,\n        votes: [],\n      },\n      settings: { numDigits: 4, maxAttempts: 20 },\n    },\n\n    setMode: (mode) => set({ mode }),\n    setIsConnecting: (isConnecting) => set({ isConnecting }),\n    setConnectionError: (error) => set({ connectionError: error }),\n\n    startSingleplayer: (settings: GameSettings = { numDigits: 4, maxAttempts: 20 }) => {\n      const secretCode = generateSecretCode(settings.numDigits);\n      console.log(\"Secret code generated:\", secretCode);\n      set({\n        mode: \"singleplayer\",\n        singleplayer: {\n          secretCode,\n          currentGuess: [],\n          attempts: [],\n          phase: \"playing\",\n          startTime: Date.now(),\n          endTime: null,\n          settings,\n        },\n      });\n    },\n\n    addDigitToGuess: (digit) => {\n      const { singleplayer } = get();\n      if (singleplayer.currentGuess.length < singleplayer.settings.numDigits && singleplayer.phase === \"playing\" && singleplayer.attempts.length < singleplayer.settings.maxAttempts) {\n        set({\n          singleplayer: {\n            ...singleplayer,\n            currentGuess: [...singleplayer.currentGuess, digit],\n          },\n        });\n      }\n    },\n\n    deleteLastDigit: () => {\n      const { singleplayer } = get();\n      if (singleplayer.currentGuess.length > 0 && singleplayer.phase === \"playing\") {\n        set({\n          singleplayer: {\n            ...singleplayer,\n            currentGuess: singleplayer.currentGuess.slice(0, -1),\n          },\n        });\n      }\n    },\n\n    submitGuess: () => {\n      const { singleplayer } = get();\n      if (singleplayer.currentGuess.length === singleplayer.settings.numDigits && singleplayer.phase === \"playing\") {\n        const { correctCount, correctPositionCount } = checkGuess(\n          singleplayer.secretCode,\n          singleplayer.currentGuess\n        );\n\n        const newAttempt: Attempt = {\n          guess: singleplayer.currentGuess,\n          correctCount,\n          correctPositionCount,\n        };\n\n        const won = correctPositionCount === singleplayer.settings.numDigits;\n        const newAttempts = [...singleplayer.attempts, newAttempt];\n        const lost = newAttempts.length >= singleplayer.settings.maxAttempts && !won;\n\n        set({\n          singleplayer: {\n            ...singleplayer,\n            attempts: newAttempts,\n            currentGuess: [],\n            phase: won ? \"won\" : (lost ? \"lost\" : \"playing\"),\n            endTime: (won || lost) ? Date.now() : null,\n          },\n        });\n      }\n    },\n\n    restartSingleplayer: () => {\n      const { singleplayer } = get();\n      useChallenge.getState().resetChallenge();\n      const newSecretCode = generateSecretCode(singleplayer.settings.numDigits);\n      console.log(\"Secret code generated:\", newSecretCode);\n      set({\n        singleplayer: {\n          secretCode: newSecretCode,\n          currentGuess: [],\n          attempts: [],\n          phase: \"playing\",\n          startTime: Date.now(),\n          endTime: null,\n          settings: singleplayer.settings,\n        },\n      });\n    },\n\n    setSingleplayerSettings: (settings) => set((state) => ({ singleplayer: { ...state.singleplayer, settings } })),\n\n    setRoomId: (roomId) => set((state) => ({ multiplayer: { ...state.multiplayer, roomId } })),\n    setPlayerId: (playerId) => set((state) => ({ multiplayer: { ...state.multiplayer, playerId } })),\n    setPlayerName: (playerName) => set((state) => ({ multiplayer: { ...state.multiplayer, playerName } })),\n    setHostId: (hostId) => set((state) => ({ \n      multiplayer: { \n        ...state.multiplayer, \n        hostId,\n        isHost: hostId === state.multiplayer.playerId,\n      } \n    })),\n    setIsHost: (isHost) => set((state) => ({ multiplayer: { ...state.multiplayer, isHost } })),\n    setPlayers: (players) => set((state) => ({ multiplayer: { ...state.multiplayer, players } })),\n    setGameStatus: (gameStatus) => set((state) => ({ multiplayer: { ...state.multiplayer, gameStatus } })),\n    setSharedSecret: (sharedSecret) => set((state) => ({ multiplayer: { ...state.multiplayer, sharedSecret } })),\n\n    addMultiplayerDigit: (digit) => {\n      const { multiplayer } = get();\n      if (multiplayer.currentGuess.length < multiplayer.settings.numDigits && \n          multiplayer.attempts.length < multiplayer.settings.maxAttempts &&\n          multiplayer.phase === \"playing\") {\n        set({\n          multiplayer: {\n            ...multiplayer,\n            currentGuess: [...multiplayer.currentGuess, digit],\n          },\n        });\n      }\n    },\n\n    deleteMultiplayerDigit: () => {\n      const { multiplayer } = get();\n      if (multiplayer.currentGuess.length > 0) {\n        set({\n          multiplayer: {\n            ...multiplayer,\n            currentGuess: multiplayer.currentGuess.slice(0, -1),\n          },\n        });\n      }\n    },\n\n    submitMultiplayerGuess: () => {\n      const { multiplayer } = get();\n      if (multiplayer.currentGuess.length === multiplayer.settings.numDigits) {\n        set({\n          multiplayer: {\n            ...multiplayer,\n            currentGuess: [],\n          },\n        });\n      }\n    },\n\n    addMultiplayerAttempt: (attempt) => {\n      const { multiplayer } = get();\n      set({\n        multiplayer: {\n          ...multiplayer,\n          attempts: [...multiplayer.attempts, attempt],\n        },\n      });\n    },\n\n    setMultiplayerPhase: (phase) => set((state) => ({ multiplayer: { ...state.multiplayer, phase } })),\n    setMultiplayerStartTime: () => set((state) => ({ multiplayer: { ...state.multiplayer, startTime: Date.now() } })),\n    setMultiplayerEndTime: () => set((state) => ({ multiplayer: { ...state.multiplayer, endTime: Date.now() } })),\n    \n    setGameResults: (winners, losers, sharedSecret) => set((state) => ({ \n      multiplayer: { \n        ...state.multiplayer, \n        winners, \n        losers,\n        sharedSecret,\n        showResults: true,\n        gameStatus: \"finished\",\n      } \n    })),\n    \n    setShowResults: (showResults) => set((state) => ({ multiplayer: { ...state.multiplayer, showResults } })),\n    \n    setRematchRequested: (requested, countdown) => set((state) => ({ \n      multiplayer: { \n        ...state.multiplayer, \n        rematchState: {\n          ...state.multiplayer.rematchState,\n          requested,\n          countdown,\n        }\n      } \n    })),\n    \n    setRematchVotes: (votes) => set((state) => ({ \n      multiplayer: { \n        ...state.multiplayer, \n        rematchState: {\n          ...state.multiplayer.rematchState,\n          votes,\n        }\n      } \n    })),\n    \n    setRematchCountdown: (countdown) => set((state) => ({ \n      multiplayer: { \n        ...state.multiplayer, \n        rematchState: {\n          ...state.multiplayer.rematchState,\n          countdown,\n        }\n      } \n    })),\n\n    resetMultiplayer: () =>\n      set((state) => ({\n        multiplayer: {\n          ...state.multiplayer,\n          roomId: \"\",\n          playerId: \"\",\n          hostId: \"\",\n          isHost: false,\n          players: [],\n          gameStatus: \"waiting\",\n          sharedSecret: [],\n          currentGuess: [],\n          attempts: [],\n          phase: \"playing\",\n          startTime: 0,\n          endTime: null,\n          winners: [],\n          losers: [],\n          showResults: false,\n          isWatching: false,\n          watchingPlayerId: null,\n          rematchState: {\n            requested: false,\n            countdown: null,\n            votes: [],\n          },\n        },\n      })),\n    \n    resetMultiplayerGame: () =>\n      set((state) => ({\n        multiplayer: {\n          ...state.multiplayer,\n          gameStatus: \"waiting\",\n          sharedSecret: [],\n          currentGuess: [],\n          attempts: [],\n          phase: \"playing\",\n          startTime: 0,\n          endTime: null,\n          winners: [],\n          losers: [],\n          stillPlaying: [],\n          showResults: false,\n          rematchState: {\n            requested: false,\n            countdown: null,\n            votes: [],\n          },\n        },\n      })),\n\n    setMultiplayerSettings: (settings) => set((state) => ({ multiplayer: { ...state.multiplayer, settings } })),\n  }))\n);\n","size_bytes":13285},"client/src/components/game/CurrentGuessDisplay.tsx":{"content":"import { Text } from \"@react-three/drei\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\n\nexport function CurrentGuessDisplay() {\n  const { mode, singleplayer, multiplayer } = useNumberGame();\n\n  let feedbackText = \"\";\n  let feedbackColor = \"#4338ca\";\n  \n  if (mode === \"singleplayer\" && singleplayer.attempts.length > 0) {\n    const lastAttempt = singleplayer.attempts[singleplayer.attempts.length - 1];\n    const correctCount = lastAttempt.correctCount;\n    const correctPositionCount = lastAttempt.correctPositionCount;\n    const numDigits = singleplayer.settings.numDigits;\n    \n    if (correctCount === 0) {\n      feedbackText = \"ÙˆÙ„Ø§ Ø±Ù‚Ù… ØµØ­\";\n      feedbackColor = \"#ef4444\";\n    } else if (correctPositionCount === numDigits) {\n      feedbackText = \"ÙÙˆØ²!\";\n      feedbackColor = \"#10b981\";\n    } else if (correctPositionCount === 0) {\n      feedbackText = `${correctCount} ØµØ­ - Ù…ÙƒØ§Ù† ØºÙ„Ø·`;\n      feedbackColor = \"#f97316\";\n    } else if (correctCount === correctPositionCount) {\n      feedbackText = `${correctPositionCount} ØµØ­ - Ù…ÙƒØ§Ù† ØµØ­`;\n      feedbackColor = \"#10b981\";\n    } else {\n      feedbackText = `${correctCount} ØµØ­ - ${correctPositionCount} Ù…ÙƒØ§Ù† ØµØ­`;\n      feedbackColor = \"#f97316\";\n    }\n  } else if (mode === \"multiplayer\" && multiplayer.attempts.length > 0) {\n    const lastAttempt = multiplayer.attempts[multiplayer.attempts.length - 1];\n    const correctCount = lastAttempt.correctCount;\n    const correctPositionCount = lastAttempt.correctPositionCount;\n    const numDigits = multiplayer.settings.numDigits;\n    \n    if (correctCount === 0) {\n      feedbackText = \"ÙˆÙ„Ø§ Ø±Ù‚Ù… ØµØ­\";\n      feedbackColor = \"#ef4444\";\n    } else if (correctPositionCount === numDigits) {\n      feedbackText = \"ÙÙˆØ²!\";\n      feedbackColor = \"#10b981\";\n    } else if (correctPositionCount === 0) {\n      feedbackText = `${correctCount} ØµØ­ - Ù…ÙƒØ§Ù† ØºÙ„Ø·`;\n      feedbackColor = \"#f97316\";\n    } else if (correctCount === correctPositionCount) {\n      feedbackText = `${correctPositionCount} ØµØ­ - Ù…ÙƒØ§Ù† ØµØ­`;\n      feedbackColor = \"#10b981\";\n    } else {\n      feedbackText = `${correctCount} ØµØ­ - ${correctPositionCount} Ù…ÙƒØ§Ù† ØµØ­`;\n      feedbackColor = \"#f97316\";\n    }\n  }\n\n  if (!feedbackText) return null;\n\n  return (\n    <Text\n      position={[0, 0.5, -7.9]}\n      fontSize={0.4}\n      color={feedbackColor}\n      anchorX=\"center\"\n      anchorY=\"middle\"\n      fontWeight=\"bold\"\n      maxWidth={8}\n    >\n      {feedbackText}\n    </Text>\n  );\n}\n","size_bytes":2523},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/mobile/MobileApp.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { useAudio } from \"@/lib/stores/useAudio\";\nimport { reconnectToSession, connectWebSocket, reconnectWithRetry } from \"@/lib/websocket\";\nimport { MobileMenu } from \"./MobileMenu\";\nimport { MobileSingleplayer } from \"./MobileSingleplayer\";\nimport { MobileMultiplayer } from \"./MobileMultiplayer\";\nimport { MobileChallenge } from \"./MobileChallenge\";\nimport { useChallenge } from \"@/lib/stores/useChallenge\";\n\nexport function MobileApp() {\n  const { mode, setMode, setPlayerName, setRoomId, setPlayerId, setIsConnecting, multiplayer, singleplayer } = useNumberGame();\n  const { setSuccessSound } = useAudio();\n  const [showChallenge, setShowChallenge] = useState(false);\n  const { startChallenge, resetChallenge, phase: challengePhase, generateHint } = useChallenge();\n\n  useEffect(() => {\n    const successAudio = new Audio(\"/sounds/success.mp3\");\n    successAudio.load();\n    setSuccessSound(successAudio);\n  }, [setSuccessSound]);\n\n  useEffect(() => {\n    const session = reconnectToSession();\n    if (session && session.roomId && session.playerId && !multiplayer.roomId) {\n      console.log(\"Reconnecting to session:\", session);\n      setPlayerName(session.playerName);\n      \n      // Restore game state if it was active\n      if (session.gameState) {\n        const store = useNumberGame.getState();\n        if (session.gameState.gameStatus) {\n          store.setGameStatus(session.gameState.gameStatus);\n        }\n        if (session.gameState.sharedSecret) {\n          store.setSharedSecret(session.gameState.sharedSecret);\n        }\n        if (session.gameState.attempts) {\n          useNumberGame.setState((state) => ({\n            multiplayer: {\n              ...state.multiplayer,\n              attempts: session.gameState.attempts,\n              startTime: session.gameState.startTime || 0,\n            },\n          }));\n        }\n      }\n      \n      setMode(\"multiplayer\");\n      setIsConnecting(true);\n      reconnectWithRetry(session.playerName, session.playerId, session.roomId);\n      \n      setTimeout(() => {\n        if (useNumberGame.getState().isConnecting) {\n          console.error(\"Connection timeout\");\n          setIsConnecting(false);\n          setMode(\"menu\");\n        }\n      }, 3000);\n    }\n  }, []);\n\n  const handleExitChallenge = () => {\n    if (challengePhase === \"won\") {\n      generateHint(singleplayer.secretCode);\n    }\n    setShowChallenge(false);\n    resetChallenge();\n  };\n\n  if (showChallenge) {\n    return <MobileChallenge onExit={handleExitChallenge} />;\n  }\n\n  return (\n    <div dir=\"rtl\" className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\">\n      {mode === \"menu\" && <MobileMenu />}\n      {mode === \"singleplayer\" && (\n        <MobileSingleplayer \n          onStartChallenge={() => {\n            setShowChallenge(true);\n            startChallenge();\n          }}\n        />\n      )}\n      {mode === \"multiplayer\" && <MobileMultiplayer />}\n    </div>\n  );\n}\n","size_bytes":3039},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":792},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\n// Database is optional - game logic uses in-memory storage\nlet pool: Pool | null = null;\nlet db: ReturnType<typeof drizzle> | null = null;\n\nif (process.env.DATABASE_URL) {\n  pool = new Pool({ connectionString: process.env.DATABASE_URL });\n  db = drizzle({ client: pool, schema });\n  console.log(\"Database connected\");\n} else {\n  console.log(\"DATABASE_URL not set - using in-memory storage for game state\");\n}\n\nexport { pool, db };\n","size_bytes":651},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/GameOverScreen.tsx":{"content":"import { Button } from \"./button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"./card\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { send } from \"@/lib/websocket\";\nimport { useState } from \"react\";\n\nexport function GameOverScreen() {\n  const { multiplayer, setMode, resetMultiplayer, setChallengeStatus, setOpponentId, setOpponentName, setMySecretCode } = useNumberGame();\n  const [showOpponentAttempts, setShowOpponentAttempts] = useState(false);\n\n  const isTie = multiplayer.gameResult === \"tie\";\n  const isWinner = multiplayer.phase === \"won\" && !isTie;\n  \n  // When you win, subtract 1 because the last attempt was correct\n  // When you lose or tie, show full count or subtract 1 for opponent who won\n  let myAttempts = multiplayer.attempts.length;\n  let opponentAttempts = multiplayer.opponentAttempts.length;\n  \n  if (isWinner) {\n    // I won - my last attempt was correct, so subtract 1\n    myAttempts = Math.max(0, myAttempts - 1);\n  } else if (isTie) {\n    // Tie - both our last attempts were correct, subtract 1 from each\n    myAttempts = Math.max(0, myAttempts - 1);\n    opponentAttempts = Math.max(0, opponentAttempts - 1);\n  } else {\n    // I lost - opponent's last attempt was correct, subtract 1 from opponent\n    opponentAttempts = Math.max(0, opponentAttempts - 1);\n  }\n  \n  const timeElapsed = multiplayer.endTime && multiplayer.startTime\n    ? Math.floor((multiplayer.endTime - multiplayer.startTime) / 1000)\n    : 0;\n  const minutes = Math.floor(timeElapsed / 60);\n  const seconds = timeElapsed % 60;\n\n  const handleRematch = () => {\n    if (multiplayer.opponentId) {\n      send({ type: \"request_rematch\", opponentId: multiplayer.opponentId });\n    }\n  };\n\n  if (showOpponentAttempts) {\n    return (\n      <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-80 z-50 overflow-auto\" dir=\"rtl\">\n        <Card className=\"w-full max-w-lg mx-4 my-6 bg-gradient-to-br from-purple-900 to-pink-900 border-2 border-purple-500\">\n          <CardHeader>\n            <CardTitle className=\"text-center text-white text-2xl\">Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®ØµÙ… ğŸ”</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4 max-h-96 overflow-y-auto\">\n            {multiplayer.opponentAttempts.length === 0 ? (\n              <p className=\"text-center text-gray-300\">Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø­Ø§ÙˆÙ„Ø§Øª</p>\n            ) : (\n              multiplayer.opponentAttempts.map((attempt, index) => (\n                <div key={index} className=\"bg-purple-800 bg-opacity-50 p-3 rounded-lg text-right\">\n                  <p className=\"text-purple-200 text-sm\">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© {index + 1}</p>\n                  <p className=\"text-white text-2xl font-bold tracking-widest\">\n                    {attempt.guess.length > 0 ? attempt.guess.map(d => d).reverse().join(\" \") : \"Ù…Ø­Ø§ÙˆÙ„Ø© ÙØ§Ø±ØºØ©\"}\n                  </p>\n                  <div className=\"text-purple-300 text-sm mt-2 space-y-1\">\n                    <p>âœ“ ÙÙŠ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„ØµØ­ÙŠØ­: <span className=\"text-white font-bold\">{attempt.correctPositionCount}</span></p>\n                    <p>âœ“ Ø§Ù„Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ù„ÙƒÙ† Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø®Ø·Ø£: <span className=\"text-white font-bold\">{Math.max(0, attempt.correctCount - attempt.correctPositionCount)}</span></p>\n                  </div>\n                </div>\n              ))\n            )}\n          </CardContent>\n          <div className=\"p-4 border-t border-purple-500\">\n            <Button\n              onClick={() => setShowOpponentAttempts(false)}\n              className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold\"\n            >\n              Ø§Ù„Ø¹ÙˆØ¯Ø©\n            </Button>\n          </div>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-80 z-50 overflow-auto\" dir=\"rtl\">\n      <Card\n        className={`w-full max-w-lg mx-4 my-6 ${\n          isTie\n            ? \"bg-gradient-to-br from-yellow-900 to-yellow-950 border-yellow-600\"\n            : isWinner\n            ? \"bg-gradient-to-br from-green-900 to-green-950 border-green-600\"\n            : \"bg-gradient-to-br from-red-900 to-red-950 border-red-600\"\n        }`}\n      >\n        <CardHeader>\n          <CardTitle className=\"text-center text-white text-3xl\">\n            {isTie ? \"ğŸ¤ ØªØ¹Ø§Ø¯Ù„!\" : isWinner ? \"ğŸ‰ ÙØ²Øª! ğŸ‰\" : \"ğŸ˜” Ø®Ø³Ø±Øª\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"text-center space-y-4\">\n            <div\n              className={`${\n                isTie ? \"bg-yellow-800\" : isWinner ? \"bg-green-800\" : \"bg-red-800\"\n              } bg-opacity-50 p-4 rounded-lg`}\n            >\n              <p\n                className={`${\n                  isTie ? \"text-yellow-200\" : isWinner ? \"text-green-200\" : \"text-red-200\"\n                } text-lg`}\n              >\n                Ø¹Ø¯Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ\n              </p>\n              <p className=\"text-white text-4xl font-bold\">{myAttempts}</p>\n            </div>\n\n            {timeElapsed > 0 && (\n              <div\n                className={`${\n                  isTie ? \"bg-yellow-800\" : isWinner ? \"bg-green-800\" : \"bg-red-800\"\n                } bg-opacity-50 p-4 rounded-lg`}\n              >\n                <p\n                  className={`${\n                    isTie ? \"text-yellow-200\" : isWinner ? \"text-green-200\" : \"text-red-200\"\n                  } text-lg`}\n                >\n                  Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚\n                </p>\n                <p className=\"text-white text-4xl font-bold\">\n                  {minutes > 0 ? `${minutes}:${seconds.toString().padStart(2, \"0\")}` : `${seconds}s`}\n                </p>\n              </div>\n            )}\n\n            <div\n              className={`${\n                isTie ? \"bg-yellow-800\" : isWinner ? \"bg-green-800\" : \"bg-red-800\"\n              } bg-opacity-50 p-4 rounded-lg`}\n            >\n              <p\n                className={`${\n                  isTie ? \"text-yellow-200\" : isWinner ? \"text-green-200\" : \"text-red-200\"\n                } text-lg`}\n              >\n                Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„ØµØ­ÙŠØ­ ÙƒØ§Ù†\n              </p>\n              <p className=\"text-white text-4xl font-bold tracking-wider\">\n                {multiplayer.opponentSecretCode.length > 0 \n                  ? [...multiplayer.opponentSecretCode].reverse().join(\" \") \n                  : \"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ\"}\n              </p>\n            </div>\n\n            <div\n              className={`${\n                isTie ? \"bg-yellow-800\" : isWinner ? \"bg-green-800\" : \"bg-red-800\"\n              } bg-opacity-50 p-4 rounded-lg`}\n            >\n              <p\n                className={`${\n                  isTie ? \"text-yellow-200\" : isWinner ? \"text-green-200\" : \"text-red-200\"\n                } text-lg`}\n              >\n                Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®ØµÙ…\n              </p>\n              <p className=\"text-white text-4xl font-bold\">{opponentAttempts}</p>\n            </div>\n\n            <Button\n              onClick={() => setShowOpponentAttempts(true)}\n              className={`w-full font-bold ${\n                isTie ? \"bg-yellow-600 hover:bg-yellow-700\" : isWinner ? \"bg-green-600 hover:bg-green-700\" : \"bg-red-600 hover:bg-red-700\"\n              } text-white`}\n            >\n              ğŸ‘€ Ø¹Ø±Ø¶ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®ØµÙ… Ø¨Ø§Ù„ØªÙØµÙŠÙ„\n            </Button>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Button\n              onClick={handleRematch}\n              className={`w-full ${\n                isTie\n                  ? \"bg-yellow-600 hover:bg-yellow-700\"\n                  : isWinner\n                  ? \"bg-green-600 hover:bg-green-700\"\n                  : \"bg-red-600 hover:bg-red-700\"\n              } text-white font-semibold`}\n              size=\"lg\"\n            >\n              <span className=\"mr-2\">ğŸ”„</span>\n              Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©\n            </Button>\n\n            <Button\n              onClick={() => {\n                setChallengeStatus(\"none\");\n                setOpponentId(null);\n                setOpponentName(\"\");\n                setMySecretCode([]);\n                resetMultiplayer();\n              }}\n              className={`w-full ${\n                isTie\n                  ? \"bg-yellow-600 hover:bg-yellow-700\"\n                  : isWinner\n                  ? \"bg-green-600 hover:bg-green-700\"\n                  : \"bg-red-600 hover:bg-red-700\"\n              } text-white`}\n              size=\"lg\"\n            >\n              Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØºØ±ÙØ©\n            </Button>\n\n            <Button\n              onClick={() => {\n                const { resetMultiplayer } = useNumberGame.getState();\n                resetMultiplayer();\n                setMode(\"menu\");\n                setTimeout(() => {\n                  window.location.reload();\n                }, 300);\n              }}\n              className={`w-full ${\n                isTie\n                  ? \"bg-yellow-700 hover:bg-yellow-800\"\n                  : isWinner\n                  ? \"bg-green-700 hover:bg-green-800\"\n                  : \"bg-red-700 hover:bg-red-800\"\n              } text-white`}\n              size=\"lg\"\n            >\n              Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":9495},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/game/FirstPersonControls.tsx":{"content":"import { useRef, useEffect } from \"react\";\nimport { useThree, useFrame } from \"@react-three/fiber\";\nimport { useKeyboardControls } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\n\nexport enum Controls {\n  forward = \"forward\",\n  back = \"back\",\n  left = \"left\",\n  right = \"right\",\n}\n\nexport function FirstPersonControls() {\n  const { camera, gl } = useThree();\n  const isLocked = useRef(false);\n  const firstMoveAfterLock = useRef(false);\n  const velocity = useRef(new THREE.Vector3());\n  const direction = useRef(new THREE.Vector3());\n  const euler = useRef(new THREE.Euler(0, 0, 0, 'YXZ'));\n  const initialLook = useRef(false);\n  \n  const { singleplayer, multiplayer, mode } = useNumberGame();\n  const [, getKeys] = useKeyboardControls<Controls>();\n\n  useEffect(() => {\n    const canvas = gl.domElement;\n    if (!canvas) return;\n\n    const handleMouseMove = (e: MouseEvent) => {\n      // Double check pointer lock is still active\n      if (!isLocked.current || !document.pointerLockElement) return;\n\n      // Skip the very first movement after lock to avoid large jump\n      if (firstMoveAfterLock.current) {\n        firstMoveAfterLock.current = false;\n        // The pointer lock API automatically centers the cursor\n        // We skip this first movement event to prevent jumping\n        return;\n      }\n\n      const movementX = e.movementX || (e as any).mozMovementX || 0;\n      const movementY = e.movementY || (e as any).mozMovementY || 0;\n\n      // Get current euler angles\n      euler.current.setFromQuaternion(camera.quaternion);\n      euler.current.order = 'YXZ';\n\n      // Update pitch (vertical rotation, clamped)\n      euler.current.x -= movementY * 0.002;\n      euler.current.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, euler.current.x));\n\n      // Update yaw (horizontal rotation, unclamped for free rotation)\n      euler.current.y -= movementX * 0.002;\n\n      // Apply the rotation to camera\n      camera.quaternion.setFromEuler(euler.current);\n    };\n\n    const handlePointerLockChange = () => {\n      isLocked.current = document.pointerLockElement === canvas;\n      if (isLocked.current) {\n        firstMoveAfterLock.current = true;\n        \n        // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„ØªÙ†Ø¸Ø± Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø£Ø²Ø±Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„\n        if (!initialLook.current) {\n          initialLook.current = true;\n          // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù„Ù†Ø¸Ø± Ù„Ù„Ø£Ù…Ø§Ù… Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ù„Ø£Ø³ÙÙ„ (Ù†Ø­Ùˆ Ø§Ù„Ø£Ø²Ø±Ø§Ø±)\n          euler.current.set(-0.1, 0, 0, 'YXZ');\n          camera.quaternion.setFromEuler(euler.current);\n        }\n        \n        console.log('Pointer lock activated - cursor automatically centered');\n      } else {\n        console.log('Pointer lock released');\n      }\n    };\n\n    const handlePointerLockError = () => {\n      console.error('Pointer lock error');\n      isLocked.current = false;\n    };\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        // Only exit pointer lock if it's actually locked\n        if (document.pointerLockElement) {\n          document.exitPointerLock?.();\n        }\n      }\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('pointerlockchange', handlePointerLockChange);\n    document.addEventListener('pointerlockerror', handlePointerLockError);\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('pointerlockchange', handlePointerLockChange);\n      document.removeEventListener('pointerlockerror', handlePointerLockError);\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [camera, gl]);\n\n  // Ø¹Ù†Ø¯Ù…Ø§ ØªÙ†ØªÙ‡ÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø© (ÙÙˆØ² Ø£Ùˆ Ø®Ø³Ø§Ø±Ø©) Ù†Ø³Ø±Ø­ Ø§Ù„Ù…Ø§ÙˆØ³ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹\n  useEffect(() => {\n    const canvas = gl.domElement;\n    if (!canvas) return;\n\n    const currentPhase = mode === \"singleplayer\" ? singleplayer.phase : multiplayer.phase;\n    \n    if ((currentPhase === \"won\" || currentPhase === \"lost\") && document.pointerLockElement) {\n      document.exitPointerLock?.();\n    }\n  }, [singleplayer.phase, multiplayer.phase, mode, gl]);\n\n  useFrame((state, delta) => {\n    if (!isLocked.current) return;\n\n    const { forward, back, left, right } = getKeys();\n    const speed = 6;\n    \n    direction.current.set(0, 0, 0);\n\n    if (forward) direction.current.z -= 1;\n    if (back) direction.current.z += 1;\n    if (left) direction.current.x -= 1;\n    if (right) direction.current.x += 1;\n\n    if (direction.current.length() > 0) {\n      direction.current.normalize();\n      direction.current.applyQuaternion(camera.quaternion);\n      direction.current.y = 0;\n      direction.current.normalize();\n\n      velocity.current.copy(direction.current).multiplyScalar(speed * delta);\n\n      const newPosition = camera.position.clone().add(velocity.current);\n      \n      const roomBounds = 12;\n      newPosition.x = Math.max(-roomBounds, Math.min(roomBounds, newPosition.x));\n      newPosition.z = Math.max(-roomBounds, Math.min(roomBounds, newPosition.z));\n      newPosition.y = 1.6;\n      \n      camera.position.copy(newPosition);\n    }\n  });\n\n  return null;\n}\n","size_bytes":5272},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: cn(\n          \"relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md\",\n          props.mode === \"range\"\n            ? \"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md\"\n            : \"[&:has([aria-selected])]:rounded-md\"\n        ),\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-8 w-8 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_start: \"day-range-start\",\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2935},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4132},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { WebSocketServer, WebSocket } from \"ws\";\nimport { storage } from \"./storage\";\n\ninterface Player {\n  id: string;\n  name: string;\n  ws: WebSocket;\n  roomId: string;\n  disconnectTime?: number;\n  timeoutHandle?: NodeJS.Timeout;\n}\n\ninterface PlayerAttempt {\n  guess: number[];\n  correctCount: number;\n  correctPositionCount: number;\n  timestamp: number;\n}\n\ninterface PlayerGameData {\n  playerId: string;\n  playerName: string;\n  attempts: PlayerAttempt[];\n  startTime: number;\n  endTime: number | null;\n  won: boolean;\n  finished: boolean;\n}\n\ninterface RematchVote {\n  playerId: string;\n  accepted: boolean;\n}\n\ninterface GameSession {\n  sharedSecret: number[];\n  status: \"waiting\" | \"playing\" | \"finished\";\n  players: Map<string, PlayerGameData>;\n  startTime: number;\n  endTime: number | null;\n  gameTimerHandle?: NodeJS.Timeout; // 5-minute game timer\n  lastResults?: {\n    winners: any[];\n    losers: any[];\n    stillPlaying: any[];\n    reason: string;\n  }; // Store latest results for reconnecting players\n  rematchState: {\n    requested: boolean;\n    votes: Map<string, boolean>; // playerId -> accepted\n    countdown: number | null;\n    countdownHandle?: NodeJS.Timeout;\n  };\n}\n\ninterface Room {\n  id: string;\n  hostId: string;\n  players: Player[];\n  disconnectedPlayers: Map<string, { player: Player; disconnectTime: number; timeoutHandle: NodeJS.Timeout }>;\n  game: GameSession | null;\n  settings: { numDigits: number; maxAttempts: number };\n  roomTimeoutHandle?: NodeJS.Timeout;\n}\n\nconst rooms = new Map<string, Room>();\nconst players = new Map<WebSocket, Player>();\n\nfunction generateRoomId(): string {\n  return Math.random().toString(36).substring(2, 8).toUpperCase();\n}\n\nfunction generatePlayerId(): string {\n  return Math.random().toString(36).substring(2, 15);\n}\n\nfunction generateSecretCode(numDigits: number): number[] {\n  return Array.from({ length: numDigits }, () => Math.floor(Math.random() * 10));\n}\n\nfunction checkGuess(secret: number[], guess: number[]): { correctCount: number; correctPositionCount: number } {\n  let correctCount = 0;\n  let correctPositionCount = 0;\n\n  const secretCopy = [...secret];\n  const guessCopy = [...guess];\n  const length = Math.min(secret.length, guess.length);\n\n  for (let i = 0; i < length; i++) {\n    if (guessCopy[i] === secretCopy[i]) {\n      correctPositionCount++;\n      secretCopy[i] = -1;\n      guessCopy[i] = -2;\n    }\n  }\n\n  for (let i = 0; i < length; i++) {\n    if (guessCopy[i] !== -2) {\n      const index = secretCopy.indexOf(guessCopy[i]);\n      if (index !== -1) {\n        correctCount++;\n        secretCopy[index] = -1;\n      }\n    }\n  }\n\n  correctCount += correctPositionCount;\n\n  return { correctCount, correctPositionCount };\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  const httpServer = createServer(app);\n  const wss = new WebSocketServer({ noServer: true });\n\n  httpServer.on(\"upgrade\", (request, socket, head) => {\n    const pathname = new URL(request.url!, `http://${request.headers.host}`).pathname;\n    \n    if (pathname === \"/game\") {\n      wss.handleUpgrade(request, socket, head, (ws) => {\n        wss.emit(\"connection\", ws, request);\n      });\n    }\n  });\n\n  wss.on(\"connection\", (ws: WebSocket) => {\n    console.log(\"New game WebSocket connection\");\n\n    ws.on(\"message\", (data: Buffer) => {\n      try {\n        const message = JSON.parse(data.toString());\n        handleMessage(ws, message);\n      } catch (error) {\n        console.error(\"Error parsing message:\", error);\n      }\n    });\n\n    ws.on(\"close\", () => {\n      const player = players.get(ws);\n      if (player) {\n        const room = rooms.get(player.roomId);\n        if (room) {\n          // Remove from active players\n          room.players = room.players.filter((p) => p.id !== player.id);\n          \n          // If game is finished, delete the player immediately (auto logout from results screen)\n          if (room.game && room.game.status === \"finished\") {\n            // Just remove the player, don't add to disconnected list\n            console.log(`Player ${player.name} disconnected from finished game - auto logout`);\n            \n            // Delete room if it's completely empty\n            if (room.players.length === 0 && room.disconnectedPlayers.size === 0) {\n              if (room.game?.rematchState.countdownHandle) {\n                clearInterval(room.game.rematchState.countdownHandle);\n              }\n              rooms.delete(player.roomId);\n              console.log(`Room ${player.roomId} deleted (all players left finished game)`);\n            }\n          } else {\n            // If game is active, keep the disconnected player for 5 minutes\n            const disconnectTime = Date.now();\n            player.disconnectTime = disconnectTime;\n            \n            // Add to disconnected players with 5-minute timeout\n            const timeoutHandle = setTimeout(() => {\n              const disconnected = room.disconnectedPlayers.get(player.id);\n              if (disconnected) {\n                room.disconnectedPlayers.delete(player.id);\n                \n                // If player is in active game, mark them as quit\n                if (room.game && room.game.status === \"playing\") {\n                  const playerData = room.game.players.get(player.id);\n                  if (playerData && !playerData.finished) {\n                    playerData.finished = true;\n                    playerData.endTime = Date.now();\n                    \n                    // Notify others player timed out\n                    broadcastToRoom(room, {\n                      type: \"player_timeout\",\n                      playerId: player.id,\n                      playerName: player.name,\n                    });\n                    \n                    checkGameEnd(room);\n                  }\n                }\n              }\n              \n              // Check if room should be deleted after timeout\n              checkAndDeleteRoomIfNeeded(room);\n            }, 5 * 60 * 1000); // 5 minutes\n            \n            room.disconnectedPlayers.set(player.id, { player, disconnectTime, timeoutHandle });\n          }\n          \n          // Notify others that player disconnected\n          broadcastToRoom(room, {\n            type: \"player_disconnected\",\n            playerId: player.id,\n            playerName: player.name,\n          });\n          \n          // Check if room should be deleted (1 player left or empty)\n          if (!checkAndDeleteRoomIfNeeded(room)) {\n            // Room still has enough players\n            // If host left, assign new host\n            if (room.hostId === player.id && room.players.length > 0) {\n              room.hostId = room.players[0].id;\n              broadcastToRoom(room, {\n                type: \"host_changed\",\n                newHostId: room.hostId,\n              });\n            }\n            \n            broadcastToRoom(room, {\n              type: \"players_updated\",\n              players: room.players.map((p) => ({ id: p.id, name: p.name })),\n              hostId: room.hostId,\n            });\n          }\n        }\n        players.delete(ws);\n      }\n    });\n  });\n\n  // Check if room should be deleted (only 1 player or empty)\n  function checkAndDeleteRoomIfNeeded(room: Room): boolean {\n    const totalPlayers = room.players.length + room.disconnectedPlayers.size;\n    \n    // Delete room if only 1 player left (can't play multiplayer alone)\n    // OR if room is completely empty\n    if (totalPlayers <= 1) {\n      // Kick the last remaining player if any\n      if (room.players.length === 1) {\n        const lastPlayer = room.players[0];\n        send(lastPlayer.ws, {\n          type: \"room_deleted\",\n          message: \"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ØºØ§Ø¯Ø±ÙˆØ§ Ø§Ù„ØºØ±ÙØ©\",\n        });\n        console.log(`Kicking last player ${lastPlayer.name} from room ${room.id}`);\n      }\n      \n      // Clean up all timers\n      if (room.game?.rematchState.countdownHandle) {\n        clearInterval(room.game.rematchState.countdownHandle);\n      }\n      if (room.game?.gameTimerHandle) {\n        clearTimeout(room.game.gameTimerHandle);\n      }\n      \n      // Clear all disconnected player timeouts\n      room.disconnectedPlayers.forEach((disconnected) => {\n        clearTimeout(disconnected.timeoutHandle);\n      });\n      \n      rooms.delete(room.id);\n      console.log(`Room ${room.id} deleted (insufficient players: ${totalPlayers})`);\n      return true;\n    }\n    \n    return false;\n  }\n\n  // Send current game results to ALL finished players\n  function sendResultsToAllFinishedPlayers(room: Room, reason: string = \"player_finished\") {\n    if (!room.game) return;\n    \n    const results = calculateGameResults(room);\n    \n    // Store results for reconnecting players\n    room.game.lastResults = {\n      winners: results.winners,\n      losers: results.losers,\n      stillPlaying: results.stillPlaying,\n      reason: reason,\n    };\n    \n    // Send updated results to ALL connected players who have finished\n    room.players.forEach((player) => {\n      const playerData = room.game!.players.get(player.id);\n      if (playerData && playerData.finished) {\n        send(player.ws, {\n          type: \"game_results\",\n          winners: results.winners,\n          losers: results.losers,\n          stillPlaying: results.stillPlaying,\n          sharedSecret: room.game!.sharedSecret,\n          reason: reason,\n        });\n      }\n    });\n  }\n\n  function checkGameEnd(room: Room) {\n    if (!room.game || room.game.status !== \"playing\") return;\n    \n    const allGamePlayers = Array.from(room.game.players.values());\n    const allPlayersFinished = allGamePlayers.every(p => p.finished);\n    \n    // Only end game when ALL players have finished (won, lost, or timed out)\n    // Do NOT auto-win the last remaining player - they must play until they finish naturally\n    if (allPlayersFinished && room.game) {\n      room.game.status = \"finished\";\n      room.game.endTime = Date.now();\n      \n      // Clear the game timer since game is ending\n      if (room.game.gameTimerHandle) {\n        clearTimeout(room.game.gameTimerHandle);\n        room.game.gameTimerHandle = undefined;\n      }\n      \n      // Send final results to ALL finished players (everyone at this point)\n      sendResultsToAllFinishedPlayers(room, \"all_finished\");\n    }\n  }\n\n  function calculateGameResults(room: Room) {\n    if (!room.game) return { winners: [], losers: [], stillPlaying: [] };\n    \n    const winners: any[] = [];\n    const losers: any[] = [];\n    const stillPlaying: any[] = [];\n    \n    room.game.players.forEach((playerData) => {\n      const endTime = playerData.endTime || Date.now();\n      const playerInfo = {\n        playerId: playerData.playerId,\n        playerName: playerData.playerName,\n        attempts: playerData.attempts.length,\n        duration: endTime - playerData.startTime,\n        attemptsDetails: playerData.attempts,\n      };\n      \n      if (playerData.won) {\n        winners.push(playerInfo);\n      } else if (playerData.finished) {\n        losers.push(playerInfo);\n      } else {\n        stillPlaying.push(playerInfo);\n      }\n    });\n    \n    // Sort winners: first by attempts (ascending), then by duration (ascending)\n    winners.sort((a, b) => {\n      if (a.attempts !== b.attempts) {\n        return a.attempts - b.attempts;\n      }\n      return a.duration - b.duration;\n    });\n    \n    // Sort losers by duration (ascending) - those who lasted longer are ranked better among losers\n    losers.sort((a, b) => b.duration - a.duration);\n    \n    // Assign ranks to winners\n    winners.forEach((winner, index) => {\n      winner.rank = index + 1;\n    });\n    \n    return { winners, losers, stillPlaying };\n  }\n\n  function handleMessage(ws: WebSocket, message: any) {\n    switch (message.type) {\n      case \"create_room\": {\n        const roomId = generateRoomId();\n        const playerId = generatePlayerId();\n        const player: Player = {\n          id: playerId,\n          name: message.playerName,\n          ws,\n          roomId,\n        };\n\n        const room: Room = {\n          id: roomId,\n          hostId: playerId,\n          players: [player],\n          disconnectedPlayers: new Map(),\n          game: null,\n          settings: { numDigits: 4, maxAttempts: 20 },\n        };\n\n        rooms.set(roomId, room);\n        players.set(ws, player);\n\n        send(ws, {\n          type: \"room_created\",\n          roomId,\n          playerId,\n          hostId: playerId,\n        });\n        break;\n      }\n\n      case \"join_room\": {\n        const room = rooms.get(message.roomId);\n        \n        // Room doesn't exist\n        if (!room) {\n          send(ws, { type: \"error\", message: \"Ø§Ù„ØºØ±ÙØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© - Ù„Ø±Ø¨Ù…Ø§ ØªÙ… Ø­Ø°ÙÙ‡Ø§\" });\n          return;\n        }\n        \n        // Check if room is full\n        if (room.players.length >= 10) {\n          send(ws, { type: \"error\", message: \"Ø§Ù„ØºØ±ÙØ© Ù…Ù…ØªÙ„Ø¦Ø©\" });\n          return;\n        }\n        \n        // Don't allow joining if game is in progress\n        if (room.game && room.game.status === \"playing\") {\n          send(ws, { type: \"error\", message: \"Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¢Ù† - Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…\" });\n          return;\n        }\n        \n        // Don't allow joining if game is finished (results screen)\n        if (room.game && room.game.status === \"finished\") {\n          send(ws, { type: \"error\", message: \"Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø© - ÙŠØ±Ø¬Ù‰ Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©\" });\n          return;\n        }\n        \n        // Proceed with join only if conditions are met\n        if (room && room.players.length < 10) {\n          \n          const playerId = generatePlayerId();\n          const player: Player = {\n            id: playerId,\n            name: message.playerName,\n            ws,\n            roomId: room.id,\n          };\n\n          if (!room.disconnectedPlayers) {\n            room.disconnectedPlayers = new Map();\n          }\n\n          room.players.push(player);\n          players.set(ws, player);\n\n          send(ws, {\n            type: \"room_joined\",\n            roomId: room.id,\n            playerId,\n            hostId: room.hostId,\n            players: room.players.map((p) => ({ id: p.id, name: p.name })),\n          });\n\n          send(ws, {\n            type: \"settings_updated\",\n            settings: room.settings,\n          });\n\n          broadcastToRoom(room, {\n            type: \"players_updated\",\n            players: room.players.map((p) => ({ id: p.id, name: p.name })),\n            hostId: room.hostId,\n          });\n        } else {\n          send(ws, { type: \"error\", message: \"Room not found or full\" });\n        }\n        break;\n      }\n\n      case \"update_settings\": {\n        const player = players.get(ws);\n        if (!player) return;\n\n        const room = rooms.get(player.roomId);\n        if (!room) return;\n\n        // Only host can update settings\n        if (room.hostId !== player.id) {\n          send(ws, { type: \"error\", message: \"Only host can update settings\" });\n          return;\n        }\n\n        // Can't update during active game\n        if (room.game && room.game.status === \"playing\") {\n          send(ws, { type: \"error\", message: \"Cannot update settings during game\" });\n          return;\n        }\n\n        room.settings = message.settings;\n\n        broadcastToRoom(room, {\n          type: \"settings_updated\",\n          settings: message.settings,\n        });\n        break;\n      }\n\n      case \"start_game\": {\n        const player = players.get(ws);\n        if (!player) return;\n\n        const room = rooms.get(player.roomId);\n        if (!room) return;\n\n        // Only host can start game\n        if (room.hostId !== player.id) {\n          send(ws, { type: \"error\", message: \"Only host can start game\" });\n          return;\n        }\n\n        // Need at least 2 players\n        if (room.players.length < 2) {\n          send(ws, { type: \"error\", message: \"Need at least 2 players to start\" });\n          return;\n        }\n\n        // Generate shared secret\n        const sharedSecret = generateSecretCode(room.settings.numDigits);\n        \n        // Initialize game session\n        const game: GameSession = {\n          sharedSecret,\n          status: \"playing\",\n          players: new Map(),\n          startTime: Date.now(),\n          endTime: null,\n          rematchState: {\n            requested: false,\n            votes: new Map(),\n            countdown: null,\n          },\n        };\n\n        // Initialize player data\n        room.players.forEach((p) => {\n          game.players.set(p.id, {\n            playerId: p.id,\n            playerName: p.name,\n            attempts: [],\n            startTime: Date.now(),\n            endTime: null,\n            won: false,\n            finished: false,\n          });\n        });\n\n        // Start 5-minute game timer\n        const gameTimerHandle = setTimeout(() => {\n          console.log(`5-minute timer expired for room ${room.id}`);\n          if (room.game && room.game.status === \"playing\") {\n            // Mark all unfinished players as losers\n            room.game.players.forEach((playerData) => {\n              if (!playerData.finished) {\n                playerData.finished = true;\n                playerData.endTime = Date.now();\n                playerData.won = false;\n              }\n            });\n            \n            // End the game first\n            room.game.status = \"finished\";\n            room.game.endTime = Date.now();\n            \n            // Clear the timer handle\n            room.game.gameTimerHandle = undefined;\n            \n            // Send final results to ALL finished players (everyone at this point)\n            sendResultsToAllFinishedPlayers(room, \"time_expired\");\n          }\n        }, 5 * 60 * 1000); // 5 minutes\n\n        game.gameTimerHandle = gameTimerHandle;\n        room.game = game;\n\n        // Broadcast game start to all players\n        broadcastToRoom(room, {\n          type: \"game_started\",\n          sharedSecret, // All players get the same secret\n          settings: room.settings,\n        });\n        break;\n      }\n\n      case \"submit_guess\": {\n        const player = players.get(ws);\n        if (!player) return;\n\n        const room = rooms.get(player.roomId);\n        if (!room || !room.game) return;\n\n        const playerData = room.game.players.get(player.id);\n        if (!playerData) return;\n\n        // Check if player already finished\n        if (playerData.finished) {\n          send(ws, { type: \"error\", message: \"You have already finished\" });\n          return;\n        }\n\n        // Check if max attempts already reached (shouldn't happen but safety check)\n        if (playerData.attempts.length >= room.settings.maxAttempts) {\n          send(ws, { type: \"error\", message: \"Ù„Ù‚Ø¯ Ø§Ø³ØªÙ†ÙØ°Øª Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ Ø¨Ø§Ù„ÙØ¹Ù„\" });\n          return;\n        }\n\n        const { correctCount, correctPositionCount } = checkGuess(room.game.sharedSecret, message.guess);\n        \n        const attempt: PlayerAttempt = {\n          guess: message.guess,\n          correctCount,\n          correctPositionCount,\n          timestamp: Date.now(),\n        };\n\n        playerData.attempts.push(attempt);\n\n        const won = correctPositionCount === room.settings.numDigits;\n        const isLastAttempt = playerData.attempts.length >= room.settings.maxAttempts;\n        \n        // Mark as finished if won OR if this was the last attempt and didn't win\n        if (won) {\n          playerData.won = true;\n          playerData.finished = true;\n          playerData.endTime = Date.now();\n        } else if (isLastAttempt) {\n          // Out of attempts and didn't win - mark as loser\n          playerData.won = false;\n          playerData.finished = true;\n          playerData.endTime = Date.now();\n        }\n\n        // Send result to the player\n        send(ws, {\n          type: \"guess_result\",\n          guess: message.guess,\n          correctCount,\n          correctPositionCount,\n          won,\n          attemptNumber: playerData.attempts.length,\n          isLastAttempt,\n        });\n\n        // Broadcast to others that this player made an attempt\n        broadcastToRoom(room, {\n          type: \"player_attempt\",\n          playerId: player.id,\n          playerName: player.name,\n          attemptNumber: playerData.attempts.length,\n          won,\n        }, ws);\n\n        // If player just finished (won or ran out of attempts), send updated results\n        if (playerData.finished) {\n          if (isLastAttempt && !won) {\n            // Notify player they're out of attempts\n            send(ws, {\n              type: \"max_attempts_reached\",\n              message: \"Ù„Ù‚Ø¯ Ø§Ø³ØªÙ†ÙØ°Øª Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ\",\n            });\n          }\n          \n          sendResultsToAllFinishedPlayers(room, \"player_finished\");\n          // Check if all players finished for final cleanup\n          checkGameEnd(room);\n        }\n        break;\n      }\n\n      case \"request_attempt_details\": {\n        const player = players.get(ws);\n        if (!player) return;\n\n        const room = rooms.get(player.roomId);\n        if (!room || !room.game) return;\n\n        const targetPlayerData = room.game.players.get(message.targetPlayerId);\n        if (!targetPlayerData) return;\n\n        send(ws, {\n          type: \"player_details\",\n          playerId: targetPlayerData.playerId,\n          playerName: targetPlayerData.playerName,\n          attempts: targetPlayerData.attempts,\n          duration: targetPlayerData.endTime ? targetPlayerData.endTime - targetPlayerData.startTime : 0,\n        });\n        break;\n      }\n\n      case \"request_rematch\": {\n        const player = players.get(ws);\n        if (!player) return;\n\n        const room = rooms.get(player.roomId);\n        if (!room || !room.game) return;\n\n        // Game must be finished\n        if (room.game.status !== \"finished\") {\n          send(ws, { type: \"error\", message: \"Game is not finished yet\" });\n          return;\n        }\n\n        // Check if rematch already requested\n        if (room.game.rematchState.requested) {\n          send(ws, { type: \"error\", message: \"Rematch already requested\" });\n          return;\n        }\n\n        // Initialize rematch state\n        room.game.rematchState.requested = true;\n        room.game.rematchState.votes.clear();\n        room.game.rematchState.countdown = 10;\n        \n        // Player who requested automatically votes yes\n        room.game.rematchState.votes.set(player.id, true);\n\n        // Broadcast rematch request with current votes\n        broadcastToRoom(room, {\n          type: \"rematch_requested\",\n          countdown: 10,\n          requestedBy: player.name,\n          votes: Array.from(room.game.rematchState.votes.entries()).map(([playerId, accepted]) => ({\n            playerId,\n            accepted,\n          })),\n        });\n\n        // Start countdown\n        const countdownHandle = setInterval(() => {\n          if (!room.game || !room.game.rematchState.countdown) {\n            clearInterval(countdownHandle);\n            return;\n          }\n\n          room.game.rematchState.countdown--;\n\n          if (room.game.rematchState.countdown <= 0) {\n            clearInterval(countdownHandle);\n            \n            // Process rematch\n            const acceptedPlayers = Array.from(room.game.rematchState.votes.entries())\n              .filter(([_, accepted]) => accepted)\n              .map(([playerId, _]) => playerId);\n            \n            // Need at least 2 players who accepted\n            if (acceptedPlayers.length >= 2) {\n              // Remove players who didn't accept\n              const rejectedPlayers = room.players.filter(\n                p => !acceptedPlayers.includes(p.id) && p.id !== room.hostId\n              );\n              \n              rejectedPlayers.forEach(p => {\n                send(p.ws, {\n                  type: \"kicked_from_room\",\n                  message: \"Ù„Ù… ØªÙ‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©\",\n                });\n              });\n              \n              room.players = room.players.filter(p => \n                acceptedPlayers.includes(p.id) || p.id === room.hostId\n              );\n              \n              // Reset game\n              room.game = null;\n              \n              broadcastToRoom(room, {\n                type: \"rematch_starting\",\n                players: room.players.map((p) => ({ id: p.id, name: p.name })),\n              });\n            } else {\n              broadcastToRoom(room, {\n                type: \"rematch_cancelled\",\n                message: \"Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙƒØ§ÙÙŠÙŠÙ†\",\n              });\n              room.game.rematchState.requested = false;\n            }\n          } else {\n            broadcastToRoom(room, {\n              type: \"rematch_countdown\",\n              countdown: room.game.rematchState.countdown,\n              votes: Array.from(room.game.rematchState.votes.entries()).map(([playerId, accepted]) => ({\n                playerId,\n                accepted,\n              })),\n            });\n          }\n        }, 1000);\n\n        room.game.rematchState.countdownHandle = countdownHandle;\n        break;\n      }\n\n      case \"rematch_vote\": {\n        const player = players.get(ws);\n        if (!player) return;\n\n        const room = rooms.get(player.roomId);\n        if (!room || !room.game) return;\n\n        if (!room.game.rematchState.requested) {\n          send(ws, { type: \"error\", message: \"No rematch requested\" });\n          return;\n        }\n\n        room.game.rematchState.votes.set(player.id, message.accepted);\n\n        // Broadcast updated votes\n        broadcastToRoom(room, {\n          type: \"rematch_vote_update\",\n          playerId: player.id,\n          accepted: message.accepted,\n          votes: Array.from(room.game.rematchState.votes.entries()).map(([playerId, accepted]) => ({\n            playerId,\n            accepted,\n          })),\n        });\n\n        // Check if we have at least 2 acceptances - if so, start immediately\n        const acceptedPlayers = Array.from(room.game.rematchState.votes.entries())\n          .filter(([_, accepted]) => accepted)\n          .map(([playerId, _]) => playerId);\n\n        if (acceptedPlayers.length >= 2) {\n          // Clear the countdown timer\n          if (room.game.rematchState.countdownHandle) {\n            clearInterval(room.game.rematchState.countdownHandle);\n          }\n\n          // Remove players who didn't accept\n          const rejectedPlayers = room.players.filter(\n            p => !acceptedPlayers.includes(p.id) && p.id !== room.hostId\n          );\n          \n          rejectedPlayers.forEach(p => {\n            send(p.ws, {\n              type: \"kicked_from_room\",\n              message: \"Ù„Ù… ØªÙ‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©\",\n            });\n          });\n          \n          room.players = room.players.filter(p => \n            acceptedPlayers.includes(p.id) || p.id === room.hostId\n          );\n          \n          // Remove players from disconnected as well\n          rejectedPlayers.forEach(p => {\n            room.disconnectedPlayers?.delete(p.id);\n          });\n          \n          // Reset game\n          room.game = null;\n          \n          // Notify accepted players that rematch is starting\n          broadcastToRoom(room, {\n            type: \"rematch_starting\",\n            players: room.players.map((p) => ({ id: p.id, name: p.name })),\n          });\n          \n          // Start new game automatically\n          const sharedSecret = generateSecretCode(room.settings.numDigits);\n          const game: GameSession = {\n            sharedSecret,\n            status: \"playing\",\n            startTime: Date.now(),\n            endTime: null,\n            players: new Map(),\n            lastResults: undefined,\n            gameTimerHandle: undefined,\n            rematchState: {\n              requested: false,\n              votes: new Map(),\n              countdown: null,\n            },\n          };\n\n          // Initialize player data\n          room.players.forEach((p) => {\n            game.players.set(p.id, {\n              playerId: p.id,\n              playerName: p.name,\n              attempts: [],\n              startTime: Date.now(),\n              endTime: null,\n              won: false,\n              finished: false,\n            });\n          });\n\n          // Start 5-minute game timer\n          const gameTimerHandle = setTimeout(() => {\n            console.log(`5-minute timer expired for room ${room.id}`);\n            if (room.game && room.game.status === \"playing\") {\n              room.game.players.forEach((playerData) => {\n                if (!playerData.finished) {\n                  playerData.finished = true;\n                  playerData.endTime = Date.now();\n                  playerData.won = false;\n                }\n              });\n              \n              room.game.status = \"finished\";\n              room.game.endTime = Date.now();\n              room.game.gameTimerHandle = undefined;\n              \n              sendResultsToAllFinishedPlayers(room, \"time_expired\");\n            }\n          }, 5 * 60 * 1000);\n\n          game.gameTimerHandle = gameTimerHandle;\n          room.game = game;\n\n          // Broadcast game start\n          broadcastToRoom(room, {\n            type: \"game_started\",\n            sharedSecret,\n            settings: room.settings,\n          });\n        }\n        break;\n      }\n\n      case \"reconnect\": {\n        const room = rooms.get(message.roomId);\n        if (!room) {\n          send(ws, { type: \"error\", message: \"Room not found\" });\n          return;\n        }\n        \n        const disconnected = room.disconnectedPlayers?.get(message.playerId);\n        if (!disconnected) {\n          send(ws, { type: \"error\", message: \"Player session not found or expired\" });\n          return;\n        }\n        \n        // Clear the timeout since player reconnected\n        clearTimeout(disconnected.timeoutHandle);\n        room.disconnectedPlayers.delete(message.playerId);\n        \n        // Restore player to active\n        const reconnectedPlayer: Player = {\n          id: message.playerId,\n          name: message.playerName,\n          ws,\n          roomId: room.id,\n        };\n        \n        room.players.push(reconnectedPlayer);\n        players.set(ws, reconnectedPlayer);\n        \n        console.log(`Player ${message.playerName} reconnected to room ${room.id}`);\n        \n        send(ws, {\n          type: \"room_rejoined\",\n          roomId: room.id,\n          playerId: message.playerId,\n          hostId: room.hostId,\n          players: room.players.map((p) => ({ id: p.id, name: p.name })),\n        });\n        \n        if (room.game) {\n          send(ws, {\n            type: \"game_state\",\n            sharedSecret: room.game.sharedSecret,\n            status: room.game.status,\n            settings: room.settings,\n            gameStartTime: room.game.startTime,\n          });\n          \n          // Send current game data for this player\n          const playerData = room.game.players.get(message.playerId);\n          if (playerData) {\n            send(ws, {\n              type: \"player_game_state\",\n              attempts: playerData.attempts,\n              finished: playerData.finished,\n              won: playerData.won,\n            });\n            \n            // If player has finished, send them latest results\n            if (playerData.finished && room.game.lastResults) {\n              send(ws, {\n                type: \"game_results\",\n                winners: room.game.lastResults.winners,\n                losers: room.game.lastResults.losers,\n                stillPlaying: room.game.lastResults.stillPlaying,\n                sharedSecret: room.game.sharedSecret,\n                reason: room.game.lastResults.reason,\n              });\n            }\n          }\n        }\n        \n        // Notify others of reconnection\n        broadcastToRoom(room, {\n          type: \"player_reconnected\",\n          playerId: message.playerId,\n          playerName: message.playerName,\n        }, ws);\n        \n        broadcastToRoom(room, {\n          type: \"players_updated\",\n          players: room.players.map((p) => ({ id: p.id, name: p.name })),\n          hostId: room.hostId,\n        });\n        break;\n      }\n\n      case \"leave_room\": {\n        const player = players.get(ws);\n        if (!player) return;\n\n        const room = rooms.get(player.roomId);\n        if (!room) return;\n\n        // Handle cleanup (same as disconnect)\n        if (room.game && room.game.status === \"playing\") {\n          const playerData = room.game.players.get(player.id);\n          if (playerData && !playerData.finished) {\n            playerData.finished = true;\n            playerData.endTime = Date.now();\n            \n            broadcastToRoom(room, {\n              type: \"player_quit\",\n              playerId: player.id,\n              playerName: player.name,\n            }, ws);\n            \n            checkGameEnd(room);\n          }\n        }\n        \n        room.players = room.players.filter((p) => p.id !== player.id);\n        \n        // Check if room should be deleted\n        if (!checkAndDeleteRoomIfNeeded(room)) {\n          // Room still has enough players\n          if (room.hostId === player.id && room.players.length > 0) {\n            room.hostId = room.players[0].id;\n            broadcastToRoom(room, {\n              type: \"host_changed\",\n              newHostId: room.hostId,\n            });\n          }\n          \n          broadcastToRoom(room, {\n            type: \"players_updated\",\n            players: room.players.map((p) => ({ id: p.id, name: p.name })),\n            hostId: room.hostId,\n          });\n        }\n        \n        players.delete(ws);\n        break;\n      }\n    }\n  }\n\n  function send(ws: WebSocket, message: any) {\n    if (ws.readyState === WebSocket.OPEN) {\n      ws.send(JSON.stringify(message));\n    }\n  }\n\n  function broadcastToRoom(room: Room, message: any, exclude?: WebSocket) {\n    room.players.forEach((player) => {\n      if (player.ws !== exclude) {\n        send(player.ws, message);\n      }\n    });\n  }\n\n  return httpServer;\n}\n","size_bytes":34144},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  console.warn(\"DATABASE_URL not set - database operations will be unavailable\");\n  process.env.DATABASE_URL = \"postgresql://placeholder\";\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":393},"client/src/components/ui/sonner.tsx":{"content":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","size_bytes":894},"client/src/components/ui/GameHUD.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\n\nexport function GameHUD() {\n  const { mode, singleplayer, multiplayer } = useNumberGame();\n  const [currentTime, setCurrentTime] = useState(Date.now());\n\n  // Update timer every 100ms for smooth display\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTime(Date.now());\n    }, 100);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Render based on mode\n  if (mode === \"singleplayer\") {\n    return (\n      <div className=\"fixed top-4 left-4 bg-black bg-opacity-70 text-white p-4 rounded-lg z-40\">\n        <div className=\"space-y-2\">\n          <p className=\"text-sm text-gray-300\">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª: {singleplayer.attempts.length}/{singleplayer.settings.maxAttempts}</p>\n          <p className=\"text-xs text-gray-400\">Ø§Ø¶ØºØ· ESC Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù‚ÙÙ„</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (mode === \"multiplayer\") {\n    const timeElapsed = multiplayer.startTime > 0 && multiplayer.gameStatus === \"playing\"\n      ? Math.floor((currentTime - multiplayer.startTime) / 1000)\n      : 0;\n    const minutes = Math.floor(timeElapsed / 60);\n    const seconds = timeElapsed % 60;\n\n    return (\n      <div className=\"fixed top-4 left-4 bg-black bg-opacity-70 text-white p-4 rounded-lg z-40\">\n        <div className=\"space-y-2\">\n          <p className=\"text-sm font-semibold text-blue-300\">\n            Ù„Ø¹Ø¨Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©\n          </p>\n          <p className=\"text-sm text-gray-300\">\n            Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ: {multiplayer.attempts.length}/{multiplayer.settings.maxAttempts}\n          </p>\n          {multiplayer.gameStatus === \"playing\" && multiplayer.startTime > 0 && (\n            <p className=\"text-sm text-yellow-400\">\n              Ø§Ù„ÙˆÙ‚Øª: {minutes}:{seconds.toString().padStart(2, '0')}\n            </p>\n          )}\n          <p className=\"text-xs text-gray-400\">Ø§Ø¶ØºØ· ESC Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù‚ÙÙ„</p>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n}\n","size_bytes":2026},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  :root {\n    --background: 210 40% 98%;\n    --foreground: 222 47% 11%;\n    --card: 0 0% 100%;\n    --card-foreground: 222 47% 11%;\n    --popover: 0 0% 100%;\n    --popover-foreground: 222 47% 11%;\n    --primary: 220 90% 56%;\n    --primary-foreground: 0 0% 100%;\n    --secondary: 210 40% 96%;\n    --secondary-foreground: 222 47% 11%;\n    --muted: 210 40% 96%;\n    --muted-foreground: 215 16% 47%;\n    --accent: 210 40% 96%;\n    --accent-foreground: 222 47% 11%;\n    --destructive: 0 84% 60%;\n    --destructive-foreground: 0 0% 100%;\n    --border: 214 32% 91%;\n    --input: 214 32% 91%;\n    --ring: 220 90% 56%;\n    --radius: 0.75rem;\n  }\n\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    width: 100vw;\n    height: 100vh;\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n  }\n}\n\n#root {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n}\n\ncanvas {\n  width: 100% !important;\n  height: 100% !important;\n  touch-action: none;\n}","size_bytes":1159},"client/src/components/ui/ChallengeResultScreen.tsx":{"content":"export function ChallengeResultScreen({\n  won,\n  onClose,\n}: {\n  won: boolean;\n  onClose: () => void;\n}) {\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-[200]\">\n      <div className=\"bg-gradient-to-br from-white to-gray-50 rounded-3xl shadow-2xl p-10 max-w-md w-full mx-4 text-center space-y-6\">\n        <div className=\"text-8xl mb-4\">\n          {won ? \"ğŸ‰\" : \"ğŸ˜”\"}\n        </div>\n        \n        <h2 className=\"text-4xl font-bold\" style={{ color: won ? \"#22c55e\" : \"#ef4444\" }}>\n          {won ? \"ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! ÙØ²Øª\" : \"Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰\"}\n        </h2>\n        \n        <p className=\"text-gray-700 text-lg\">\n          {won \n            ? \"Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø§Ù„ØªØ­Ø¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø±Ø¤ÙŠØ© Ø§Ù„ØªÙ„Ù…ÙŠØ­ ÙÙˆÙ‚ Ø§Ù„Ø¨Ø§Ø¨\"\n            : \"Ù„Ù… ØªØ³ØªØ·Ø¹ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø©. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹\"}\n        </p>\n\n        <button\n          onClick={onClose}\n          className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-xl transition-all transform hover:scale-105 shadow-lg text-lg\"\n        >\n          {won ? \"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØºØ±ÙØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\" : \"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©\"}\n        </button>\n      </div>\n    </div>\n  );\n}\n","size_bytes":1306},"client/src/components/ui/LoseScreen.tsx":{"content":"import { Button } from \"./button\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { send } from \"@/lib/websocket\";\n\nexport function LoseScreen() {\n  const { mode, singleplayer, multiplayer, restartSingleplayer, setMode, setShowResults, setShowOpponentAttempts, resetMultiplayer, setChallengeStatus, setOpponentId, setOpponentName, setMySecretCode } = useNumberGame();\n  \n  const isSingleplayer = mode === \"singleplayer\";\n  const attempts = isSingleplayer ? singleplayer.attempts.length : multiplayer.attempts.length;\n  const timeElapsed = isSingleplayer\n    ? (singleplayer.endTime ? Math.floor((singleplayer.endTime - singleplayer.startTime) / 1000) : 0)\n    : (multiplayer.endTime ? Math.floor((multiplayer.endTime - multiplayer.startTime) / 1000) : 0);\n  const minutes = Math.floor(timeElapsed / 60);\n  const seconds = timeElapsed % 60;\n  const secretCode = isSingleplayer ? singleplayer.secretCode : multiplayer.opponentSecretCode;\n  const isMultiplayer = mode === \"multiplayer\";\n\n  const handleRematch = () => {\n    send({ type: \"request_rematch\", opponentId: multiplayer.opponentId });\n  };\n\n  const handleBackToLobby = () => {\n    if (isMultiplayer) {\n      // Reset game state but keep multiplayer session\n      setChallengeStatus(\"none\");\n      setOpponentId(null);\n      setOpponentName(\"\");\n      setMySecretCode([]);\n      setShowResults(false);\n      resetMultiplayer();\n    } else {\n      setShowResults(false);\n      setMode(\"menu\");\n      setTimeout(() => {\n        window.location.reload();\n      }, 300);\n    }\n  };\n\n  const handleShowOpponentAttempts = () => {\n    setShowOpponentAttempts(true);\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-red-50 via-white to-orange-50 z-50\">\n      <div className=\"w-full max-w-md mx-4 bg-white rounded-2xl shadow-2xl p-8 text-center space-y-6\">\n        <div className=\"text-6xl\">ğŸ˜¢</div>\n        \n        <div>\n          <h2 className=\"text-4xl font-bold text-gray-800 mb-2\">\n            Ù„Ù‚Ø¯ Ø®Ø³Ø±Øª\n          </h2>\n          {isMultiplayer && (\n            <p className=\"text-gray-600\">Ø§Ù„Ø®ØµÙ… Ø®Ù…Ù† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ÙÙŠ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø£Ù‚Ù„</p>\n          )}\n        </div>\n\n        <div className=\"bg-gradient-to-br from-red-50 to-orange-50 p-6 rounded-xl space-y-3 border border-red-200\">\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-700 font-semibold\">Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ:</span>\n            <span className=\"text-2xl font-bold text-red-600\">{attempts}</span>\n          </div>\n          \n          {isMultiplayer && multiplayer.opponentAttempts && (\n            <div className=\"flex justify-between items-center border-t border-red-200 pt-3\">\n              <span className=\"text-gray-700 font-semibold\">Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®ØµÙ…:</span>\n              <span className=\"text-2xl font-bold text-orange-600\">{multiplayer.opponentAttempts.length}</span>\n            </div>\n          )}\n\n          <div className=\"flex justify-between items-center border-t border-red-200 pt-3\">\n            <span className=\"text-gray-700 font-semibold\">Ø§Ù„ÙˆÙ‚Øª:</span>\n            <span className=\"text-2xl font-bold text-pink-600\">\n              {minutes > 0 ? `${minutes}:${seconds.toString().padStart(2, \"0\")}` : `${seconds}Ø«`}\n            </span>\n          </div>\n\n          {secretCode.length > 0 && (\n            <div className=\"flex justify-between items-center border-t border-red-200 pt-3\">\n              <span className=\"text-gray-700 font-semibold\">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ:</span>\n              <span className=\"text-2xl font-mono font-bold text-red-600\">{secretCode.join(\"\")}</span>\n            </div>\n          )}\n        </div>\n\n        <div className=\"space-y-2 pt-4\">\n          {isMultiplayer ? (\n            <>\n              <Button\n                onClick={handleShowOpponentAttempts}\n                className=\"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ø¹Ø±Ø¶ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®ØµÙ…\n              </Button>\n              <Button\n                onClick={handleRematch}\n                className=\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©\n              </Button>\n              <Button\n                onClick={handleBackToLobby}\n                className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØºØ±ÙØ©\n              </Button>\n            </>\n          ) : (\n            <>\n              <Button\n                onClick={restartSingleplayer}\n                className=\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰\n              </Button>\n              <Button\n                onClick={() => {\n                  setMode(\"menu\");\n                  setTimeout(() => {\n                    window.location.reload();\n                  }, 300);\n                }}\n                className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl\"\n              >\n                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5391},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2859},"client/src/components/ui/SecretCodeSetup.tsx":{"content":"import { useState } from \"react\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { send } from \"@/lib/websocket\";\nimport { Check, X } from \"lucide-react\";\n\nexport function SecretCodeSetup() {\n  const { multiplayer, setMySecretCode } = useNumberGame();\n  const [code, setCode] = useState<string[]>(Array(multiplayer.settings.numDigits).fill(\"\"));\n  const [focusedIndex, setFocusedIndex] = useState(0);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const numDigits = multiplayer.settings.numDigits;\n\n  const handleSecretNumberInput = (num: string) => {\n    if (focusedIndex >= numDigits) return;\n    const newInput = [...code];\n    newInput[focusedIndex] = num;\n    setCode(newInput);\n    if (focusedIndex < numDigits - 1) {\n      setFocusedIndex(focusedIndex + 1);\n    }\n  };\n\n  const handleSecretBackspace = () => {\n    if (focusedIndex > 0) {\n      const newInput = [...code];\n      if (code[focusedIndex] === \"\") {\n        newInput[focusedIndex - 1] = \"\";\n        setFocusedIndex(focusedIndex - 1);\n      } else {\n        newInput[focusedIndex] = \"\";\n      }\n      setCode(newInput);\n    } else if (code[0] !== \"\") {\n      const newInput = [...code];\n      newInput[0] = \"\";\n      setCode(newInput);\n    }\n  };\n\n  const handleSubmitSecretCode = () => {\n    if (code.length !== numDigits || code.some(val => val === \"\")) return;\n    const numCode = code.map(Number);\n    setMySecretCode(numCode);\n    setIsSubmitted(true);\n    send({\n      type: \"set_secret_code\",\n      code: numCode,\n      opponentId: multiplayer.opponentId,\n    });\n  };\n\n  const isCodeComplete = code.length === numDigits && code.every(val => val !== \"\");\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 z-50 p-4\">\n      <div className=\"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 space-y-6 border border-gray-200\">\n        <div className=\"flex justify-center mb-4\">\n          <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 rounded-3xl flex items-center justify-center shadow-lg\">\n            <div className=\"w-12 h-12 bg-white rounded-2xl flex items-center justify-center\">\n              <span className=\"text-2xl\">ğŸ”’</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">Ø§Ø®ØªØ± Ø±Ù‚Ù…Ùƒ Ø§Ù„Ø³Ø±ÙŠ</h2>\n          <p className=\"text-sm text-gray-600\">Ø§Ø®ØªØ± {numDigits} Ø£Ø±Ù‚Ø§Ù… Ù„ØªØ®Ù…ÙŠÙ†Ù‡Ø§ Ø®ØµÙ…Ùƒ</p>\n        </div>\n        \n        <div className=\"flex gap-3 justify-center mb-6\" dir=\"ltr\">\n          {Array.from({ length: numDigits }, (_, idx) => (\n            <div\n              key={idx}\n              className={`w-16 h-20 border-2 rounded-xl flex items-center justify-center text-3xl font-bold transition-all ${\n                focusedIndex === idx\n                  ? \"border-blue-500 bg-blue-50\"\n                  : \"border-gray-300 bg-white\"\n              }`}\n            >\n              {code[idx] || \"\"}\n            </div>\n          ))}\n        </div>\n\n        <div className=\"grid grid-cols-3 gap-3 mb-4\" dir=\"ltr\">\n          {[1, 2, 3].map((num) => (\n            <button\n              key={num}\n              onClick={() => handleSecretNumberInput(num.toString())}\n              className=\"h-16 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-2xl font-bold rounded-xl shadow-md active:scale-95 transition-all\"\n            >\n              {num}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"grid grid-cols-3 gap-3 mb-4\" dir=\"ltr\">\n          {[4, 5, 6].map((num) => (\n            <button\n              key={num}\n              onClick={() => handleSecretNumberInput(num.toString())}\n              className=\"h-16 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-2xl font-bold rounded-xl shadow-md active:scale-95 transition-all\"\n            >\n              {num}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"grid grid-cols-3 gap-3 mb-4\" dir=\"ltr\">\n          {[7, 8, 9].map((num) => (\n            <button\n              key={num}\n              onClick={() => handleSecretNumberInput(num.toString())}\n              className=\"h-16 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-2xl font-bold rounded-xl shadow-md active:scale-95 transition-all\"\n            >\n              {num}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"grid grid-cols-3 gap-3\" dir=\"ltr\">\n          <button\n            onClick={handleSecretBackspace}\n            className=\"h-16 bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl shadow-md active:scale-95 transition-all flex items-center justify-center col-span-1\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n          <button\n            onClick={() => handleSecretNumberInput(\"0\")}\n            className=\"h-16 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-2xl font-bold rounded-xl shadow-md active:scale-95 transition-all col-span-1\"\n          >\n            0\n          </button>\n          <button\n            onClick={handleSubmitSecretCode}\n            disabled={!isCodeComplete}\n            className=\"h-16 bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-md active:scale-95 transition-all flex items-center justify-center col-span-1\"\n          >\n            <Check className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {isSubmitted && (\n          <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 p-5 rounded-xl border-2 border-blue-200 shadow-md animate-pulse\">\n            <div className=\"flex items-center justify-center mb-2\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n            </div>\n            <p className=\"text-blue-700 text-center font-semibold text-lg\">\n              ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø®ØµÙ…...\n            </p>\n            <p className=\"text-blue-600 text-center text-sm mt-2\">\n              ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­ØªÙ‰ ÙŠØ¯Ø®Ù„ Ø®ØµÙ…Ùƒ Ø±Ù‚Ù…Ù‡ Ø§Ù„Ø³Ø±ÙŠ\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":6544},"client/src/lib/stores/useAudio.tsx":{"content":"import { create } from \"zustand\";\n\n// Create an audio context for generating beep sounds\nlet audioContext: AudioContext | null = null;\n\nconst getAudioContext = () => {\n  if (!audioContext) {\n    audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n  }\n  return audioContext;\n};\n\n// Play a beep sound with a specific frequency\nconst playBeep = (frequency: number, duration: number = 0.1, volume: number = 0.15) => {\n  try {\n    const ctx = getAudioContext();\n    \n    // Resume context if it's suspended (browser autoplay policy)\n    if (ctx.state === 'suspended') {\n      ctx.resume();\n    }\n    \n    const oscillator = ctx.createOscillator();\n    const gainNode = ctx.createGain();\n    \n    oscillator.connect(gainNode);\n    gainNode.connect(ctx.destination);\n    \n    oscillator.frequency.value = frequency;\n    oscillator.type = 'sine';\n    \n    gainNode.gain.setValueAtTime(volume, ctx.currentTime);\n    gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);\n    \n    oscillator.start(ctx.currentTime);\n    oscillator.stop(ctx.currentTime + duration);\n  } catch (error) {\n    // Silently fail if AudioContext is not supported\n    console.log(\"Audio playback failed:\", error);\n  }\n};\n\n// Frequency mapping for each digit (similar to DTMF but simplified)\nconst digitFrequencies: { [key: number]: number } = {\n  1: 697,\n  2: 770,\n  3: 852,\n  4: 941,\n  5: 1209,\n  6: 1336,\n  7: 1477,\n  8: 1633,\n  9: 1800,\n  0: 600,\n};\n\ninterface AudioState {\n  backgroundMusic: HTMLAudioElement | null;\n  successSound: HTMLAudioElement | null;\n  isMuted: boolean;\n  \n  // Setter functions\n  setBackgroundMusic: (music: HTMLAudioElement) => void;\n  setSuccessSound: (sound: HTMLAudioElement) => void;\n  \n  // Control functions\n  toggleMute: () => void;\n  playDigit: (digit: number) => void;\n  playDelete: () => void;\n  playError: () => void;\n  playSuccess: () => void;\n  playConfirm: () => void;\n}\n\nexport const useAudio = create<AudioState>((set, get) => ({\n  backgroundMusic: null,\n  successSound: null,\n  isMuted: false, // Start unmuted by default\n  \n  setBackgroundMusic: (music) => set({ backgroundMusic: music }),\n  setSuccessSound: (sound) => set({ successSound: sound }),\n  \n  toggleMute: () => {\n    const { isMuted } = get();\n    const newMutedState = !isMuted;\n    set({ isMuted: newMutedState });\n    console.log(`Sound ${newMutedState ? 'muted' : 'unmuted'}`);\n  },\n  \n  playDigit: (digit: number) => {\n    const { isMuted } = get();\n    if (isMuted) return;\n    \n    const frequency = digitFrequencies[digit] || 800;\n    playBeep(frequency, 0.08, 0.15);\n  },\n  \n  playDelete: () => {\n    const { isMuted } = get();\n    if (isMuted) return;\n    \n    // Play a lower frequency beep for delete\n    playBeep(300, 0.12, 0.2);\n  },\n  \n  playError: () => {\n    const { isMuted } = get();\n    if (isMuted) return;\n    \n    // Play a dissonant double beep for error\n    playBeep(200, 0.15, 0.25);\n    setTimeout(() => playBeep(180, 0.15, 0.25), 80);\n  },\n  \n  playSuccess: () => {\n    const { successSound, isMuted } = get();\n    if (isMuted) return;\n    \n    if (successSound) {\n      successSound.currentTime = 0;\n      successSound.play().catch(error => {\n        console.log(\"Success sound play prevented:\", error);\n      });\n    } else {\n      // Fallback: play a nice ascending tone\n      playBeep(523, 0.1, 0.2); // C\n      setTimeout(() => playBeep(659, 0.1, 0.2), 100); // E\n      setTimeout(() => playBeep(784, 0.2, 0.2), 200); // G\n    }\n  },\n  \n  playConfirm: () => {\n    const { isMuted } = get();\n    if (isMuted) return;\n    \n    // Play a pleasant double beep for confirm (higher pitched than digit sounds)\n    playBeep(1200, 0.08, 0.18);\n    setTimeout(() => playBeep(1400, 0.08, 0.18), 60);\n  }\n}));\n","size_bytes":3759},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3849},"client/src/lib/stores/useChallenge.ts":{"content":"import { create } from \"zustand\";\n\nexport type ChallengePhase = \"menu\" | \"playing\" | \"won\" | \"lost\";\nexport type HintType = \"digit\" | \"description\";\n\nexport interface Hint {\n  type: HintType;\n  value: string | number;\n  position?: number;\n}\n\ninterface ChallengeState {\n  currentLevel: number;\n  sequence: number[];\n  playerSequence: number[];\n  phase: ChallengePhase;\n  challengeCompleted: boolean;\n  hint: Hint | null;\n  isShowingSequence: boolean;\n  canInput: boolean;\n  startTime: number;\n  timeoutHandle: NodeJS.Timeout | null;\n\n  startChallenge: () => void;\n  addToPlayerSequence: (buttonIndex: number) => void;\n  checkSequence: () => void;\n  nextLevel: () => void;\n  failChallenge: () => void;\n  completeChallenge: () => void;\n  resetChallenge: () => void;\n  setIsShowingSequence: (showing: boolean) => void;\n  setCanInput: (canInput: boolean) => void;\n  generateHint: (secretCode: number[]) => void;\n}\n\nconst generateSequence = (level: number): number[] => {\n  const length = 3 + level;\n  return Array.from({ length }, () => Math.floor(Math.random() * 8));\n};\n\nconst generateRandomHint = (secretCode: number[]): Hint => {\n  const numDigits = secretCode.length;\n  const hintChoice = Math.random();\n  \n  if (hintChoice < 0.4) {\n    // Ù†ÙˆØ¹ 1: Ø±Ù‚Ù… Ù…Ø­Ø¯Ø¯ ÙÙŠ Ø®Ø§Ù†Ø© Ù…Ø­Ø¯Ø¯Ø©\n    const position = Math.floor(Math.random() * numDigits);\n    const digit = secretCode[position];\n    return {\n      type: \"digit\",\n      value: digit,\n      position,\n    };\n  } else if (hintChoice < 0.7) {\n    // Ù†ÙˆØ¹ 2: Ø®Ø§Ù†Ø© ÙˆØ§Ø­Ø¯Ø© Ù…Ø¹ ÙˆØµÙ even/odd\n    const position = Math.floor(Math.random() * numDigits);\n    const digit = secretCode[position];\n    const isEven = digit % 2 === 0;\n    const parity = isEven ? 'Ø²ÙˆØ¬ÙŠ' : 'ÙØ±Ø¯ÙŠ';\n    \n    return {\n      type: \"description\",\n      value: `Ø§Ù„Ø®Ø§Ù†Ø© ${position + 1} Ø±Ù‚Ù… ${parity}`,\n    };\n  } else {\n    // Ù†ÙˆØ¹ 3: Ø®Ø§Ù†ØªØ§Ù† Ø¹Ø´ÙˆØ§Ø¦ÙŠØªØ§Ù† Ù…Ø¹ ÙˆØµÙ even/odd Ù„ÙƒÙ„ ÙˆØ§Ø­Ø¯Ø©\n    const positions = [];\n    const availablePositions = Array.from({ length: numDigits }, (_, i) => i);\n    \n    // Ø§Ø®ØªÙŠØ§Ø± Ø®Ø§Ù†ØªÙŠÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠØªÙŠÙ†\n    const pos1Index = Math.floor(Math.random() * availablePositions.length);\n    const pos1 = availablePositions[pos1Index];\n    availablePositions.splice(pos1Index, 1);\n    \n    const pos2Index = Math.floor(Math.random() * availablePositions.length);\n    const pos2 = availablePositions[pos2Index];\n    \n    const digit1 = secretCode[pos1];\n    const digit2 = secretCode[pos2];\n    const parity1 = digit1 % 2 === 0 ? 'Ø²ÙˆØ¬ÙŠ' : 'ÙØ±Ø¯ÙŠ';\n    const parity2 = digit2 % 2 === 0 ? 'Ø²ÙˆØ¬ÙŠ' : 'ÙØ±Ø¯ÙŠ';\n    \n    const hint1 = `Ø§Ù„Ø®Ø§Ù†Ø© ${pos1 + 1} Ø±Ù‚Ù… ${parity1}`;\n    const hint2 = `Ø§Ù„Ø®Ø§Ù†Ø© ${pos2 + 1} Ø±Ù‚Ù… ${parity2}`;\n    \n    return {\n      type: \"description\",\n      value: `${hint1} Ùˆ ${hint2}`,\n    };\n  }\n};\n\nif (typeof window !== 'undefined') {\n  const stored = localStorage.getItem('challenge-storage');\n  if (stored) {\n    try {\n      const data = JSON.parse(stored);\n      if (data.state && data.state.challengeCompleted) {\n        console.log(\"ğŸ’¾ Loaded challengeCompleted from storage:\", data.state.challengeCompleted);\n      }\n    } catch (e) {\n      console.error(\"Error loading challenge storage:\", e);\n    }\n  }\n}\n\nexport const useChallenge = create<ChallengeState>()(\n  (set, get) => ({\n      currentLevel: 0,\n      sequence: [],\n      playerSequence: [],\n      phase: \"menu\",\n      challengeCompleted: false,\n      hint: null,\n      isShowingSequence: false,\n      canInput: false,\n      startTime: 0,\n      timeoutHandle: null,\n\n      startChallenge: () => {\n        console.log(\"ğŸ® Starting challenge - preserving hint and challengeCompleted\");\n        const sequence = generateSequence(0);\n        const { hint, challengeCompleted, timeoutHandle } = get();\n        \n        // Clear previous timeout if exists\n        if (timeoutHandle) clearTimeout(timeoutHandle);\n        \n        // Set 5-minute timeout (300 seconds)\n        const newTimeoutHandle = setTimeout(() => {\n          console.log(\"â° Challenge timeout - 5 minutes elapsed\");\n          set({\n            phase: \"lost\",\n            canInput: false,\n          });\n        }, 5 * 60 * 1000);\n        \n        set({\n          currentLevel: 0,\n          sequence,\n          playerSequence: [],\n          phase: \"playing\",\n          isShowingSequence: true,\n          canInput: false,\n          hint,\n          challengeCompleted,\n          startTime: Date.now(),\n          timeoutHandle: newTimeoutHandle,\n        });\n      },\n\n      addToPlayerSequence: (buttonIndex: number) => {\n        const { playerSequence, canInput, sequence, currentLevel } = get();\n        if (!canInput) return;\n        \n        const newPlayerSequence = [...playerSequence, buttonIndex];\n        const currentIndex = playerSequence.length;\n        \n        if (sequence[currentIndex] !== buttonIndex) {\n          get().failChallenge();\n          return;\n        }\n        \n        set({\n          playerSequence: newPlayerSequence,\n        });\n        \n        if (newPlayerSequence.length === sequence.length) {\n          const nextLevelNum = get().currentLevel + 1;\n          if (nextLevelNum >= 5) {\n            setTimeout(() => {\n              get().completeChallenge();\n            }, 500);\n          } else {\n            setTimeout(() => {\n              get().nextLevel();\n            }, 1000);\n          }\n        }\n      },\n\n      checkSequence: () => {\n      },\n\n      nextLevel: () => {\n        const { currentLevel } = get();\n        const newLevel = currentLevel + 1;\n        const newSequence = generateSequence(newLevel);\n        \n        set({\n          currentLevel: newLevel,\n          sequence: newSequence,\n          playerSequence: [],\n          isShowingSequence: true,\n          canInput: false,\n        });\n      },\n\n\n      completeChallenge: () => {\n        console.log(\"ğŸ¯ Challenge Completed! Setting to true\");\n        const { timeoutHandle } = get();\n        if (timeoutHandle) clearTimeout(timeoutHandle);\n        \n        set({\n          phase: \"won\",\n          challengeCompleted: true,\n          canInput: false,\n          timeoutHandle: null,\n        });\n        setTimeout(() => {\n          const state = get();\n          console.log(\"âœ… Challenge state after set:\", {\n            challengeCompleted: state.challengeCompleted,\n            hint: state.hint,\n            phase: state.phase\n          });\n        }, 100);\n      },\n\n      failChallenge: () => {\n        const { timeoutHandle } = get();\n        if (timeoutHandle) clearTimeout(timeoutHandle);\n        \n        set({\n          phase: \"lost\",\n          playerSequence: [],\n          canInput: false,\n          timeoutHandle: null,\n        });\n      },\n\n      resetChallenge: () => {\n        const { hint, challengeCompleted, timeoutHandle } = get();\n        if (timeoutHandle) clearTimeout(timeoutHandle);\n        \n        console.log(\"ğŸ”„ Resetting challenge - preserving hint and challengeCompleted\");\n        set({\n          currentLevel: 0,\n          sequence: [],\n          playerSequence: [],\n          phase: \"menu\",\n          isShowingSequence: false,\n          canInput: false,\n          hint,\n          challengeCompleted,\n          startTime: 0,\n          timeoutHandle: null,\n        });\n      },\n\n      setIsShowingSequence: (showing: boolean) => {\n        set({ isShowingSequence: showing });\n      },\n\n      setCanInput: (canInput: boolean) => {\n        set({ canInput });\n      },\n\n      generateHint: (secretCode: number[]) => {\n        const hint = generateRandomHint(secretCode);\n        console.log(\"ğŸ’¡ Hint Generated:\", hint);\n        set({ hint });\n        setTimeout(() => {\n          const state = get();\n          console.log(\"âœ… Hint state after set:\", {\n            hint: state.hint,\n            challengeCompleted: state.challengeCompleted\n          });\n        }, 100);\n      },\n    })\n);\n","size_bytes":7927},"client/src/components/game/GameScene.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { KeyboardControls, Text, RoundedBox } from \"@react-three/drei\";\nimport { FirstPersonControls, Controls } from \"./FirstPersonControls\";\nimport { NumberPanel } from \"./NumberPanel\";\nimport { DisplayPanel } from \"./DisplayPanel\";\nimport { FeedbackPanel } from \"./FeedbackPanel\";\nimport { AttemptsHistory } from \"./AttemptsHistory\";\nimport { CurrentGuessDisplay } from \"./CurrentGuessDisplay\";\nimport { Crosshair } from \"../ui/Crosshair\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { ChallengeDoor } from \"./ChallengeDoor\";\n\nfunction BackWallStatus() {\n  return null;\n}\n\nfunction PendingWinStatus() {\n  return null;\n}\n\nfunction Scene({ onLockChange, isPointerLocked = false, onEnterChallenge }: { onLockChange?: (locked: boolean) => void; isPointerLocked?: boolean; onEnterChallenge?: () => void }) {\n  const mode = useNumberGame((state) => state.mode);\n\n  useEffect(() => {\n    const handlePointerLockChange = () => {\n      const isLocked = document.pointerLockElement !== null;\n      onLockChange?.(isLocked);\n    };\n\n    document.addEventListener(\"pointerlockchange\", handlePointerLockChange);\n    return () => {\n      document.removeEventListener(\"pointerlockchange\", handlePointerLockChange);\n    };\n  }, [onLockChange]);\n\n  return (\n    <>\n      {/* Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ ÙØ§ØªØ­Ø© */}\n      <color attach=\"background\" args={[\"#f8f9fa\"]} />\n      \n      {/* Ø¥Ø¶Ø§Ø¡Ø© Ù…Ø­ÙŠØ·Ø© Ù†Ø§Ø¹Ù…Ø© */}\n      <ambientLight intensity={2.0} />\n      \n      {/* Ø¥Ø¶Ø§Ø¡Ø© Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ */}\n      <directionalLight \n        position={[0, 10, 0]} \n        intensity={3.5} \n        color=\"#ffffff\"\n        castShadow\n      />\n      \n      {/* Ø¥Ø¶Ø§Ø¡Ø© Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø§Ù†Ø¹ÙƒØ§Ø³Ø§Øª */}\n      <pointLight position={[8, 3, 0]} intensity={1.5} color=\"#ffedd5\" />\n      <pointLight position={[-8, 3, 0]} intensity={1.5} color=\"#dbeafe\" />\n      <pointLight position={[0, 3, 8]} intensity={1.2} color=\"#ffffff\" />\n      <pointLight position={[0, 3, -8]} intensity={1.2} color=\"#ffffff\" />\n      \n      {/* Ø£Ø±Ø¶ÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ Ù…Ø¹ Ø§Ù†Ø¹ÙƒØ§Ø³ */}\n      <mesh \n        position={[0, 0, 0]} \n        rotation={[-Math.PI / 2, 0, 0]}\n        receiveShadow\n      >\n        <planeGeometry args={[30, 30]} />\n        <meshStandardMaterial \n          color=\"#ffffff\" \n          metalness={0.2}\n          roughness={0.05}\n          envMapIntensity={1}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø­Ø§Ø¦Ø· Ø§Ù„Ø£Ù…Ø§Ù…ÙŠ (Ø§Ù„Ø°ÙŠ ÙŠÙˆØ§Ø¬Ù‡ Ø§Ù„Ù„Ø§Ø¹Ø¨) - Ø³ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… */}\n      <mesh position={[0, 4, -13]} receiveShadow>\n        <boxGeometry args={[27, 8, 0.5]} />\n        <meshStandardMaterial \n          color=\"#e0e7ff\" \n          metalness={0.2}\n          roughness={0.4}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø­Ø§Ø¦Ø· Ø§Ù„Ø®Ù„ÙÙŠ */}\n      <mesh position={[0, 4, 13]} receiveShadow>\n        <boxGeometry args={[27, 8, 0.5]} />\n        <meshStandardMaterial \n          color=\"#e0e7ff\" \n          metalness={0.2}\n          roughness={0.4}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø­Ø§Ø¦Ø· Ø§Ù„Ø£ÙŠÙ…Ù† */}\n      <mesh position={[13, 4, 0]} rotation={[0, Math.PI / 2, 0]} receiveShadow>\n        <boxGeometry args={[27, 8, 0.5]} />\n        <meshStandardMaterial \n          color=\"#e0e7ff\" \n          metalness={0.2}\n          roughness={0.4}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø­Ø§Ø¦Ø· Ø§Ù„Ø£ÙŠØ³Ø± */}\n      <mesh position={[-13, 4, 0]} rotation={[0, Math.PI / 2, 0]} receiveShadow>\n        <boxGeometry args={[27, 8, 0.5]} />\n        <meshStandardMaterial \n          color=\"#e0e7ff\" \n          metalness={0.2}\n          roughness={0.4}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø³Ù‚Ù */}\n      <mesh position={[0, 8, 0]} rotation={[Math.PI / 2, 0, 0]} receiveShadow>\n        <planeGeometry args={[27, 27]} />\n        <meshStandardMaterial \n          color=\"#fafafa\" \n          metalness={0.1}\n          roughness={0.4}\n        />\n      </mesh>\n\n      <NumberPanel isPointerLocked={isPointerLocked} />\n      <FeedbackPanel />\n      <AttemptsHistory />\n      <CurrentGuessDisplay />\n      <BackWallStatus />\n      \n      {mode === \"singleplayer\" && onEnterChallenge && (\n        <ChallengeDoor onEnterChallenge={onEnterChallenge} />\n      )}\n      \n      <FirstPersonControls />\n    </>\n  );\n}\n\nconst keyMap = [\n  { name: Controls.forward, keys: [\"ArrowUp\", \"KeyW\"] },\n  { name: Controls.back, keys: [\"ArrowDown\", \"KeyS\"] },\n  { name: Controls.left, keys: [\"ArrowLeft\", \"KeyA\"] },\n  { name: Controls.right, keys: [\"ArrowRight\", \"KeyD\"] },\n];\n\nexport function GameScene({ onEnterChallenge }: { onEnterChallenge?: () => void }) {\n  const [isLocked, setIsLocked] = useState(false);\n\n  return (\n    <>\n      <KeyboardControls map={keyMap}>\n        <Canvas\n          camera={{\n            position: [0, 1.6, 0],\n            fov: 60,\n            near: 0.1,\n            far: 1000,\n          }}\n          gl={{\n            antialias: true,\n          }}\n          onCreated={({ gl }) => {\n            const canvas = gl.domElement;\n            \n            const handleClick = () => {\n              if (!document.pointerLockElement) {\n                canvas.requestPointerLock();\n              }\n            };\n            \n            canvas.addEventListener('click', handleClick);\n            \n            return () => {\n              canvas.removeEventListener('click', handleClick);\n            };\n          }}\n        >\n          <Scene onLockChange={setIsLocked} isPointerLocked={isLocked} onEnterChallenge={onEnterChallenge} />\n        </Canvas>\n      </KeyboardControls>\n      {!isLocked && (\n        <div className=\"fixed inset-0 flex flex-col items-center justify-start pointer-events-none z-40 pt-8\">\n          <div className=\"text-white text-sm bg-black bg-opacity-50 p-4 rounded\">\n            <p className=\"mb-2\">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ù‚ÙÙ„ Ø§Ù„Ù…Ø¤Ø´Ø±</p>\n          </div>\n        </div>\n      )}\n      \n      <Crosshair />\n    </>\n  );\n}\n","size_bytes":6059},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5639},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/OpponentAttemptsDialog.tsx":{"content":"import { Dialog, DialogContent, DialogHeader, DialogTitle } from \"./dialog\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\nimport { X } from \"lucide-react\";\n\nexport function OpponentAttemptsDialog() {\n  const showOpponentAttempts = useNumberGame((state) => state.multiplayer.showOpponentAttempts);\n  const setShowOpponentAttempts = useNumberGame((state) => state.setShowOpponentAttempts);\n  const opponentAttempts = useNumberGame((state) => state.multiplayer.opponentAttempts);\n\n  return (\n    <Dialog open={showOpponentAttempts} onOpenChange={setShowOpponentAttempts}>\n      <DialogContent className=\"max-w-md max-h-96 overflow-y-auto bg-white border-2 border-gray-200 rounded-2xl shadow-2xl p-0\">\n        <DialogHeader className=\"p-6 pb-0 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <DialogTitle className=\"text-2xl font-bold text-gray-800\">Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®ØµÙ…</DialogTitle>\n            <button\n              onClick={() => setShowOpponentAttempts(false)}\n              className=\"text-gray-500 hover:text-gray-700\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n        </DialogHeader>\n        <div className=\"p-6 space-y-2 max-h-80 overflow-y-auto\">\n          {opponentAttempts.length > 0 ? (\n            opponentAttempts.map((attempt, index) => {\n              const positionText = \n                attempt.correctPositionCount === 0 ? '0 Ù…ÙƒØ§Ù†Ùˆ ØµØ­' :\n                attempt.correctPositionCount === 1 ? '1 Ù…ÙƒØ§Ù†Ùˆ ØµØ­' :\n                `${attempt.correctPositionCount} Ù…ÙƒØ§Ù†Ù‡Ù… ØµØ­`;\n\n              return (\n                <div\n                  key={index}\n                  className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg flex-row-reverse border border-gray-200\"\n                >\n                  <span className=\"font-mono text-lg font-bold text-gray-800\">\n                    {attempt.guess.join(\"\")}\n                  </span>\n                  <div className=\"flex gap-2 text-sm\">\n                    <span className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-lg font-semibold\">\n                      {attempt.correctCount} ØµØ­\n                    </span>\n                    <span className=\"bg-green-100 text-green-800 px-3 py-1 rounded-lg font-semibold\">\n                      {positionText}\n                    </span>\n                  </div>\n                </div>\n              );\n            })\n          ) : (\n            <p className=\"text-center text-gray-500 py-4\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª</p>\n          )}\n        </div>\n        <div className=\"p-6 pt-4 border-t border-gray-200\">\n          <button\n            onClick={() => setShowOpponentAttempts(false)}\n            className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors\"\n          >\n            Ø§Ù„Ø¹ÙˆØ¯Ø©\n          </button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":2992},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8522},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1598},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5124},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1))\",\n          \"2\": \"hsl(var(--chart-2))\",\n          \"3\": \"hsl(var(--chart-3))\",\n          \"4\": \"hsl(var(--chart-4))\",\n          \"5\": \"hsl(var(--chart-5))\",\n        },\n        sidebar: {\n          DEFAULT: \"hsl(var(--sidebar-background))\",\n          foreground: \"hsl(var(--sidebar-foreground))\",\n          primary: \"hsl(var(--sidebar-primary))\",\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\n          accent: \"hsl(var(--sidebar-accent))\",\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\n          border: \"hsl(var(--sidebar-border))\",\n          ring: \"hsl(var(--sidebar-ring))\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2787},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1877},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1902},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1486},"client/src/components/game/DisplayPanel.tsx":{"content":"import { Text, RoundedBox } from \"@react-three/drei\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\n\nexport function DisplayPanel() {\n  const { mode, singleplayer, multiplayer } = useNumberGame();\n  const currentGuess = mode === \"singleplayer\" ? singleplayer.currentGuess : multiplayer.currentGuess;\n  const numDigits = mode === \"singleplayer\" ? singleplayer.settings.numDigits : multiplayer.settings.numDigits;\n\n  const displayText = currentGuess.map((d) => d.toString()).join(\"  \");\n  const emptySlots = numDigits - currentGuess.length;\n  const emptyText = \"_  \".repeat(emptySlots);\n  \n  // Calculate panel width based on number of digits\n  const panelWidth = numDigits * 0.8;\n\n  return (\n    <group position={[0, 2.2, 0]}>\n      <RoundedBox\n        args={[panelWidth, 0.65, 0.2]}\n        radius={0.12}\n        smoothness={6}\n        castShadow\n      >\n        <meshStandardMaterial \n          color=\"#1e293b\"\n          metalness={0.3}\n          roughness={0.5}\n          emissive=\"#334155\"\n          emissiveIntensity={0.3}\n        />\n      </RoundedBox>\n      \n      <Text\n        position={[0, 0, 0.15]}\n        fontSize={0.42}\n        color=\"#f1f5f9\"\n        anchorX=\"center\"\n        anchorY=\"middle\"\n        fontWeight=\"bold\"\n        letterSpacing={0.12}\n      >\n        {displayText}{emptyText}\n      </Text>\n    </group>\n  );\n}\n","size_bytes":1351},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":266},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on port 5000\n  // this serves both the API and the client\n  const port = 5000;\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":1871},"client/src/components/game/ChallengeRoom.tsx":{"content":"import { useEffect, useRef, useState } from \"react\";\nimport { Canvas, useFrame } from \"@react-three/fiber\";\nimport { Text, RoundedBox, KeyboardControls } from \"@react-three/drei\";\nimport { FirstPersonControls, Controls } from \"./FirstPersonControls\";\nimport { useChallenge } from \"@/lib/stores/useChallenge\";\nimport * as THREE from \"three\";\nimport { useThree } from \"@react-three/fiber\";\nimport { Crosshair } from \"../ui/Crosshair\";\n\nconst BUTTON_COLORS = [\n  { name: \"Ø£Ø­Ù…Ø±\", color: \"#ef4444\", sound: 261.63 },\n  { name: \"Ø£Ø²Ø±Ù‚\", color: \"#3b82f6\", sound: 293.66 },\n  { name: \"Ø£Ø®Ø¶Ø±\", color: \"#22c55e\", sound: 329.63 },\n  { name: \"Ø£ØµÙØ±\", color: \"#eab308\", sound: 349.23 },\n  { name: \"Ø¨Ù†ÙØ³Ø¬ÙŠ\", color: \"#a855f7\", sound: 392.00 },\n  { name: \"Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ\", color: \"#f97316\", sound: 440.00 },\n  { name: \"ÙˆØ±Ø¯ÙŠ\", color: \"#ec4899\", sound: 493.88 },\n  { name: \"Ø³Ù…Ø§ÙˆÙŠ\", color: \"#06b6d4\", sound: 523.25 },\n];\n\nfunction ColorButton({\n  index,\n  color,\n  position,\n  isActive,\n  isHovered,\n}: {\n  index: number;\n  color: string;\n  position: [number, number, number];\n  isActive: boolean;\n  isHovered: boolean;\n}) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const lightRef = useRef<THREE.PointLight>(null);\n\n  useFrame((state) => {\n    if (meshRef.current && !isActive) {\n      const time = state.clock.getElapsedTime();\n      meshRef.current.position.y = Math.sin(time * 2 + index) * 0.1;\n    }\n    \n    if (lightRef.current) {\n      lightRef.current.intensity = isActive ? 12 : isHovered ? 0.2 : 0.05;\n    }\n  });\n\n  useEffect(() => {\n    if (isActive && meshRef.current) {\n      const material = meshRef.current.material as THREE.MeshStandardMaterial;\n      material.emissiveIntensity = 8;\n      \n      const timeout = setTimeout(() => {\n        material.emissiveIntensity = isHovered ? 0.1 : 0;\n      }, 500);\n      \n      return () => clearTimeout(timeout);\n    }\n  }, [isActive, isHovered]);\n\n  return (\n    <group position={position}>\n      {/* Ø¥Ø¶Ø§Ø¡Ø© Ù†Ù‚Ø·ÙŠØ© Ù…Ù† Ø§Ù„ÙƒØ±Ø© */}\n      <pointLight\n        ref={lightRef}\n        position={[0, 0, 0]}\n        color={color}\n        intensity={isActive ? 12 : isHovered ? 0.2 : 0.05}\n        distance={8}\n        decay={2}\n      />\n      \n      <mesh\n        ref={meshRef}\n        userData={{ buttonIndex: index, isButton: true }}\n      >\n        <sphereGeometry args={[0.6, 32, 32]} />\n        <meshStandardMaterial\n          color={color}\n          emissive={color}\n          emissiveIntensity={isActive ? 8 : isHovered ? 0.1 : 0}\n          metalness={0.5}\n          roughness={0.3}\n        />\n      </mesh>\n    </group>\n  );\n}\n\nfunction RaycastInteraction({ onButtonClick, onHoverButton, onExitClick }: { \n  onButtonClick: (index: number) => void;\n  onHoverButton: (index: number | null) => void;\n  onExitClick: () => void;\n}) {\n  const { camera, scene } = useThree();\n  const raycaster = useRef(new THREE.Raycaster());\n  const lastClickTimeRef = useRef(0);\n\n  useFrame(() => {\n    raycaster.current.setFromCamera(new THREE.Vector2(0, 0), camera);\n    const intersects = raycaster.current.intersectObjects(scene.children, true);\n    \n    let foundButton = false;\n    for (const intersect of intersects) {\n      if (intersect.object.userData.isButton) {\n        onHoverButton(intersect.object.userData.buttonIndex);\n        foundButton = true;\n        break;\n      }\n      if (intersect.object.userData.isExitButton) {\n        onHoverButton(-1);\n        foundButton = true;\n        break;\n      }\n    }\n    \n    if (!foundButton) {\n      onHoverButton(null);\n    }\n  });\n\n  useEffect(() => {\n    const handlePointerDown = () => {\n      const now = Date.now();\n      if (now - lastClickTimeRef.current < 300) return;\n      lastClickTimeRef.current = now;\n      \n      raycaster.current.setFromCamera(new THREE.Vector2(0, 0), camera);\n      const intersects = raycaster.current.intersectObjects(scene.children, true);\n      \n      for (const intersect of intersects) {\n        if (intersect.object.userData.isExitButton) {\n          onExitClick();\n          break;\n        }\n        if (intersect.object.userData.isButton) {\n          const buttonIndex = intersect.object.userData.buttonIndex;\n          onButtonClick(buttonIndex);\n          break;\n        }\n      }\n    };\n\n    window.addEventListener('pointerdown', handlePointerDown);\n    return () => window.removeEventListener('pointerdown', handlePointerDown);\n  }, [camera, scene, onButtonClick, onExitClick]);\n\n  return null;\n}\n\nfunction ChallengeRoomScene({ onExit, onHoverButton }: { \n  onExit: () => void;\n  onHoverButton: (index: number | null) => void;\n}) {\n  const {\n    sequence,\n    playerSequence,\n    currentLevel,\n    phase,\n    isShowingSequence,\n    canInput,\n    startTime,\n    addToPlayerSequence,\n    checkSequence,\n    setIsShowingSequence,\n    setCanInput,\n    startChallenge,\n    resetChallenge,\n  } = useChallenge();\n\n  const [activeButton, setActiveButton] = useState<number | null>(null);\n  const [hoveredButton, setHoveredButton] = useState<number | null>(null);\n  const [isExitButtonHovered, setIsExitButtonHovered] = useState(false);\n  const [currentTime, setCurrentTime] = useState(Date.now());\n  const [showResultDialog, setShowResultDialog] = useState(false);\n  const audioContextRef = useRef<AudioContext | null>(null);\n\n  const handleHoverButton = (index: number | null) => {\n    setHoveredButton(index);\n    onHoverButton(index);\n  };\n\n  useEffect(() => {\n    audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\n    \n    return () => {\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n      }\n    };\n  }, []);\n\n  // Update time display\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTime(Date.now());\n    }, 100);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  // Show result dialog when game ends\n  useEffect(() => {\n    if (phase === \"won\" || phase === \"lost\") {\n      setShowResultDialog(true);\n    }\n  }, [phase]);\n\n  const playSound = (frequency: number, duration: number = 0.3) => {\n    if (!audioContextRef.current) return;\n\n    const oscillator = audioContextRef.current.createOscillator();\n    const gainNode = audioContextRef.current.createGain();\n\n    oscillator.connect(gainNode);\n    gainNode.connect(audioContextRef.current.destination);\n\n    oscillator.frequency.value = frequency;\n    oscillator.type = 'sine';\n\n    gainNode.gain.setValueAtTime(0.3, audioContextRef.current.currentTime);\n    gainNode.gain.exponentialRampToValueAtTime(\n      0.01,\n      audioContextRef.current.currentTime + duration\n    );\n\n    oscillator.start(audioContextRef.current.currentTime);\n    oscillator.stop(audioContextRef.current.currentTime + duration);\n  };\n\n  useEffect(() => {\n    if (isShowingSequence && sequence.length > 0) {\n      let index = 0;\n      const delay = Math.max(600 - currentLevel * 50, 300);\n\n      const showNext = () => {\n        if (index < sequence.length) {\n          const buttonIndex = sequence[index];\n          if (buttonIndex !== undefined && BUTTON_COLORS[buttonIndex]) {\n            setActiveButton(buttonIndex);\n            playSound(BUTTON_COLORS[buttonIndex].sound);\n\n            setTimeout(() => {\n              setActiveButton(null);\n              index++;\n              setTimeout(showNext, delay);\n            }, 500);\n          }\n        } else {\n          setIsShowingSequence(false);\n          setCanInput(true);\n        }\n      };\n\n      setTimeout(showNext, 1000);\n    }\n  }, [isShowingSequence, sequence, currentLevel]);\n\n\n  const lastClickRef = useRef<number>(-Infinity);\n\n  const handleButtonClick = (index: number) => {\n    if (!canInput || isShowingSequence) return;\n    \n    const now = Date.now();\n    if (now - lastClickRef.current < 350) return;\n    lastClickRef.current = now;\n    \n    setActiveButton(index);\n    playSound(BUTTON_COLORS[index].sound);\n    addToPlayerSequence(index);\n\n    setTimeout(() => {\n      setActiveButton(null);\n    }, 300);\n  };\n\n  const buttonPositions: [number, number, number][] = [\n    [-4.5, 4.5, -10],\n    [-1.5, 4.5, -10],\n    [1.5, 4.5, -10],\n    [4.5, 4.5, -10],\n    [-4.5, 2, -10],\n    [-1.5, 2, -10],\n    [1.5, 2, -10],\n    [4.5, 2, -10],\n  ];\n\n  return (\n    <>\n      <color attach=\"background\" args={[\"#000000\"]} />\n      <fog attach=\"fog\" args={[\"#000000\", 15, 40]} />\n      \n      <ambientLight intensity={0.15} />\n      <hemisphereLight intensity={0.2} groundColor=\"#000000\" />\n      <pointLight position={[0, 6, 0]} intensity={0.8} color=\"#ffffff\" />\n      <pointLight position={[0, 3, -10]} intensity={0.5} color=\"#ffffff\" />\n\n      {/* Ø£Ø±Ø¶ÙŠØ© Ø³ÙˆØ¯Ø§Ø¡ Ø¹Ø§ÙƒØ³Ø© */}\n      <mesh position={[0, 0, 0]} rotation={[-Math.PI / 2, 0, 0]} receiveShadow>\n        <planeGeometry args={[30, 30]} />\n        <meshStandardMaterial \n          color=\"#000000\" \n          metalness={1} \n          roughness={0.1}\n          envMapIntensity={0.5}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø­Ø§Ø¦Ø· Ø§Ù„Ø£Ù…Ø§Ù…ÙŠ */}\n      <mesh position={[0, 4, -13]} receiveShadow>\n        <boxGeometry args={[27, 8, 0.5]} />\n        <meshStandardMaterial \n          color=\"#000000\" \n          metalness={0.9} \n          roughness={0.1}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø­Ø§Ø¦Ø· Ø§Ù„Ø®Ù„ÙÙŠ */}\n      <mesh position={[0, 4, 13]} receiveShadow>\n        <boxGeometry args={[27, 8, 0.5]} />\n        <meshStandardMaterial \n          color=\"#000000\" \n          metalness={0.9} \n          roughness={0.1}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø­Ø§Ø¦Ø· Ø§Ù„Ø£ÙŠÙ…Ù† */}\n      <mesh position={[13, 4, 0]} rotation={[0, Math.PI / 2, 0]} receiveShadow>\n        <boxGeometry args={[27, 8, 0.5]} />\n        <meshStandardMaterial \n          color=\"#000000\" \n          metalness={0.9} \n          roughness={0.1}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø­Ø§Ø¦Ø· Ø§Ù„Ø£ÙŠØ³Ø± */}\n      <mesh position={[-13, 4, 0]} rotation={[0, Math.PI / 2, 0]} receiveShadow>\n        <boxGeometry args={[27, 8, 0.5]} />\n        <meshStandardMaterial \n          color=\"#000000\" \n          metalness={0.9} \n          roughness={0.1}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø³Ù‚Ù */}\n      <mesh position={[0, 8, 0]} rotation={[Math.PI / 2, 0, 0]} receiveShadow>\n        <planeGeometry args={[27, 27]} />\n        <meshStandardMaterial \n          color=\"#000000\" \n          metalness={0.9} \n          roughness={0.1}\n        />\n      </mesh>\n\n      {/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ù„ÙˆÙ†Ø© - ÙƒØ±Ø§Øª Ø·Ø§ÙÙŠØ© */}\n      {BUTTON_COLORS.map((btn, index) => (\n        <ColorButton\n          key={index}\n          index={index}\n          color={btn.color}\n          position={buttonPositions[index]}\n          isActive={activeButton === index}\n          isHovered={hoveredButton === index}\n        />\n      ))}\n\n      {/* Ù„ÙˆØ­Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ø¦Ù…Ø© */}\n      <group position={[0, 6.5, -9]}>\n        <mesh>\n          <planeGeometry args={[8, 1.5]} />\n          <meshStandardMaterial \n            color=\"#000000\" \n            transparent \n            opacity={0.7}\n            metalness={0.5}\n            roughness={0.2}\n          />\n        </mesh>\n        <Text\n          position={[0, 0.3, 0.1]}\n          fontSize={0.5}\n          color=\"#ffffff\"\n          anchorX=\"center\"\n          anchorY=\"middle\"\n          fontWeight=\"bold\"\n        >\n          Ø§Ù„Ù…Ø³ØªÙˆÙ‰: {currentLevel + 1} / 5\n        </Text>\n        \n        {startTime > 0 && (\n          <Text\n            position={[-3, -0.3, 0.1]}\n            fontSize={0.3}\n            color=\"#fbbf24\"\n            anchorX=\"center\"\n            anchorY=\"middle\"\n          >\n            â±ï¸ {Math.floor((currentTime - startTime) / 1000)}s\n          </Text>\n        )}\n\n        {isShowingSequence && (\n          <Text\n            position={[0, -0.3, 0.1]}\n            fontSize={0.35}\n            color=\"#fbbf24\"\n            anchorX=\"center\"\n            anchorY=\"middle\"\n          >\n            Ø±Ø§Ù‚Ø¨ Ø§Ù„ØªØ³Ù„Ø³Ù„...\n          </Text>\n        )}\n\n        {canInput && (\n          <Text\n            position={[0, -0.3, 0.1]}\n            fontSize={0.35}\n            color=\"#22c55e\"\n            anchorX=\"center\"\n            anchorY=\"middle\"\n          >\n            Ø¯ÙˆØ±Ùƒ! ({playerSequence.length} / {sequence.length})\n          </Text>\n        )}\n      </group>\n\n      {/* Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ */}\n      <group position={[-11, 2, 0]} rotation={[0, Math.PI / 2, 0]}>\n        <mesh userData={{ isExitButton: true }}>\n          <boxGeometry args={[2, 3.5, 0.3]} />\n          <meshStandardMaterial\n            color={isExitButtonHovered ? \"#dc2626\" : \"#ef4444\"}\n            emissive=\"#ef4444\"\n            emissiveIntensity={isExitButtonHovered ? 1 : 0.8}\n            metalness={0.5}\n            roughness={0.3}\n          />\n        </mesh>\n        <Text\n          position={[0, 0, 0.2]}\n          fontSize={0.4}\n          color=\"#ffffff\"\n          anchorX=\"center\"\n          anchorY=\"middle\"\n        >\n          Ø®Ø±ÙˆØ¬\n        </Text>\n      </group>\n\n      <RaycastInteraction onButtonClick={handleButtonClick} onHoverButton={(index) => {\n        setIsExitButtonHovered(index === -1);\n        if (index !== -1) handleHoverButton(index);\n      }} onExitClick={onExit} />\n      \n      <FirstPersonControls />\n    </>\n  );\n}\n\nconst keyMap = [\n  { name: Controls.forward, keys: [\"ArrowUp\", \"KeyW\"] },\n  { name: Controls.back, keys: [\"ArrowDown\", \"KeyS\"] },\n  { name: Controls.left, keys: [\"ArrowLeft\", \"KeyA\"] },\n  { name: Controls.right, keys: [\"ArrowRight\", \"KeyD\"] },\n];\n\nexport function ChallengeRoom({ onExit }: { onExit: () => void }) {\n  const [hoveredButton, setHoveredButton] = useState<number | null>(null);\n  const { phase, resetChallenge, startChallenge } = useChallenge();\n  const [showDialog, setShowDialog] = useState(false);\n\n  useEffect(() => {\n    if (phase === \"won\" || phase === \"lost\") {\n      setShowDialog(true);\n    }\n  }, [phase]);\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        document.exitPointerLock?.();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  const handlePlayAgain = () => {\n    setShowDialog(false);\n    resetChallenge();\n    startChallenge();\n  };\n\n  const handleBackToMenu = () => {\n    setShowDialog(false);\n    resetChallenge();\n    onExit();\n  };\n\n  return (\n    <div style={{ width: '100vw', height: '100vh', position: 'fixed', top: 0, left: 0, zIndex: 100 }}>\n      <KeyboardControls map={keyMap}>\n        <Canvas\n          camera={{\n            position: [0, 3.5, 2],\n            fov: 60,\n            near: 0.1,\n            far: 1000,\n          }}\n          onCreated={({ gl }) => {\n            requestAnimationFrame(() => {\n              gl.domElement.requestPointerLock();\n            });\n          }}\n        >\n          <ChallengeRoomScene onExit={onExit} onHoverButton={setHoveredButton} />\n        </Canvas>\n      </KeyboardControls>\n      \n      <Crosshair isHoveringButton={hoveredButton !== null} />\n\n      {/* Result Dialog */}\n      {showDialog && (phase === \"won\" || phase === \"lost\") && (\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75 z-50\">\n          <div className=\"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4\">\n            <div className=\"text-center mb-6\">\n              {phase === \"won\" ? (\n                <>\n                  <h2 className=\"text-4xl font-bold text-green-600 mb-2\">ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ!</h2>\n                  <p className=\"text-lg text-gray-700\">Ù„Ù‚Ø¯ Ø£Ù†Ù‡ÙŠØª Ø§Ù„ØªØ­Ø¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­!</p>\n                </>\n              ) : (\n                <>\n                  <h2 className=\"text-4xl font-bold text-red-600 mb-2\">âŒ Ù„Ù„Ø£Ø³Ù</h2>\n                  <p className=\"text-lg text-gray-700\">Ù„Ù… ØªØªÙ…ÙƒÙ† Ù…Ù† Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠ</p>\n                </>\n              )}\n            </div>\n\n            <div className=\"space-y-3\">\n              <button\n                onClick={handlePlayAgain}\n                className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors\"\n              >\n                ğŸ® Ù„Ø¹Ø¨ Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©\n              </button>\n              <button\n                onClick={handleBackToMenu}\n                className=\"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg transition-colors\"\n              >\n                ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":16569},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4873},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2143},"client/src/components/game/FeedbackPanel.tsx":{"content":"import { Text } from \"@react-three/drei\";\nimport { useNumberGame } from \"@/lib/stores/useNumberGame\";\n\nfunction getFeedbackText(correctCount: number, correctPositionCount: number, numDigits: number): string {\n  if (correctCount === 0) {\n    return \"ÙˆÙ„Ø§ Ø±Ù‚Ù… ØµØ­\";\n  }\n  \n  const correctInWrongPosition = correctCount - correctPositionCount;\n  \n  if (correctPositionCount === numDigits) {\n    return \"ÙƒÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø©!\";\n  }\n  \n  if (correctPositionCount === 0 && correctCount > 0) {\n    if (correctCount === 1) return \"Ø±Ù‚Ù… ØµØ­ ÙˆÙ…ÙƒØ§Ù†Ù‡ ØºÙ„Ø·\";\n    if (correctCount === 2) return \"Ø±Ù‚Ù…ÙŠÙ† ØµØ­ ÙˆÙ…ÙƒØ§Ù†Ù‡Ù… ØºÙ„Ø·\";\n    if (correctCount === 3) return \"3 ØµØ­ ÙˆÙ…ÙƒØ§Ù†Ù‡Ù… ØºÙ„Ø·\";\n    return `${correctCount} ØµØ­ ÙˆÙ…ÙƒØ§Ù†Ù‡Ù… ØºÙ„Ø·`;\n  }\n  \n  if (correctPositionCount > 0 && correctInWrongPosition === 0) {\n    if (correctPositionCount === 1) return \"Ø±Ù‚Ù… ØµØ­ ÙˆÙ…ÙƒØ§Ù†Ù‡ ØµØ­\";\n    if (correctPositionCount === 2) return \"Ø±Ù‚Ù…ÙŠÙ† ØµØ­ ÙˆÙ…ÙƒØ§Ù†Ù‡Ù… ØµØ­\";\n    if (correctPositionCount === 3) return \"3 ØµØ­ ÙˆÙ…ÙƒØ§Ù†Ù‡Ù… ØµØ­\";\n  }\n  \n  if (correctPositionCount === 1 && correctInWrongPosition === 1) {\n    return \"Ø±Ù‚Ù…ÙŠÙ† ØµØ­ Ùˆ ÙˆØ§Ø­Ø¯ Ù…ÙƒØ§Ù†Ù‡ ØµØ­\";\n  }\n  \n  return `${correctCount} ØµØ­ Ùˆ ${correctPositionCount} Ù…ÙƒØ§Ù†Ù‡Ù… ØµØ­`;\n}\n\nexport function FeedbackPanel() {\n  return null;\n}\n","size_bytes":1349},"server/storage.ts":{"content":"import { users, type User, type InsertUser } from \"@shared/schema\";\n\n// modify the interface with any CRUD methods\n// you might need\n\nexport interface IStorage {\n  getUser(id: number): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<number, User>;\n  currentId: number;\n\n  constructor() {\n    this.users = new Map();\n    this.currentId = 1;\n  }\n\n  async getUser(id: number): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = this.currentId++;\n    const user: User = { ...insertUser, id };\n    this.users.set(id, user);\n    return user;\n  }\n}\n\nexport const storage = new MemStorage();\n","size_bytes":1012},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { VariantProps, cva } from \"class-variance-authority\";\nimport { PanelLeft } from \"lucide-react\";\n\nimport { useIsMobile } from \"@/hooks/use-is-mobile\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\";\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\nconst SIDEBAR_WIDTH = \"16rem\";\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\";\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  openMobile: boolean;\n  setOpenMobile: (open: boolean) => void;\n  isMobile: boolean;\n  toggleSidebar: () => void;\n};\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null);\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext);\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\n  }\n\n  return context;\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref,\n  ) => {\n    const isMobile = useIsMobile();\n    const [openMobile, setOpenMobile] = React.useState(false);\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen);\n    const open = openProp ?? _open;\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value;\n        if (setOpenProp) {\n          setOpenProp(openState);\n        } else {\n          _setOpen(openState);\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\n      },\n      [setOpenProp, open],\n    );\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open);\n    }, [isMobile, setOpen, setOpenMobile]);\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault();\n          toggleSidebar();\n        }\n      };\n\n      window.addEventListener(\"keydown\", handleKeyDown);\n      return () => window.removeEventListener(\"keydown\", handleKeyDown);\n    }, [toggleSidebar]);\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\";\n\n    const contextValue = React.useMemo<SidebarContext>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      ],\n    );\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className,\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    );\n  },\n);\nSidebarProvider.displayName = \"SidebarProvider\";\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\";\n    variant?: \"sidebar\" | \"floating\" | \"inset\";\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\";\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref,\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className,\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      );\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      );\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\",\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className,\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    );\n  },\n);\nSidebar.displayName = \"Sidebar\";\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar();\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event);\n        toggleSidebar();\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  );\n});\nSidebarTrigger.displayName = \"SidebarTrigger\";\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar();\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarRail.displayName = \"SidebarRail\";\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarInset.displayName = \"SidebarInset\";\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarInput.displayName = \"SidebarInput\";\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  );\n});\nSidebarHeader.displayName = \"SidebarHeader\";\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  );\n});\nSidebarFooter.displayName = \"SidebarFooter\";\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  );\n});\nSidebarSeparator.displayName = \"SidebarSeparator\";\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarContent.displayName = \"SidebarContent\";\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  );\n});\nSidebarGroup.displayName = \"SidebarGroup\";\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\";\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarGroupAction.displayName = \"SidebarGroupAction\";\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n));\nSidebarGroupContent.displayName = \"SidebarGroupContent\";\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n));\nSidebarMenu.displayName = \"SidebarMenu\";\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n));\nSidebarMenuItem.displayName = \"SidebarMenuItem\";\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    isActive?: boolean;\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref,\n  ) => {\n    const Comp = asChild ? Slot : \"button\";\n    const { isMobile, state } = useSidebar();\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    );\n\n    if (!tooltip) {\n      return button;\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      };\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    );\n  },\n);\nSidebarMenuButton.displayName = \"SidebarMenuButton\";\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    showOnHover?: boolean;\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuAction.displayName = \"SidebarMenuAction\";\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className,\n    )}\n    {...props}\n  />\n));\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\";\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean;\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`;\n  }, []);\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  );\n});\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\";\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className,\n    )}\n    {...props}\n  />\n));\nSidebarMenuSub.displayName = \"SidebarMenuSub\";\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />);\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\";\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean;\n    size?: \"sm\" | \"md\";\n    isActive?: boolean;\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\";\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n};\n","size_bytes":23790}},"version":2}